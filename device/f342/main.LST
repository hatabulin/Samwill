A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE     1


MACRO ASSEMBLER A51 V8.00d
OBJECT MODULE PLACED IN main.OBJ
ASSEMBLER INVOKED BY: E:\CD_WORK\Keil\C51\BIN\A51.EXE main.SRC XR GEN DB EP NOMOD51 INCDIR(E:\!Hardware\!SiLabs\MCU\Inc) 

LOC  OBJ            LINE     SOURCE

                       1     ; main.SRC generated from: main.c
                       2     ; COMPILER INVOKED BY:
                       3     ;        E:\CD_WORK\Keil\C51\BIN\C51.exe main.c DB OE BR INCDIR(E:\!Hardware\!SiLabs\MCU\In
                             c) SRC
                       4     
                       5     $nomod51 
                       6     
                       7     NAME    MAIN
                       8     
  00DA                 9     CCF2    BIT     0D8H.2
  009B                10     TB80    BIT     098H.3
  00A2                11     SPI0CKR DATA    0A2H
  00DB                12     CCF3    BIT     0D8H.3
  0080                13     P0      DATA    080H
  00F8                14     SPIEN   BIT     0F8H.0
  00DC                15     CCF4    BIT     0D8H.4
  0090                16     P1      DATA    090H
  00A0                17     P2      DATA    0A0H
  0090                18     SEGMENT_POINT   BIT     090H.0
  00BC                19     ADC0CF  DATA    0BCH
  00B0                20     P3      DATA    0B0H
  0080                21     EEPROM_SDA      BIT     080H.0
  00D6                22     AC      BIT     0D0H.6
  00C7                23     P4      DATA    0C7H
  00F9                24     PCA0    DATA    0F9H
  00E6                25     EIE1    DATA    0E6H
  00AF                26     EA      BIT     0A8H.7
  009D                27     MCE0    BIT     098H.5
  00E7                28     EIE2    DATA    0E7H
  00D7                29     USB0XCN DATA    0D7H
  00A0                30     LED1    BIT     0A0H.0
  0085                31     LED2    BIT     080H.5
  008F                32     PSCTL   DATA    08FH
  0087                33     LED3    BIT     080H.7
  00DF                34     CF      BIT     0D8H.7
  00E4                35     IT01CF  DATA    0E4H
  0086                36     LED4    BIT     080H.6
  00E8                37     ADC0CN  DATA    0E8H
  00A4                38     P0MDOUT DATA    0A4H
  00A5                39     P1MDOUT DATA    0A5H
  0081                40     EEPROM_SCL      BIT     080H.1
  00CB                41     TMR2RLH DATA    0CBH
  00A8                42     IE      DATA    0A8H
  00A6                43     P2MDOUT DATA    0A6H
  00CC                44     T2CE    BIT     0C8H.4
  00A7                45     P3MDOUT DATA    0A7H
  0093                46     TMR3RLH DATA    093H
  00F6                47     EIP1    DATA    0F6H
  00AE                48     P4MDOUT DATA    0AEH
  00F9                49     TXBMT   BIT     0F8H.1
  00F7                50     EIP2    DATA    0F7H
  00FC                51     PCA0CPH0        DATA    0FCH
  00CA                52     TMR2RLL DATA    0CAH
  00EA                53     PCA0CPH1        DATA    0EAH
  0092                54     TMR3RLL DATA    092H
  0082                55     DP      DATA    082H
  00EC                56     PCA0CPH2        DATA    0ECH
  00DE                57     CR      BIT     0D8H.6
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE     2

  00CB                58     T2SPLIT BIT     0C8H.3
  00CF                59     TF2H    BIT     0C8H.7
  00C3                60     ADC0GT  DATA    0C3H
  00EE                61     PCA0CPH3        DATA    0EEH
  009C                62     REN0    BIT     098H.4
  00FE                63     PCA0CPH4        DATA    0FEH
  00FB                64     PCA0CPL0        DATA    0FBH
  0085                65     EMI0CF  DATA    085H
  00E9                66     PCA0CPL1        DATA    0E9H
  00DA                67     PCA0CPM0        DATA    0DAH
  00D9                68     PCA0MD  DATA    0D9H
  00D8                69     PCA0CN  DATA    0D8H
  00EB                70     PCA0CPL2        DATA    0EBH
  00DB                71     PCA0CPM1        DATA    0DBH
  00CE                72     TF2L    BIT     0C8H.6
  00ED                73     PCA0CPL3        DATA    0EDH
  00DC                74     PCA0CPM2        DATA    0DCH
  00B8                75     IP      DATA    0B8H
  00C2                76     ARBLOST BIT     0C0H.2
  00C5                77     ADC0LT  DATA    0C5H
  00FD                78     PCA0CPL4        DATA    0FDH
  00DD                79     PCA0CPM3        DATA    0DDH
  00DE                80     PCA0CPM4        DATA    0DEH
  00D7                81     CY      BIT     0D0H.7
  00C0                82     SI      BIT     0C0H.0
  00E1                83     XBR0    DATA    0E1H
  00C1                84     SMB0CF  DATA    0C1H
  00E2                85     XBR1    DATA    0E2H
  00AF                86     PFE0CN  DATA    0AFH
  00AA                87     EMI0CN  DATA    0AAH
  00E3                88     XBR2    DATA    0E3H
  00D1                89     REF0CN  DATA    0D1H
  00C9                90     REG0CN  DATA    0C9H
  00ED                91     AD0INT  BIT     0E8H.5
  0081                92     SP      DATA    081H
  0084                93     EMI0TC  DATA    084H
  00D2                94     OV      BIT     0D0H.2
  00C0                95     SMB0CN  DATA    0C0H
  00CC                96     TMR2    DATA    0CCH
  00FD                97     MODF    BIT     0F8H.5
  0094                98     TMR3    DATA    094H
  00AC                99     SBCON1  DATA    0ACH
  009F               100     S0MODE  BIT     098H.7
  00FF               101     VDM0CN  DATA    0FFH
  00F1               102     P0MDIN  DATA    0F1H
  009D               103     CPT0MD  DATA    09DH
  009B               104     CPT0CN  DATA    09BH
  00F2               105     P1MDIN  DATA    0F2H
  009C               106     CPT1MD  DATA    09CH
  009A               107     CPT1CN  DATA    09AH
  00F3               108     P2MDIN  DATA    0F3H
  00CD               109     TF2LEN  BIT     0C8H.5
  00F4               110     P3MDIN  DATA    0F4H
  00F5               111     P4MDIN  DATA    0F5H
  00B5               112     SBRLH1  DATA    0B5H
  00F8               113     SPI0CN  DATA    0F8H
  0087               114     PCON    DATA    087H
  00B4               115     SBRLL1  DATA    0B4H
  00FF               116     SPIF    BIT     0F8H.7
  0089               117     TMOD    DATA    089H
  0088               118     TCON    DATA    088H
  00FE               119     WCOL    BIT     0F8H.6
  0096               120     SEGMENT_A       BIT     090H.6
  00FA               121     NSSMD0  BIT     0F8H.2
  0095               122     SEGMENT_B       BIT     090H.5
  00FB               123     NSSMD1  BIT     0F8H.3
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE     3

  00C8               124     TMR2CN  DATA    0C8H
  0091               125     SEGMENT_C       BIT     090H.1
  00D4               126     P0SKIP  DATA    0D4H
  0091               127     TMR3CN  DATA    091H
  0093               128     SEGMENT_D       BIT     090H.3
  00C8               129     T2XCLK  BIT     0C8H.0
  00D5               130     P1SKIP  DATA    0D5H
  0094               131     SEGMENT_E       BIT     090H.4
  00D6               132     P2SKIP  DATA    0D6H
  0097               133     SEGMENT_F       BIT     090H.7
  00DF               134     P3SKIP  DATA    0DFH
  0092               135     SEGMENT_G       BIT     090H.2
  0089               136     IE0     BIT     088H.1
  009F               137     CPT0MX  DATA    09FH
  008B               138     IE1     BIT     088H.3
  00B3               139     OSCICL  DATA    0B3H
  009E               140     CPT1MX  DATA    09EH
  00A9               141     CLKSEL  DATA    0A9H
  00F0               142     B       DATA    0F0H
  00BE               143     ADC0H   DATA    0BEH
  00B2               144     OSCICN  DATA    0B2H
  0086               145     OSCLCN  DATA    086H
  00CA               146     TMR2RL  DATA    0CAH
  00BD               147     ADC0L   DATA    0BDH
  0092               148     TMR3RL  DATA    092H
  00E0               149     ACC     DATA    0E0H
  00AC               150     ES0     BIT     0A8H.4
  00EF               151     AD0EN   BIT     0E8H.7
  00A9               152     ET0     BIT     0A8H.1
  00FB               153     PCA0CP0 DATA    0FBH
  00AB               154     ET1     BIT     0A8H.3
  008D               155     TF0     BIT     088H.5
  00E9               156     PCA0CP1 DATA    0E9H
  00B9               157     CLKMUL  DATA    0B9H
  00AD               158     ET2     BIT     0A8H.5
  0098               159     RI0     BIT     098H.0
  008F               160     TF1     BIT     088H.7
  00EB               161     PCA0CP2 DATA    0EBH
  00ED               162     PCA0CP3 DATA    0EDH
  008C               163     TH0     DATA    08CH
  00A8               164     EX0     BIT     0A8H.0
  0099               165     TI0     BIT     098H.1
  0088               166     IT0     BIT     088H.0
  00FD               167     PCA0CP4 DATA    0FDH
  00FA               168     PCA0H   DATA    0FAH
  008D               169     TH1     DATA    08DH
  00C7               170     MASTER  BIT     0C0H.7
  00AA               171     EX1     BIT     0A8H.2
  008A               172     IT1     BIT     088H.2
  00A2               173     KEY_RESET       BIT     0A0H.2
  00D0               174     P       BIT     0D0H.0
  00C1               175     ACK     BIT     0C0H.1
  00B1               176     OSCXCN  DATA    0B1H
  008A               177     TL0     DATA    08AH
  00F9               178     PCA0L   DATA    0F9H
  008B               179     TL1     DATA    08BH
  00C6               180     TXMODE  BIT     0C0H.6
  00BC               181     PS0     BIT     0B8H.4
  00B9               182     PT0     BIT     0B8H.1
  00D3               183     RS0     BIT     0D0H.3
  00BB               184     PT1     BIT     0B8H.3
  00D4               185     RS1     BIT     0D0H.4
  00BD               186     PT2     BIT     0B8H.5
  008C               187     TR0     BIT     088H.4
  00EE               188     AD0TM   BIT     0E8H.6
  008E               189     TR1     BIT     088H.6
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE     4

  00CA               190     TR2     BIT     0C8H.2
  00B8               191     PX0     BIT     0B8H.0
  00A1               192     KEY_STORE       BIT     0A0H.1
  00BA               193     PX1     BIT     0B8H.2
  0083               194     DPH     DATA    083H
  00C4               195     ADC0GTH DATA    0C4H
  0082               196     DPL     DATA    082H
  00C3               197     ADC0GTL DATA    0C3H
  0099               198     SBUF0   DATA    099H
  00AE               199     ESPI0   BIT     0A8H.6
  00D3               200     SBUF1   DATA    0D3H
  00C6               201     ADC0LTH DATA    0C6H
  00EF               202     RSTSRC  DATA    0EFH
  0098               203     SCON0   DATA    098H
  00B4               204     SBRL1   DATA    0B4H
  00E5               205     SMOD1   DATA    0E5H
  00D2               206     SCON1   DATA    0D2H
  00BA               207     AMX0N   DATA    0BAH
  00C5               208     ADC0LTL DATA    0C5H
  00BB               209     AMX0P   DATA    0BBH
  00C5               210     STA     BIT     0C0H.5
  00BE               211     PSPI0   BIT     0B8H.6
  00C2               212     SMB0DAT DATA    0C2H
  0084               213     EXT_INT0        BIT     080H.4
  00CD               214     TMR2H   DATA    0CDH
  00A1               215     SPI0CFG DATA    0A1H
  0085               216     EXT_INT1        BIT     080H.5
  0095               217     TMR3H   DATA    095H
  008E               218     CKCON   DATA    08EH
  00A3               219     KEY_MODE        BIT     0A0H.3
  00C9               220     T2CSS   BIT     0C8H.1
  00FC               221     RXOVRN  BIT     0F8H.4
  00CC               222     TMR2L   DATA    0CCH
  00A4               223     KEY_INCREMENT   BIT     0A0H.4
  00C3               224     ACKRQ   BIT     0C0H.3
  0096               225     USB0ADR DATA    096H
  0094               226     TMR3L   DATA    094H
  00D5               227     F0      BIT     0D0H.5
  00B6               228     FLSCL   DATA    0B6H
  0097               229     USB0DAT DATA    097H
  00E8               230     AD0CM0  BIT     0E8H.0
  00D1               231     F1      BIT     0D0H.1
  00C4               232     STO     BIT     0C0H.4
  00E9               233     AD0CM1  BIT     0E8H.1
  00A3               234     SPI0DAT DATA    0A3H
  00EA               235     AD0CM2  BIT     0E8H.2
  00BD               236     ADC0    DATA    0BDH
  00EB               237     AD0WINT BIT     0E8H.3
  00EC               238     AD0BUSY BIT     0E8H.4
  00D0               239     PSW     DATA    0D0H
  00D8               240     CCF0    BIT     0D8H.0
  009A               241     RB80    BIT     098H.2
  00B7               242     FLKEY   DATA    0B7H
  00D9               243     CCF1    BIT     0D8H.1
                     244     ?PR?main?MAIN        SEGMENT CODE 
                     245     ?DT?main?MAIN        SEGMENT DATA OVERLAYABLE 
                     246     ?BI?main?MAIN        SEGMENT BIT OVERLAYABLE 
                     247     ?PR?_LcdOutputLine?MAIN                  SEGMENT CODE 
                     248     ?DT?_LcdOutputLine?MAIN                  SEGMENT DATA OVERLAYABLE 
                     249     ?PR?WriteCounterToEEprom?MAIN            SEGMENT CODE 
                     250     ?PR?WriteDiscretToEEprom?MAIN            SEGMENT CODE 
                     251     ?PR?ResetCounterToOutputBuffer?MAIN      SEGMENT CODE 
                     252     ?PR?OutputBufferToResetCounter?MAIN      SEGMENT CODE 
                     253     ?PR?_OutSymbol?MAIN  SEGMENT CODE 
                     254     ?DT?_OutSymbol?MAIN  SEGMENT DATA OVERLAYABLE 
                     255     ?PR?LedsSwitchOff?MAIN                   SEGMENT CODE 
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE     5

                     256     ?PR?Initialize?MAIN  SEGMENT CODE 
                     257     ?PR?OSCILLATOR_Init?MAIN                 SEGMENT CODE 
                     258     ?PR?Timer0_Init?MAIN SEGMENT CODE 
                     259     ?PR?Timer1_Init?MAIN SEGMENT CODE 
                     260     ?PR?Timer3_Init?MAIN SEGMENT CODE 
                     261     ?PR?Port_Init?MAIN   SEGMENT CODE 
                     262     ?PR?SMBus_Init?MAIN  SEGMENT CODE 
                     263     ?PR?Ext_Interrupt_Init?MAIN              SEGMENT CODE 
                     264     ?PR?_EEPROM_ByteWrite?MAIN               SEGMENT CODE 
                     265     ?PR?_EEPROM_ByteRead?MAIN                SEGMENT CODE 
                     266     ?DT?_EEPROM_ByteRead?MAIN                SEGMENT DATA OVERLAYABLE 
                     267     ?PR?Suspend_Device?MAIN                  SEGMENT CODE 
                     268     ?PR?INT0_ISR?MAIN    SEGMENT CODE 
                     269     ?PR?INT1_ISR?MAIN    SEGMENT CODE 
                     270     ?PR?SMBus_ISR?MAIN   SEGMENT CODE 
                     271     ?DT?MAIN             SEGMENT DATA 
                     272     ?BI?MAIN             SEGMENT BIT 
                     273     ?BI?SMBus_ISR?MAIN   SEGMENT BIT OVERLAYABLE 
                     274     ?PR?Timer0_ISR?MAIN  SEGMENT CODE 
                     275     ?DT?Timer0_ISR?MAIN  SEGMENT DATA OVERLAYABLE 
                     276     ?PR?Timer2_ISR?MAIN  SEGMENT CODE 
                     277     ?PR?Timer3_ISR?MAIN  SEGMENT CODE 
                     278     ?PR?USB_API_TEST_ISR?MAIN                SEGMENT CODE 
                     279     ?DT?USB_API_TEST_ISR?MAIN                SEGMENT DATA OVERLAYABLE 
                     280     ?PR?Del_500mks?MAIN  SEGMENT CODE 
                     281     ?PR?Del_100ms?MAIN   SEGMENT CODE 
                     282     ?PR?_Del?MAIN        SEGMENT CODE 
                     283     ?C_INITSEG           SEGMENT CODE 
                     284     ?CO?MAIN             SEGMENT CODE 
                     285             EXTRN   CODE (Get_Interrupt_Source)
                     286             EXTRN   CODE (USB_Suspend)
                     287             EXTRN   CODE (_Block_Read)
                     288             EXTRN   CODE (?C_STARTUP)
                     289             EXTRN   CODE (?C?LSHL)
                     290             EXTRN   CODE (?C?ULCMP)
                     291             EXTRN   CODE (?C?ULDIV)
                     292             EXTRN   CODE (?C?LMUL)
                     293             EXTRN   CODE (?C?ULSHR)
                     294             EXTRN   CODE (?C?CLDPTR)
                     295             EXTRN   CODE (?C?CSTPTR)
                     296             PUBLIC  TempCounter
                     297             PUBLIC  Flag
                     298             PUBLIC  OutputBuffer
                     299             PUBLIC  In_Packet
                     300             PUBLIC  Rotate
                     301             PUBLIC  SMB_RW
                     302             PUBLIC  EncN
                     303             PUBLIC  Counter
                     304             PUBLIC  KeyFlag4
                     305             PUBLIC  KeyFlag3
                     306             PUBLIC  KeyFlag2
                     307             PUBLIC  KeyFlag1
                     308             PUBLIC  Discret
                     309             PUBLIC  SMB_SENDWORDADDR_HIGH
                     310             PUBLIC  SMB_ACKPOLL
                     311             PUBLIC  pSMB_DATA_IN
                     312             PUBLIC  WORD_ADDR_HIGH
                     313             PUBLIC  LongKeyFlag
                     314             PUBLIC  EncOld
                     315             PUBLIC  Low?
                     316             PUBLIC  EncTemp
                     317             PUBLIC  Flag1
                     318             PUBLIC  pSMB_DATA_OUT
                     319             PUBLIC  OldState
                     320             PUBLIC  SMB_RANDOMREAD
                     321             PUBLIC  LongKeyFlagCounter
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE     6

                     322             PUBLIC  SMB_DATA_LEN
                     323             PUBLIC  Step
                     324             PUBLIC  SMB_SENDWORDADDR_LOW
                     325             PUBLIC  LcdMode
                     326             PUBLIC  EncState
                     327             PUBLIC  now_b
                     328             PUBLIC  SMB_SINGLEBYTE_OUT
                     329             PUBLIC  now_a
                     330             PUBLIC  EncData
                     331             PUBLIC  WORD_ADDR_LOW
                     332             PUBLIC  pre_b
                     333             PUBLIC  FlagPoint
                     334             PUBLIC  pre_a
                     335             PUBLIC  SMB_BUSY
                     336             PUBLIC  High?
                     337             PUBLIC  LCD_STRING
                     338             PUBLIC  DEVICE_SN_Str
                     339             PUBLIC  DEVICE_NAME_Str
                     340             PUBLIC  USB_bcdDevice
                     341             PUBLIC  USB_PwAttributes
                     342             PUBLIC  USB_MaxPower
                     343             PUBLIC  USB_SerialStr
                     344             PUBLIC  USB_ProductStr
                     345             PUBLIC  USB_MfrStr
                     346             PUBLIC  USB_PID
                     347             PUBLIC  USB_VID
                     348             PUBLIC  _Del
                     349             PUBLIC  Del_100ms
                     350             PUBLIC  Del_500mks
                     351             PUBLIC  USB_API_TEST_ISR
                     352             PUBLIC  Timer3_ISR
                     353             PUBLIC  Timer2_ISR
                     354             PUBLIC  Timer0_ISR
                     355             PUBLIC  SMBus_ISR
                     356             PUBLIC  INT1_ISR
                     357             PUBLIC  INT0_ISR
                     358             PUBLIC  Suspend_Device
                     359             PUBLIC  _EEPROM_ByteRead
                     360             PUBLIC  _EEPROM_ByteWrite
                     361             PUBLIC  Ext_Interrupt_Init
                     362             PUBLIC  SMBus_Init
                     363             PUBLIC  Port_Init
                     364             PUBLIC  Timer3_Init
                     365             PUBLIC  Timer1_Init
                     366             PUBLIC  Timer0_Init
                     367             PUBLIC  OSCILLATOR_Init
                     368             PUBLIC  Initialize
                     369             PUBLIC  LedsSwitchOff
                     370             PUBLIC  _OutSymbol
                     371             PUBLIC  OutputBufferToResetCounter
                     372             PUBLIC  ResetCounterToOutputBuffer
                     373             PUBLIC  WriteDiscretToEEprom
                     374             PUBLIC  WriteCounterToEEprom
                     375             PUBLIC  _LcdOutputLine
                     376             PUBLIC  main
                     377     
----                 378             RSEG  ?DT?Timer0_ISR?MAIN
0000                 379     ?Timer0_ISR?BYTE:
0000                 380              i?2257:   DS   1
                     381     
----                 382             RSEG  ?DT?USB_API_TEST_ISR?MAIN
0000                 383     ?USB_API_TEST_ISR?BYTE:
0000                 384         INTVAL?2559:   DS   1
                     385     
----                 386             RSEG  ?BI?SMBus_ISR?MAIN
0000                 387     ?SMBus_ISR?BIT:
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE     7

0000                 388           FAIL?2154:   DBIT   1
                     389     
----                 390             RSEG  ?DT?main?MAIN
0000                 391     ?main?BYTE:
0000                 392            temp?042:   DS   4
                     393     
----                 394             RSEG  ?BI?main?MAIN
0000                 395     ?main?BIT:
0000                 396          UpDown?041:   DBIT   1
                     397     
----                 398             RSEG  ?DT?_OutSymbol?MAIN
0000                 399     ?_OutSymbol?BYTE:
0000                 400       LedNumber?648:   DS   1
0001                 401             ORG  1
0001                 402      SymbolCode?649:   DS   1
                     403     
----                 404             RSEG  ?DT?_LcdOutputLine?MAIN
0000                 405     ?_LcdOutputLine?BYTE:
0000                 406           delay?143:   DS   1
0001                 407             ORG  1
0001                 408               i?144:   DS   1
0002                 409             ORG  2
0002                 410               y?145:   DS   1
                     411     
----                 412             RSEG  ?DT?_EEPROM_ByteRead?MAIN
0000                 413     ?_EEPROM_ByteRead?BYTE:
0000                 414         retval?1753:   DS   1
                     415     
----                 416             RSEG  ?DT?MAIN
0000                 417     low_counter?2258:   DS   2
                     418     
----                 419             RSEG  ?DT?MAIN
0002                 420              i?2155:   DS   1
0003                 421               High?:   DS   1
0004                 422       WORD_ADDR_LOW:   DS   1
0005                 423             EncData:   DS   1
0006                 424     SMB_SINGLEBYTE_OUT:   DS   1
0007                 425            EncState:   DS   1
0008                 426             LcdMode:   DS   1
0009                 427                Step:   DS   1
000A                 428        SMB_DATA_LEN:   DS   1
000B                 429     LongKeyFlagCounter:   DS   2
000D                 430            OldState:   DS   1
000E                 431            EncMinus:   DS   1
000F                 432       pSMB_DATA_OUT:   DS   3
0012                 433                 New:   DS   1
0013                 434             EncTemp:   DS   1
0014                 435                Low?:   DS   1
0015                 436              EncOld:   DS   4
0019                 437      WORD_ADDR_HIGH:   DS   1
001A                 438             EncPlus:   DS   1
001B                 439        pSMB_DATA_IN:   DS   3
001E                 440             Discret:   DS   4
0022                 441             Counter:   DS   4
0026                 442                EncN:   DS   1
0027                 443           In_Packet:   DS   10
0031                 444        OutputBuffer:   DS   6
0037                 445                Flag:   DS   1
0038                 446         TempCounter:   DS   4
                     447     
----                 448             RSEG  ?BI?MAIN
0000                 449     SEND_START?2156:   DBIT   1
0001                 450            SMB_BUSY:   DBIT   1
0002                 451               pre_a:   DBIT   1
0003                 452           FlagPoint:   DBIT   1
0004                 453               pre_b:   DBIT   1
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE     8

0005                 454               now_a:   DBIT   1
0006                 455               now_b:   DBIT   1
0007                 456     SMB_SENDWORDADDR_LOW:   DBIT   1
0008                 457      SMB_RANDOMREAD:   DBIT   1
0009                 458               Flag1:   DBIT   1
000A                 459         LongKeyFlag:   DBIT   1
000B                 460         SMB_ACKPOLL:   DBIT   1
000C                 461     SMB_SENDWORDADDR_HIGH:   DBIT   1
000D                 462            KeyFlag1:   DBIT   1
000E                 463            KeyFlag2:   DBIT   1
000F                 464            KeyFlag3:   DBIT   1
0010                 465            KeyFlag4:   DBIT   1
0011                 466              SMB_RW:   DBIT   1
0012                 467              Rotate:   DBIT   1
                     468     
----                 469             RSEG  ?CO?MAIN
0000                 470     USB_VID:
0000 10C4            471             DW      010C4H
                     472     
0002                 473     USB_PID:
0002 EA61            474             DW      0EA61H
                     475     
0004                 476     USB_MfrStr:
0004 1A              477             DB      01AH
0005 03              478             DB      003H
0006 48              479             DB      048H
0007 00              480             DB      000H
0008 61              481             DB      061H
0009 00              482             DB      000H
000A 74              483             DB      074H
000B 00              484             DB      000H
000C 61              485             DB      061H
000D 00              486             DB      000H
000E 62              487             DB      062H
000F 00              488             DB      000H
0010 40              489             DB      040H
0011 00              490             DB      000H
0012 43              491             DB      043H
0013 00              492             DB      000H
0014 6F              493             DB      06FH
0015 00              494             DB      000H
0016 20              495             DB      020H
0017 00              496             DB      000H
                     497     
0018                 498     USB_ProductStr:
0018 10              499             DB      010H
0019 03              500             DB      003H
001A 48              501             DB      048H
001B 00              502             DB      000H
001C 61              503             DB      061H
001D 00              504             DB      000H
001E 74              505             DB      074H
001F 00              506             DB      000H
0020 53              507             DB      053H
0021 00              508             DB      000H
0022 61              509             DB      061H
0023 00              510             DB      000H
0024 6D              511             DB      06DH
0025 00              512             DB      000H
0026 77              513             DB      077H
0027 00              514             DB      000H
0028 69              515             DB      069H
0029 00              516             DB      000H
002A 6C              517             DB      06CH
002B 00              518             DB      000H
002C 6C              519             DB      06CH
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE     9

002D 00              520             DB      000H
                     521     
002E                 522     USB_SerialStr:
002E 0A              523             DB      00AH
002F 03              524             DB      003H
0030 30              525             DB      030H
0031 00              526             DB      000H
0032 30              527             DB      030H
0033 00              528             DB      000H
0034 30              529             DB      030H
0035 00              530             DB      000H
0036 31              531             DB      031H
0037 00              532             DB      000H
                     533     
0038                 534     USB_MaxPower:
0038 0F              535             DB      00FH
                     536     
0039                 537     USB_PwAttributes:
0039 80              538             DB      080H
                     539     
003A                 540     USB_bcdDevice:
003A 0100            541             DW      00100H
                     542     
003C                 543     DEVICE_NAME_Str:
003C 48              544             DB      048H
003D 61              545             DB      061H
003E 74              546             DB      074H
003F 53              547             DB      053H
0040 61              548             DB      061H
0041 6D              549             DB      06DH
                     550     
0042                 551     DEVICE_SN_Str:
0042 01              552             DB      001H
0043 02              553             DB      002H
0044 03              554             DB      003H
0045 04              555             DB      004H
                     556     
0046                 557     LCD_STRING:
0046 2D              558             DB      02DH
0047 2D              559             DB      02DH
0048 2D              560             DB      02DH
0049 2D              561             DB      02DH
004A 2D              562             DB      02DH
004B 2D              563             DB      02DH
                     564     
                     565     
----                 566             RSEG  ?C_INITSEG
0000 01              567             DB      001H
0001 00       F      568             DB      Flag
0002 00              569             DB      000H
                     570     
0003 04              571             DB      004H
0004 00       F      572             DB      Counter
0005 00000000        573             DB      000H,000H,000H,000H     ; long
                     574     
0009 C100     F      575             DB      0C1H, Flag1 + 080H      ; bit-init
                     576     
000B C100     F      577             DB      0C1H, FlagPoint + 000H  ; bit-init
                     578     
000D C100     F      579             DB      0C1H, KeyFlag1 + 000H   ; bit-init
                     580     
000F C100     F      581             DB      0C1H, KeyFlag2 + 000H   ; bit-init
                     582     
0011 C100     F      583             DB      0C1H, KeyFlag3 + 000H   ; bit-init
                     584     
0013 C100     F      585             DB      0C1H, KeyFlag4 + 000H   ; bit-init
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    10

                     586     
0015 C100     F      587             DB      0C1H, LongKeyFlag + 000H        ; bit-init
                     588     
0017 02              589             DB      002H
0018 00       F      590             DB      LongKeyFlagCounter
0019 0000            591             DW      00000H
                     592     
001B 01              593             DB      001H
001C 00       F      594             DB      LcdMode
001D 00              595             DB      000H
                     596     
001E 01              597             DB      001H
001F 00       F      598             DB      EncN
0020 00              599             DB      000H
                     600     
0021 04              601             DB      004H
0022 00       F      602             DB      EncOld
0023 00              603             DB      000H
0024 00              604             DB      000H
0025 01              605             DB      001H
0026 00              606             DB      000H
                     607     
0027 C100     F      608             DB      0C1H, SMB_BUSY + 000H   ; bit-init
                     609     
0029 C100     F      610             DB      0C1H, SEND_START?2156 + 000H    ; bit-init
                     611     
002B 02              612             DB      002H
002C 00       F      613             DB      low_counter?2258
002D 0000            614             DW      00000H
                     615     
                     616     ; 
                     617     ;     ////////////////////////////////////////////////////////////////////
                     618     ; //
                     619     ; // <NAME PROJECT WITH MORE INFO>
                     620     ; // 
                     621     ; // Name:              Hatab Samwill
                     622     ; // Version:           2.0 
                     623     ; // Project started:   16.03.2013: 
                     624     ; // Project ended::
                     625     ; // 
                     626     ; // version 1 - 
                     627     ; // build: 160313
                     628     ; // 
                     629     ; // EEPROM 24c64 - 64Kbit (8 Kbytes)
                     630     ; // OSCILLATOR 24Mhz on p0.2, p0.3
                     631     ; //
                     632     ; // Плавает 1-2 мм на 20 см
                     633     ; // Нет "болтанки" и дребезгов
                     634     ; //
                     635     ; #define VERSION1      // Версия платы: 
                     636     ;                                       // ------------
                     637     ;                                       // 1.0 - Первый блин
                     638     ;                                       // 2.0 - 
                     639     ;                                       // 3.0 - 
                     640     ;                                       // 3.1 - 
                     641     ;                                       // 3.2 - 
                     642     ; #define ALGO3
                     643     ; #define DEFAULT_DISCRET               100;
                     644     ; #define EEPROM_24C128
                     645     ; #define REVISION_VER_DIGIT1 0x01 // версия прошивки
                     646     ; #define REVISION_VER_DIGIT2 0x00
                     647     ; 
                     648     ; #define EncA    2
                     649     ; #define EncB    3
                     650     ; #define EncSw   6
                     651     ; #define EncIN   P0
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    11

                     652     ; #define EncPort P0
                     653     ; #define EncMask ((1<<EncB)|(1<<EncA)|(1<<EncSw))
                     654     ; 
                     655     ; #include "compiler_defs.h"
                     656     ; #include "C8051f340_defs.h"
                     657     ; //#include "C8051f340.h"
                     658     ; #include "USB_API.h"
                     659     ; #include <math.h>
                     660     ; #include <string.h>
                     661     ; 
                     662     ; #define INTERRUPT_USBXpress 17
                     663     ; //#define _GENERATOR_MODE_ON_OFF_ ~state
                     664     ; //////////////////////////////////////////////////////
                     665     ; ///
                     666     ; ///            PORT PINS CONFIGURATIONS (Defines)
                     667     ; /// 
                     668     ; //////////////////////////////////////////////////////
                     669     ; // 
                     670     ; // PINS
                     671     ; // 
                     672     ; sbit EEPROM_SDA                       = P0^0;
                     673     ; sbit EEPROM_SCL                       = P0^1;
                     674     ; 
                     675     ; #ifdef VERSION1
                     676     ; sbit KEY_RESET                                = P2^2;
                     677     ; sbit KEY_INCREMENT                    = P2^4;
                     678     ; sbit KEY_MODE                                 = P2^3;
                     679     ; sbit KEY_STORE                                = P2^1;
                     680     ; 
                     681     ; sbit SEGMENT_A                                = P1^6;
                     682     ; sbit SEGMENT_B                                = P1^5;
                     683     ; sbit SEGMENT_C                                = P1^1;
                     684     ; sbit SEGMENT_D                                = P1^3;
                     685     ; sbit SEGMENT_E                                = P1^4;
                     686     ; sbit SEGMENT_F                                = P1^7;
                     687     ; sbit SEGMENT_G                                = P1^2;
                     688     ; sbit SEGMENT_POINT                    = P1^0;
                     689     ; 
                     690     ; sbit LED1                                     = P2^0;
                     691     ; sbit LED2                                     = P0^5;
                     692     ; sbit LED3                                     = P0^7;
                     693     ; sbit LED4                                     = P0^6;
                     694     ; 
                     695     ; sbit EXT_INT0                         = P0^4;
                     696     ; sbit EXT_INT1                         = P0^5;
                     697     ; #endif
                     698     ; 
                     699     ; //
                     700     ; // Адреса области EEPROM
                     701     ; //
                     702     ; #define EEPROM_TEST_ADDR1                                     0x00
                     703     ; #define EEPROM_TEST_ADDR2                                     0x01
                     704     ; #define EEPROM_CONST_ADDR                                     0x02
                     705     ; #define EEPROM_RESET_COUNTER_ADDR                     0x03
                     706     ; #define EEPROM_COUNTER_ADDR_LOW                               0x04
                     707     ; #define EEPROM_COUNTER_ADDR_HIGH                      0x05
                     708     ; #define EEPROM_LCDMODE_ADDR                                   0x10
                     709     ; #define EEPROM_DISCRET_ADDR_LOW                               0x20
                     710     ; #define EEPROM_DISCRET_ADDR_HIGH                      0x21
                     711     ; 
                     712     ; // Device addresses (7 bits, lsb is a don't care)
                     713     ; #define  SYSCLK         12000000
                     714     ; #define  SMB_FREQUENCY  40000          // Target SCL clock rate
                     715     ;                                        // This example supports between 10kHz
                     716     ;                                        // and 100kHz
                     717     ; 
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    12

                     718     ; #define  WRITE          0x00           // SMBus WRITE command
                     719     ; #define  READ           0x01           // SMBus READ command
                     720     ; #define  EEPROM_ADDR    0xA0           // Device address for slave target
                     721     ;                                        // Note: This address is specified
                     722     ;                                        // in the Microchip 24LC02B
                     723     ;                                        // datasheet.
                     724     ; #define  TARGET                       0xA0           // Target SMBus slave address
                     725     ; 
                     726     ; 
                     727     ; // SMBus Buffer Size
                     728     ; #define  SMB_BUFF_SIZE  0x08           // Defines the maximum number of bytes
                     729     ;                                        // that can be sent or received in a
                     730     ;                                       // single transfer
                     731     ; // Status vector - top 4 bits only
                     732     ; #define  SMB_MTSTA      0xE0           // (MT) start transmitted
                     733     ; #define  SMB_MTDB       0xC0           // (MT) data byte transmitted
                     734     ; #define  SMB_MRDB       0x80           // (MR) data byte received
                     735     ; //
                     736     ; // ..
                     737     ; #define TIMER0_RELOAD_HIGH 0xF8
                     738     ; #define TIMER0_RELOAD_LOW  0xF8
                     739     ; 
                     740     ; //--------------------------TIMER DEFINITIONS ------
                     741     ; #define TIMER_PRESCALER           32  //48  // Based on Timer CKCON settings
                     742     ; 
                     743     ; #define TIMER_TICKS_PER_MS  SYSCLK/TIMER_PRESCALER/1500 //1000
                     744     ; 
                     745     ; #define AUX1     TIMER_TICKS_PER_MS
                     746     ; #define AUX2     -AUX1
                     747     ; 
                     748     ; #define READ_TEMP_COUNT 255
                     749     ; #define Timer0_Rate 10
                     750     ; #define Timer0_RateEncoder 5
                     751     ; //
                     752     ; // SYSCLK/SMB_FREQUENCY/4/3) < 255)
                     753     ; //---------------------------------------------------------
                     754     ; 
                     755     ; // Prototypes
                     756     ; //
                     757     ; void Initialize(void);
                     758     ; void Timer0_Init(void);
                     759     ; void Timer1_Init(void);
                     760     ; void Timer3_Init(void);
                     761     ; void Timer3_ISR(void);
                     762     ; void Timer0_ISR(void);
                     763     ; void OSCILLATOR_Init (void);
                     764     ; void Ext_Interrupt_Init (void);
                     765     ; void Port_Init(void);
                     766     ; void SMBus_Init (void);
                     767     ; void SMBus_ISR(void);
                     768     ; //
                     769     ; // Функции контроллера юзер интерфейсные
                     770     ; void EEPROM_ByteWrite(U16 addr, unsigned char dat);
                     771     ; unsigned char EEPROM_ByteRead(U16 addr);
                     772     ; void LedsSwitchOff(void);
                     773     ; void OutSymbol(unsigned char , unsigned char);
                     774     ; void WriteCounterToEEprom(void);
                     775     ; void WriteDiscretToEEprom(void);
                     776     ; void LcdOutputLine(unsigned char);
                     777     ; //
                     778     ; void ResetCounterToOutputBuffer(void);
                     779     ; void OutputBufferToResetCounter(void);
                     780     ; //
                     781     ; void Del_10mks(void);
                     782     ; void Del_25ms(void);
                     783     ; void Del_100ms(void);
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    13

                     784     ; void Del_500mks(void);
                     785     ; void Del_10ms(void);
                     786     ; void Del(int);
                     787     ; ////////////////////////////
                     788     ; ////////////////////////////
                     789     ; // GLOBAL ПЕРЕМЕННЫЕ !!!
                     790     ; ////////////////////////////
                     791     ; unsigned char Flag = 0;
                     792     ; unsigned long Counter = 0, TempCounter, Discret ;
                     793     ; bit Flag1 = 1;
                     794     ; bit FlagPoint = 0;
                     795     ; bit KeyFlag1 = 0;
                     796     ; bit KeyFlag2 = 0;
                     797     ; bit KeyFlag3 = 0;
                     798     ; bit KeyFlag4 = 0;
                     799     ; bit LongKeyFlag = 0;
                     800     ; unsigned int LongKeyFlagCounter = 0;
                     801     ; unsigned char LcdMode = 0;
                     802     ; //unsigned int Discret = 0;
                     803     ; unsigned char EncData, EncState, OldState, EncTemp;
                     804     ; unsigned char EncN = 0, EncOld[4] = {0, 0, 1, 0};
                     805     ; unsigned char Step,Low,High;
                     806     ; bit Rotate;
                     807     ; 
                     808     ; bit now_a, now_b, pre_a, pre_b;
                     809     ; 
                     810     ; static unsigned char New, EncPlus, EncMinus;//Переменные нового значения нкодера, промежу
                             точные переменные + и -
                     811     ; 
                     812     ; //
                     813     ; // массивы
                     814     ; //
                     815     ; unsigned char data    OutputBuffer[6];
                     816     ; unsigned char data    In_Packet[10];
                     817     ; 
                     818     ; //unsigned char waveform[256];
                     819     ; //
                     820     ; // Переменные для функций работы с EEPROM
                     821     ; 
                     822     ; unsigned char* pSMB_DATA_IN;           // Global pointer for SMBus data
                     823     ;                                        // All receive data is written here
                     824     ; 
                     825     ; unsigned char SMB_SINGLEBYTE_OUT;      // Global holder for single byte writes.
                     826     ; 
                     827     ; unsigned char* pSMB_DATA_OUT;          // Global pointer for SMBus data.
                     828     ;                                        // All transmit data is read from here
                     829     ; 
                     830     ; unsigned char SMB_DATA_LEN;            // Global holder for number of bytes
                     831     ;                                        // to send or receive in the current
                     832     ;                                        // SMBus transfer.
                     833     ; 
                     834     ; unsigned char WORD_ADDR_HIGH;               // Global holder for the EEPROM word
                     835     ;                                        // address that will be accessed in
                     836     ;                                        // the next transfer
                     837     ; 
                     838     ; unsigned char WORD_ADDR_LOW;
                     839     ; 
                     840     ; bit SMB_BUSY = 0;                      // Software flag to indicate when the
                     841     ;                                        // EEPROM_ByteRead() or
                     842     ;                                        // EEPROM_ByteWrite()
                     843     ;                                        // functions have claimed the SMBus
                     844     ; 
                     845     ; bit SMB_RW;                            // Software flag to indicate the
                     846     ;                                        // direction of the current transfer
                     847     ; 
                     848     ; bit SMB_SENDWORDADDR_LOW;                  // When set, this flag causes the ISR
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    14

                     849     ;                                        // to send the 8-bit <WORD_ADDR>
                     850     ;                                        // after sending the slave address.
                     851     ; bit SMB_SENDWORDADDR_HIGH;
                     852     ; 
                     853     ; bit SMB_RANDOMREAD;                    // When set, this flag causes the ISR
                     854     ;                                        // to send a START signal after sending
                     855     ;                                        // the word address.
                     856     ;                                        // For the 24LC02B EEPROM, a random read
                     857     ;                                        // (a read from a particular address in
                     858     ;                                        // memory) starts as a write then
                     859     ;                                        // changes to a read after the repeated
                     860     ;                                        // start is sent. The ISR handles this
                     861     ;                                        // switchover if the <SMB_RANDOMREAD>
                     862     ;                                        // bit is set.
                     863     ; 
                     864     ; bit SMB_ACKPOLL;                       // When set, this flag causes the ISR
                     865     ;                                        // to send a repeated START until the
                     866     ;                                        // slave has acknowledged its address
                     867     ; 
                     868     ; /*** [BEGIN] USB Descriptor Information [BEGIN] ***/
                     869     ; 
                     870     ; SEGMENT_VARIABLE(USB_VID, U16, SEG_CODE) = 0x10c4;
                     871     ; SEGMENT_VARIABLE(USB_PID, U16, SEG_CODE) = 0xea61;
                     872     ; SEGMENT_VARIABLE(USB_MfrStr[], char , SEG_CODE) = // Manufacturer String
                     873     ; {
                     874     ;    0x1A,
                     875     ;    0x03,
                     876     ;    'H',0,
                     877     ;    'a',0,
                     878     ;    't',0,
                     879     ;    'a',0,
                     880     ;    'b',0,
                     881     ;    '@',0,
                     882     ;    'C',0,
                     883     ;    'o',0,
                     884     ;    ' ',0
                     885     ; 
                     886     ; };
                     887     ; SEGMENT_VARIABLE(USB_ProductStr[], unsigned char , SEG_CODE) = // Product Desc. String
                     888     ; {
                     889     ;    0x10,
                     890     ;    0x03,
                     891     ;    'H',0,
                     892     ;    'a',0,
                     893     ;    't',0,
                     894     ;    'S',0,
                     895     ;    'a',0,
                     896     ;    'm',0,
                     897     ;    'w',0,
                     898     ;    'i',0,
                     899     ;    'l',0,
                     900     ;    'l',0
                     901     ; };
                     902     ; 
                     903     ; SEGMENT_VARIABLE(USB_SerialStr[], unsigned char , SEG_CODE) = // Serial Number String
                     904     ; {
                     905     ;    0x0A,
                     906     ;    0x03,
                     907     ;    '0',0,
                     908     ;    '0',0,
                     909     ;    '0',0,
                     910     ;    '1',0,
                     911     ; };
                     912     ; 
                     913     ; SEGMENT_VARIABLE(USB_MaxPower, unsigned char , SEG_CODE) = 15;    // Max current = 30 mA
                     914     ;                                                       // (15 * 2)
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    15

                     915     ; SEGMENT_VARIABLE(USB_PwAttributes, unsigned char , SEG_CODE) = 0x80;    // Bus-powered,
                     916     ;                                                           // remote wakeup not
                     917     ;                                                          // supported
                     918     ; SEGMENT_VARIABLE(USB_bcdDevice, U16, SEG_CODE) = 0x0100;    // Device release
                     919     ;                                                             // number 1.00
                     920     ; 
                     921     ; SEGMENT_VARIABLE(DEVICE_NAME_Str[], unsigned char , SEG_CODE) = // Serial Number String
                     922     ; {'H','a','t','S','a','m' };
                     923     ; SEGMENT_VARIABLE(DEVICE_SN_Str[], unsigned char , SEG_CODE) = { 1,2,3,4 };
                     924     ; SEGMENT_VARIABLE(LCD_STRING[], unsigned char, SEG_CODE) = {'-','-','-','-','-','-'};
                     925     ; /*** [ END ] USB Descriptor Information [ END ] ***/
                     926     ; 
                     927     ; #define ERROR_EEPROM 1
                     928     ; 
                     929     ; void main(void)
                     930     
----                 931             RSEG  ?PR?main?MAIN
0000                 932     main:
                     933             USING   0
                     934                             ; SOURCE LINE # 314
                     935     ; {
                     936                             ; SOURCE LINE # 315
                     937     ;       unsigned char i;
                     938     ;       bit UpDown = 0;
                     939                             ; SOURCE LINE # 317
0000 C200     F      940             CLR     UpDown?041
                     941     ;       long    temp;
                     942     ;       PCA0MD &= ~0x40;                       // Disable Watchdog timer
                     943                             ; SOURCE LINE # 319
0002 53D9BF          944             ANL     PCA0MD,#0BFH
                     945     ;       Initialize();
                     946                             ; SOURCE LINE # 320
0005 120000   F      947             LCALL   Initialize
                     948     ; 
                     949     ; //    USB_Clock_Start();                     // Init USB clock *before* calling USB_Init
                     950     ; //    USB_Init(USB_VID,USB_PID,USB_MfrStr,USB_ProductStr,USB_SerialStr,USB_MaxPower,USB_P
                             wAttributes,USB_bcdDevice);
                     951     ;       
                     952     ; //    USB_Int_Enable();
                     953     ; 
                     954     ; // If slave is holding SDA low because of an improper SMBus reset or error
                     955     ;       
                     956     ; //    while (1)
                     957     ; 
                     958     ;       LedsSwitchOff();
                     959                             ; SOURCE LINE # 331
0008 120000   F      960             LCALL   LedsSwitchOff
                     961     ;       
                     962     ;       SEGMENT_A = 1;
                     963                             ; SOURCE LINE # 333
000B D296            964             SETB    SEGMENT_A
                     965     ;       LED1 = 0;
                     966                             ; SOURCE LINE # 334
000D C2A0            967             CLR     LED1
000F                 968     ?C0001:
                     969     ; 
                     970     ; //    while (1);
                     971     ;       while(!EEPROM_SDA)
                     972                             ; SOURCE LINE # 337
000F 20801B          973             JB      EEPROM_SDA,?C0002
                     974     ;       {
                     975                             ; SOURCE LINE # 338
                     976     ; 
                     977     ;   // Provide clock pulses to allow the slave to advance out
                     978     ;       // of its current state. This will allow it to release SDA.
                     979     ;               XBR1 = 0x40;                     // Enable Crossbar
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    16

                     980                             ; SOURCE LINE # 342
0012 75E240          981             MOV     XBR1,#040H
                     982     ;       EEPROM_SCL = 0;                  // Drive the clock low
                     983                             ; SOURCE LINE # 343
0015 C281            984             CLR     EEPROM_SCL
                     985     ;       for (i = 0; i < 255; i++) {  } // Hold the clock low
                     986                             ; SOURCE LINE # 344
                     987     ;---- Variable 'i?040' assigned to Register 'R7' ----
0017 E4              988             CLR     A
0018 FF              989             MOV     R7,A
0019                 990     ?C0003:
0019 0F              991             INC     R7
001A BFFFFC          992             CJNE    R7,#0FFH,?C0003
001D                 993     ?C0004:
                     994     ;       EEPROM_SCL = 1; ;//                 // Release the clock
                     995                             ; SOURCE LINE # 345
001D D281            996             SETB    EEPROM_SCL
001F                 997     ?C0006:
                     998     ;       while(!EEPROM_SCL);// { }//;              // Wait for open-drain
                     999                             ; SOURCE LINE # 346
001F 3081FD         1000             JNB     EEPROM_SCL,?C0006
0022                1001     ?C0007:
                    1002     ;                                                // clock output to rise
                    1003     ;       for(i = 0; i < 10; i++);         // Hold the clock high
                    1004                             ; SOURCE LINE # 348
0022 E4             1005             CLR     A
0023 FF             1006             MOV     R7,A
0024                1007     ?C0008:
0024 0F             1008             INC     R7
0025 BF0AFC         1009             CJNE    R7,#0AH,?C0008
0028                1010     ?C0009:
                    1011     ; 
                    1012     ;               XBR1 = 0x00;                     // Disable Crossbar
                    1013                             ; SOURCE LINE # 350
0028 E4             1014             CLR     A
0029 F5E2           1015             MOV     XBR1,A
                    1016     ;       }
                    1017                             ; SOURCE LINE # 351
002B 80E2           1018             SJMP    ?C0001
002D                1019     ?C0002:
                    1020     ;       SEGMENT_A = 0;
                    1021                             ; SOURCE LINE # 352
002D C296           1022             CLR     SEGMENT_A
                    1023     ;       LED1 = 1;
                    1024                             ; SOURCE LINE # 353
002F D2A0           1025             SETB    LED1
                    1026     ; 
                    1027     ;       EIE1 |= 0x01;                       // Enable the SMBus interrupt
                    1028                             ; SOURCE LINE # 355
0031 43E601         1029             ORL     EIE1,#01H
                    1030     ;       EA = 1;
                    1031                             ; SOURCE LINE # 356
0034 D2AF           1032             SETB    EA
                    1033     ;       ET0 = 1; // Timer0
                    1034                             ; SOURCE LINE # 357
0036 D2A9           1035             SETB    ET0
                    1036     ; 
                    1037     ;       LcdOutputLine(5);
                    1038                             ; SOURCE LINE # 359
0038 7F05           1039             MOV     R7,#05H
003A 120000   F     1040             LCALL   _LcdOutputLine
                    1041     ; 
                    1042     ;       ResetCounterToOutputBuffer();
                    1043                             ; SOURCE LINE # 361
003D 120000   F     1044             LCALL   ResetCounterToOutputBuffer
                    1045     ; 
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    17

                    1046     ; // Увиличение счетчика сброса <HARD_RESET>
                    1047     ;       if (OutputBuffer[0] < 0xFF) OutputBuffer[0]++;
                    1048                             ; SOURCE LINE # 364
0040 E500     F     1049             MOV     A,OutputBuffer
0042 C3             1050             CLR     C
0043 94FF           1051             SUBB    A,#0FFH
0045 5004           1052             JNC     ?C0011
0047 0500     F     1053             INC     OutputBuffer
0049 8028           1054             SJMP    ?C0012
004B                1055     ?C0011:
                    1056     ;       else 
                    1057     ;       { 
                    1058                             ; SOURCE LINE # 366
                    1059     ;               OutputBuffer[0] = 0; 
                    1060                             ; SOURCE LINE # 367
004B E4             1061             CLR     A
004C F500     F     1062             MOV     OutputBuffer,A
                    1063     ;               if (OutputBuffer[1] < 0xFF) OutputBuffer[1]++;
                    1064                             ; SOURCE LINE # 368
004E E500     F     1065             MOV     A,OutputBuffer+01H
0050 C3             1066             CLR     C
0051 94FF           1067             SUBB    A,#0FFH
0053 5004           1068             JNC     ?C0013
0055 0500     F     1069             INC     OutputBuffer+01H
0057 801A           1070             SJMP    ?C0012
0059                1071     ?C0013:
                    1072     ;               else
                    1073     ;               {
                    1074                             ; SOURCE LINE # 370
                    1075     ;                       OutputBuffer[1] = 0;
                    1076                             ; SOURCE LINE # 371
0059 E4             1077             CLR     A
005A F500     F     1078             MOV     OutputBuffer+01H,A
                    1079     ;                       if (OutputBuffer[2] < 0xFF) OutputBuffer[2]++;
                    1080                             ; SOURCE LINE # 372
005C E500     F     1081             MOV     A,OutputBuffer+02H
005E C3             1082             CLR     C
005F 94FF           1083             SUBB    A,#0FFH
0061 5004           1084             JNC     ?C0015
0063 0500     F     1085             INC     OutputBuffer+02H
0065 800C           1086             SJMP    ?C0012
0067                1087     ?C0015:
                    1088     ;                       else
                    1089     ;                       {
                    1090                             ; SOURCE LINE # 374
                    1091     ;                               OutputBuffer[2] = 0;
                    1092                             ; SOURCE LINE # 375
0067 E4             1093             CLR     A
0068 F500     F     1094             MOV     OutputBuffer+02H,A
                    1095     ;                               if (OutputBuffer[3] < 0xFF) OutputBuffer[3]++;
                    1096                             ; SOURCE LINE # 376
006A E500     F     1097             MOV     A,OutputBuffer+03H
006C C3             1098             CLR     C
006D 94FF           1099             SUBB    A,#0FFH
006F 5002           1100             JNC     ?C0012
0071 0500     F     1101             INC     OutputBuffer+03H
                    1102     ;                       }
                    1103                             ; SOURCE LINE # 377
                    1104     ;               }
                    1105                             ; SOURCE LINE # 378
                    1106     ;       }
                    1107                             ; SOURCE LINE # 379
0073                1108     ?C0012:
                    1109     ;       OutputBufferToResetCounter();
                    1110                             ; SOURCE LINE # 380
0073 120000   F     1111             LCALL   OutputBufferToResetCounter
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    18

                    1112     ; 
                    1113     ;       LcdOutputLine(5);
                    1114                             ; SOURCE LINE # 382
0076 7F05           1115             MOV     R7,#05H
0078 120000   F     1116             LCALL   _LcdOutputLine
                    1117     ; //    SoftReset(SOFT_RESET);
                    1118     ; 
                    1119     ;       Counter = 0;
                    1120                             ; SOURCE LINE # 385
007B E4             1121             CLR     A
007C F500     F     1122             MOV     Counter+03H,A
007E F500     F     1123             MOV     Counter+02H,A
0080 F500     F     1124             MOV     Counter+01H,A
0082 F500     F     1125             MOV     Counter,A
                    1126     ;       Counter = EEPROM_ByteRead(EEPROM_COUNTER_ADDR_HIGH);
                    1127                             ; SOURCE LINE # 386
0084 7F05           1128             MOV     R7,#05H
0086 FE             1129             MOV     R6,A
0087 120000   F     1130             LCALL   _EEPROM_ByteRead
008A E4             1131             CLR     A
008B 8F00     F     1132             MOV     Counter+03H,R7
008D F500     F     1133             MOV     Counter+02H,A
008F F500     F     1134             MOV     Counter+01H,A
0091 F500     F     1135             MOV     Counter,A
                    1136     ;       Counter = Counter<<8;
                    1137                             ; SOURCE LINE # 387
0093 AE00     F     1138             MOV     R6,Counter+02H
0095 AD00     F     1139             MOV     R5,Counter+01H
0097 AC00     F     1140             MOV     R4,Counter
0099 7808           1141             MOV     R0,#08H
009B 120000   F     1142             LCALL   ?C?LSHL
009E 8F00     F     1143             MOV     Counter+03H,R7
00A0 8E00     F     1144             MOV     Counter+02H,R6
00A2 8D00     F     1145             MOV     Counter+01H,R5
00A4 8C00     F     1146             MOV     Counter,R4
                    1147     ;       Counter |= EEPROM_ByteRead(EEPROM_COUNTER_ADDR_LOW);
                    1148                             ; SOURCE LINE # 388
00A6 7F04           1149             MOV     R7,#04H
00A8 7E00           1150             MOV     R6,#00H
00AA 120000   F     1151             LCALL   _EEPROM_ByteRead
00AD E500     F     1152             MOV     A,Counter+03H
00AF 4F             1153             ORL     A,R7
00B0 F500     F     1154             MOV     Counter+03H,A
00B2 E500     F     1155             MOV     A,Counter+02H
00B4 F500     F     1156             MOV     Counter+02H,A
00B6 E500     F     1157             MOV     A,Counter+01H
00B8 F500     F     1158             MOV     Counter+01H,A
00BA E500     F     1159             MOV     A,Counter
00BC F500     F     1160             MOV     Counter,A
                    1161     ;       
                    1162     ;       Discret = 0;
                    1163                             ; SOURCE LINE # 390
00BE E4             1164             CLR     A
00BF F500     F     1165             MOV     Discret+03H,A
00C1 F500     F     1166             MOV     Discret+02H,A
00C3 F500     F     1167             MOV     Discret+01H,A
00C5 F500     F     1168             MOV     Discret,A
                    1169     ;       Discret = EEPROM_ByteRead(EEPROM_DISCRET_ADDR_HIGH);
                    1170                             ; SOURCE LINE # 391
00C7 7F21           1171             MOV     R7,#021H
00C9 FE             1172             MOV     R6,A
00CA 120000   F     1173             LCALL   _EEPROM_ByteRead
00CD E4             1174             CLR     A
00CE 8F00     F     1175             MOV     Discret+03H,R7
00D0 F500     F     1176             MOV     Discret+02H,A
00D2 F500     F     1177             MOV     Discret+01H,A
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    19

00D4 F500     F     1178             MOV     Discret,A
                    1179     ;       Discret = Discret <<8;
                    1180                             ; SOURCE LINE # 392
00D6 AE00     F     1181             MOV     R6,Discret+02H
00D8 AD00     F     1182             MOV     R5,Discret+01H
00DA AC00     F     1183             MOV     R4,Discret
00DC 7808           1184             MOV     R0,#08H
00DE 120000   F     1185             LCALL   ?C?LSHL
00E1 8F00     F     1186             MOV     Discret+03H,R7
00E3 8E00     F     1187             MOV     Discret+02H,R6
00E5 8D00     F     1188             MOV     Discret+01H,R5
00E7 8C00     F     1189             MOV     Discret,R4
                    1190     ;       Discret |= EEPROM_ByteRead(EEPROM_DISCRET_ADDR_LOW);
                    1191                             ; SOURCE LINE # 393
00E9 7F20           1192             MOV     R7,#020H
00EB 7E00           1193             MOV     R6,#00H
00ED 120000   F     1194             LCALL   _EEPROM_ByteRead
00F0 E500     F     1195             MOV     A,Discret+03H
00F2 4F             1196             ORL     A,R7
00F3 F500     F     1197             MOV     Discret+03H,A
00F5 E500     F     1198             MOV     A,Discret+02H
00F7 F500     F     1199             MOV     Discret+02H,A
00F9 E500     F     1200             MOV     A,Discret+01H
00FB F500     F     1201             MOV     Discret+01H,A
00FD E500     F     1202             MOV     A,Discret
00FF F500     F     1203             MOV     Discret,A
                    1204     ; 
                    1205     ;       LcdMode = EEPROM_ByteRead(EEPROM_LCDMODE_ADDR);
                    1206                             ; SOURCE LINE # 395
0101 7F10           1207             MOV     R7,#010H
0103 7E00           1208             MOV     R6,#00H
0105 120000   F     1209             LCALL   _EEPROM_ByteRead
0108 8F00     F     1210             MOV     LcdMode,R7
                    1211     ; 
                    1212     ;       if (LcdMode >1) { LcdMode = 0; LcdOutputLine(1); EEPROM_ByteWrite(EEPROM_LCDMODE_AD
                             DR,LcdMode); }
                    1213                             ; SOURCE LINE # 397
010A E500     F     1214             MOV     A,LcdMode
010C D3             1215             SETB    C
010D 9401           1216             SUBB    A,#01H
010F 400B           1217             JC      ?C0019
0111 E4             1218             CLR     A
0112 F500     F     1219             MOV     LcdMode,A
0114 7F01           1220             MOV     R7,#01H
0116 120000   F     1221             LCALL   _LcdOutputLine
0119 120000   F     1222             LCALL   L?0167
011C                1223     ?C0019:
                    1224     ;       while (1) 
                    1225                             ; SOURCE LINE # 398
                    1226     ;       {
                    1227                             ; SOURCE LINE # 399
                    1228     ; //    if (Counter > 39000) Counter = 39000;
                    1229     ; //    EncoderScan5();
                    1230     ;       FlagPoint = 0;
                    1231                             ; SOURCE LINE # 402
011C C200     F     1232             CLR     FlagPoint
                    1233     ; 
                    1234     ;       switch (LcdMode)
                    1235                             ; SOURCE LINE # 404
011E E500     F     1236             MOV     A,LcdMode
0120 14             1237             DEC     A
0121 7003           1238             JNZ     $ + 5H
0123 020000   F     1239             LJMP    ?C0029
0126 04             1240             INC     A
0127 6003           1241             JZ      $ + 5H
0129 020000   F     1242             LJMP    ?C0021
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    20

                    1243     ;       {
                    1244                             ; SOURCE LINE # 405
                    1245     ;       case 0:
                    1246                             ; SOURCE LINE # 406
012C                1247     ?C0022:
                    1248     ;               {
                    1249                             ; SOURCE LINE # 407
                    1250     ;                       TempCounter = Counter & 0xFFFF;
                    1251                             ; SOURCE LINE # 408
012C E500     F     1252             MOV     A,Counter+03H
012E F500     F     1253             MOV     TempCounter+03H,A
0130 E500     F     1254             MOV     A,Counter+02H
0132 F500     F     1255             MOV     TempCounter+02H,A
0134 E4             1256             CLR     A
0135 F500     F     1257             MOV     TempCounter+01H,A
0137 F500     F     1258             MOV     TempCounter,A
                    1259     ;                       if (TempCounter > 999) 
                    1260                             ; SOURCE LINE # 409
0139 7FE7           1261             MOV     R7,#0E7H
013B 7E03           1262             MOV     R6,#03H
013D FD             1263             MOV     R5,A
013E FC             1264             MOV     R4,A
013F AB00     F     1265             MOV     R3,TempCounter+03H
0141 AA00     F     1266             MOV     R2,TempCounter+02H
0143 A900     F     1267             MOV     R1,TempCounter+01H
0145 A800     F     1268             MOV     R0,TempCounter
0147 D3             1269             SETB    C
0148 120000   F     1270             LCALL   ?C?ULCMP
014B E4             1271             CLR     A
014C 404A           1272             JC      ?C0023
                    1273     ;                       {
                    1274                             ; SOURCE LINE # 410
                    1275     ;                               temp = TempCounter / 1000;
                    1276                             ; SOURCE LINE # 411
014E 7BE8           1277             MOV     R3,#0E8H
0150 7A03           1278             MOV     R2,#03H
0152 F9             1279             MOV     R1,A
0153 F8             1280             MOV     R0,A
0154 AF00     F     1281             MOV     R7,TempCounter+03H
0156 AE00     F     1282             MOV     R6,TempCounter+02H
0158 AD00     F     1283             MOV     R5,TempCounter+01H
015A AC00     F     1284             MOV     R4,TempCounter
015C 120000   F     1285             LCALL   ?C?ULDIV
015F 8F00     F     1286             MOV     temp?042+03H,R7
0161 8E00     F     1287             MOV     temp?042+02H,R6
0163 8D00     F     1288             MOV     temp?042+01H,R5
0165 8C00     F     1289             MOV     temp?042,R4
                    1290     ;                               OutputBuffer[0] = temp;
                    1291                             ; SOURCE LINE # 412
0167 8F00     F     1292             MOV     OutputBuffer,R7
                    1293     ;                               TempCounter = TempCounter - temp*1000;
                    1294                             ; SOURCE LINE # 413
0169 E4             1295             CLR     A
016A 7FE8           1296             MOV     R7,#0E8H
016C 7E03           1297             MOV     R6,#03H
016E FD             1298             MOV     R5,A
016F FC             1299             MOV     R4,A
0170 AB00     F     1300             MOV     R3,temp?042+03H
0172 AA00     F     1301             MOV     R2,temp?042+02H
0174 A900     F     1302             MOV     R1,temp?042+01H
0176 A800     F     1303             MOV     R0,temp?042
0178 120000   F     1304             LCALL   ?C?LMUL
017B AA06           1305             MOV     R2,AR6
017D A905           1306             MOV     R1,AR5
017F A804           1307             MOV     R0,AR4
0181 C3             1308             CLR     C
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    21

0182 E500     F     1309             MOV     A,TempCounter+03H
0184 9F             1310             SUBB    A,R7
0185 F500     F     1311             MOV     TempCounter+03H,A
0187 E500     F     1312             MOV     A,TempCounter+02H
0189 9A             1313             SUBB    A,R2
018A F500     F     1314             MOV     TempCounter+02H,A
018C E500     F     1315             MOV     A,TempCounter+01H
018E 99             1316             SUBB    A,R1
018F F500     F     1317             MOV     TempCounter+01H,A
0191 E500     F     1318             MOV     A,TempCounter
0193 98             1319             SUBB    A,R0
0194 F500     F     1320             MOV     TempCounter,A
                    1321     ;                       } else OutputBuffer[0] = 0;
                    1322                             ; SOURCE LINE # 414
0196 8002           1323             SJMP    ?C0024
0198                1324     ?C0023:
0198 F500     F     1325             MOV     OutputBuffer,A
019A                1326     ?C0024:
                    1327     ; 
                    1328     ;                       if (TempCounter > 99) 
                    1329                             ; SOURCE LINE # 416
019A E4             1330             CLR     A
019B 7F63           1331             MOV     R7,#063H
019D FE             1332             MOV     R6,A
019E FD             1333             MOV     R5,A
019F FC             1334             MOV     R4,A
01A0 AB00     F     1335             MOV     R3,TempCounter+03H
01A2 AA00     F     1336             MOV     R2,TempCounter+02H
01A4 A900     F     1337             MOV     R1,TempCounter+01H
01A6 A800     F     1338             MOV     R0,TempCounter
01A8 D3             1339             SETB    C
01A9 120000   F     1340             LCALL   ?C?ULCMP
01AC E4             1341             CLR     A
01AD 4048           1342             JC      ?C0025
                    1343     ;                       {
                    1344                             ; SOURCE LINE # 417
                    1345     ;                               temp = TempCounter / 100;
                    1346                             ; SOURCE LINE # 418
01AF 7B64           1347             MOV     R3,#064H
01B1 FA             1348             MOV     R2,A
01B2 F9             1349             MOV     R1,A
01B3 F8             1350             MOV     R0,A
01B4 AF00     F     1351             MOV     R7,TempCounter+03H
01B6 AE00     F     1352             MOV     R6,TempCounter+02H
01B8 AD00     F     1353             MOV     R5,TempCounter+01H
01BA AC00     F     1354             MOV     R4,TempCounter
01BC 120000   F     1355             LCALL   ?C?ULDIV
01BF 8F00     F     1356             MOV     temp?042+03H,R7
01C1 8E00     F     1357             MOV     temp?042+02H,R6
01C3 8D00     F     1358             MOV     temp?042+01H,R5
01C5 8C00     F     1359             MOV     temp?042,R4
                    1360     ;                               OutputBuffer[1] = temp;
                    1361                             ; SOURCE LINE # 419
01C7 8F00     F     1362             MOV     OutputBuffer+01H,R7
                    1363     ;                               TempCounter = TempCounter - temp*100;
                    1364                             ; SOURCE LINE # 420
01C9 E4             1365             CLR     A
01CA 7F64           1366             MOV     R7,#064H
01CC FE             1367             MOV     R6,A
01CD FD             1368             MOV     R5,A
01CE FC             1369             MOV     R4,A
01CF AB00     F     1370             MOV     R3,temp?042+03H
01D1 AA00     F     1371             MOV     R2,temp?042+02H
01D3 A900     F     1372             MOV     R1,temp?042+01H
01D5 A800     F     1373             MOV     R0,temp?042
01D7 120000   F     1374             LCALL   ?C?LMUL
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    22

01DA AA06           1375             MOV     R2,AR6
01DC A905           1376             MOV     R1,AR5
01DE A804           1377             MOV     R0,AR4
01E0 C3             1378             CLR     C
01E1 E500     F     1379             MOV     A,TempCounter+03H
01E3 9F             1380             SUBB    A,R7
01E4 F500     F     1381             MOV     TempCounter+03H,A
01E6 E500     F     1382             MOV     A,TempCounter+02H
01E8 9A             1383             SUBB    A,R2
01E9 F500     F     1384             MOV     TempCounter+02H,A
01EB E500     F     1385             MOV     A,TempCounter+01H
01ED 99             1386             SUBB    A,R1
01EE F500     F     1387             MOV     TempCounter+01H,A
01F0 E500     F     1388             MOV     A,TempCounter
01F2 98             1389             SUBB    A,R0
01F3 F500     F     1390             MOV     TempCounter,A
                    1391     ;                       } else OutputBuffer[1] = 0;
                    1392                             ; SOURCE LINE # 421
01F5 8002           1393             SJMP    ?C0026
01F7                1394     ?C0025:
01F7 F500     F     1395             MOV     OutputBuffer+01H,A
01F9                1396     ?C0026:
                    1397     ; 
                    1398     ;                       if (TempCounter > 9) 
                    1399                             ; SOURCE LINE # 423
01F9 E4             1400             CLR     A
01FA 7F09           1401             MOV     R7,#09H
01FC FE             1402             MOV     R6,A
01FD FD             1403             MOV     R5,A
01FE FC             1404             MOV     R4,A
01FF AB00     F     1405             MOV     R3,TempCounter+03H
0201 AA00     F     1406             MOV     R2,TempCounter+02H
0203 A900     F     1407             MOV     R1,TempCounter+01H
0205 A800     F     1408             MOV     R0,TempCounter
0207 D3             1409             SETB    C
0208 120000   F     1410             LCALL   ?C?ULCMP
020B E4             1411             CLR     A
020C 4049           1412             JC      ?C0027
                    1413     ;                       {
                    1414                             ; SOURCE LINE # 424
                    1415     ;                               temp = TempCounter / 10;
                    1416                             ; SOURCE LINE # 425
020E 7B0A           1417             MOV     R3,#0AH
0210 FA             1418             MOV     R2,A
0211 F9             1419             MOV     R1,A
0212 F8             1420             MOV     R0,A
0213 AF00     F     1421             MOV     R7,TempCounter+03H
0215 AE00     F     1422             MOV     R6,TempCounter+02H
0217 AD00     F     1423             MOV     R5,TempCounter+01H
0219 AC00     F     1424             MOV     R4,TempCounter
021B 120000   F     1425             LCALL   ?C?ULDIV
021E 8F00     F     1426             MOV     temp?042+03H,R7
0220 8E00     F     1427             MOV     temp?042+02H,R6
0222 8D00     F     1428             MOV     temp?042+01H,R5
0224 8C00     F     1429             MOV     temp?042,R4
                    1430     ;                               OutputBuffer[2] = temp;
                    1431                             ; SOURCE LINE # 426
0226 8F00     F     1432             MOV     OutputBuffer+02H,R7
                    1433     ;                               TempCounter = TempCounter - temp*10;
                    1434                             ; SOURCE LINE # 427
0228 E4             1435             CLR     A
0229 7F0A           1436             MOV     R7,#0AH
022B FE             1437             MOV     R6,A
022C FD             1438             MOV     R5,A
022D FC             1439             MOV     R4,A
022E AB00     F     1440             MOV     R3,temp?042+03H
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    23

0230 AA00     F     1441             MOV     R2,temp?042+02H
0232 A900     F     1442             MOV     R1,temp?042+01H
0234 A800     F     1443             MOV     R0,temp?042
0236 120000   F     1444             LCALL   ?C?LMUL
0239 AA06           1445             MOV     R2,AR6
023B A905           1446             MOV     R1,AR5
023D A804           1447             MOV     R0,AR4
023F C3             1448             CLR     C
0240 E500     F     1449             MOV     A,TempCounter+03H
0242 9F             1450             SUBB    A,R7
0243 F500     F     1451             MOV     TempCounter+03H,A
0245 E500     F     1452             MOV     A,TempCounter+02H
0247 9A             1453             SUBB    A,R2
0248 F500     F     1454             MOV     TempCounter+02H,A
024A E500     F     1455             MOV     A,TempCounter+01H
024C 99             1456             SUBB    A,R1
024D F500     F     1457             MOV     TempCounter+01H,A
024F E500     F     1458             MOV     A,TempCounter
0251 98             1459             SUBB    A,R0
0252 F500     F     1460             MOV     TempCounter,A
                    1461     ;                       } else OutputBuffer[2] = 0;
                    1462                             ; SOURCE LINE # 428
0254 020000   F     1463             LJMP    ?C0163
0257                1464     ?C0027:
0257 F500     F     1465             MOV     OutputBuffer+02H,A
0259                1466     ?C0028:
                    1467     ;                       OutputBuffer[3] = TempCounter ;
                    1468                             ; SOURCE LINE # 429
                    1469     ;               } break;
                    1470                             ; SOURCE LINE # 430
0259 020000   F     1471             LJMP    ?C0163
                    1472     ;       case 1:
                    1473                             ; SOURCE LINE # 431
025C                1474     ?C0029:
                    1475     ;               {
                    1476                             ; SOURCE LINE # 432
                    1477     ;                       TempCounter = (Counter / Discret);
                    1478                             ; SOURCE LINE # 433
025C AB00     F     1479             MOV     R3,Discret+03H
025E AA00     F     1480             MOV     R2,Discret+02H
0260 A900     F     1481             MOV     R1,Discret+01H
0262 A800     F     1482             MOV     R0,Discret
0264 AF00     F     1483             MOV     R7,Counter+03H
0266 AE00     F     1484             MOV     R6,Counter+02H
0268 AD00     F     1485             MOV     R5,Counter+01H
026A AC00     F     1486             MOV     R4,Counter
026C 120000   F     1487             LCALL   ?C?ULDIV
026F 8F00     F     1488             MOV     TempCounter+03H,R7
0271 8E00     F     1489             MOV     TempCounter+02H,R6
0273 8D00     F     1490             MOV     TempCounter+01H,R5
0275 8C00     F     1491             MOV     TempCounter,R4
                    1492     ;                       if (TempCounter > 999) 
                    1493                             ; SOURCE LINE # 434
0277 E4             1494             CLR     A
0278 7FE7           1495             MOV     R7,#0E7H
027A 7E03           1496             MOV     R6,#03H
027C FD             1497             MOV     R5,A
027D FC             1498             MOV     R4,A
027E AB00     F     1499             MOV     R3,TempCounter+03H
0280 AA00     F     1500             MOV     R2,TempCounter+02H
0282 A900     F     1501             MOV     R1,TempCounter+01H
0284 A800     F     1502             MOV     R0,TempCounter
0286 D3             1503             SETB    C
0287 120000   F     1504             LCALL   ?C?ULCMP
028A E4             1505             CLR     A
028B 404A           1506             JC      ?C0030
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    24

                    1507     ;                       {
                    1508                             ; SOURCE LINE # 435
                    1509     ;                               temp = TempCounter / 1000;
                    1510                             ; SOURCE LINE # 436
028D 7BE8           1511             MOV     R3,#0E8H
028F 7A03           1512             MOV     R2,#03H
0291 F9             1513             MOV     R1,A
0292 F8             1514             MOV     R0,A
0293 AF00     F     1515             MOV     R7,TempCounter+03H
0295 AE00     F     1516             MOV     R6,TempCounter+02H
0297 AD00     F     1517             MOV     R5,TempCounter+01H
0299 AC00     F     1518             MOV     R4,TempCounter
029B 120000   F     1519             LCALL   ?C?ULDIV
029E 8F00     F     1520             MOV     temp?042+03H,R7
02A0 8E00     F     1521             MOV     temp?042+02H,R6
02A2 8D00     F     1522             MOV     temp?042+01H,R5
02A4 8C00     F     1523             MOV     temp?042,R4
                    1524     ;                               OutputBuffer[0] = temp;
                    1525                             ; SOURCE LINE # 437
02A6 8F00     F     1526             MOV     OutputBuffer,R7
                    1527     ;                               TempCounter = TempCounter - temp*1000;
                    1528                             ; SOURCE LINE # 438
02A8 E4             1529             CLR     A
02A9 7FE8           1530             MOV     R7,#0E8H
02AB 7E03           1531             MOV     R6,#03H
02AD FD             1532             MOV     R5,A
02AE FC             1533             MOV     R4,A
02AF AB00     F     1534             MOV     R3,temp?042+03H
02B1 AA00     F     1535             MOV     R2,temp?042+02H
02B3 A900     F     1536             MOV     R1,temp?042+01H
02B5 A800     F     1537             MOV     R0,temp?042
02B7 120000   F     1538             LCALL   ?C?LMUL
02BA AA06           1539             MOV     R2,AR6
02BC A905           1540             MOV     R1,AR5
02BE A804           1541             MOV     R0,AR4
02C0 C3             1542             CLR     C
02C1 E500     F     1543             MOV     A,TempCounter+03H
02C3 9F             1544             SUBB    A,R7
02C4 F500     F     1545             MOV     TempCounter+03H,A
02C6 E500     F     1546             MOV     A,TempCounter+02H
02C8 9A             1547             SUBB    A,R2
02C9 F500     F     1548             MOV     TempCounter+02H,A
02CB E500     F     1549             MOV     A,TempCounter+01H
02CD 99             1550             SUBB    A,R1
02CE F500     F     1551             MOV     TempCounter+01H,A
02D0 E500     F     1552             MOV     A,TempCounter
02D2 98             1553             SUBB    A,R0
02D3 F500     F     1554             MOV     TempCounter,A
                    1555     ;                       } else OutputBuffer[0] = 0;
                    1556                             ; SOURCE LINE # 439
02D5 8002           1557             SJMP    ?C0031
02D7                1558     ?C0030:
02D7 F500     F     1559             MOV     OutputBuffer,A
02D9                1560     ?C0031:
                    1561     ; 
                    1562     ;                       if (TempCounter > 99) 
                    1563                             ; SOURCE LINE # 441
02D9 E4             1564             CLR     A
02DA 7F63           1565             MOV     R7,#063H
02DC FE             1566             MOV     R6,A
02DD FD             1567             MOV     R5,A
02DE FC             1568             MOV     R4,A
02DF AB00     F     1569             MOV     R3,TempCounter+03H
02E1 AA00     F     1570             MOV     R2,TempCounter+02H
02E3 A900     F     1571             MOV     R1,TempCounter+01H
02E5 A800     F     1572             MOV     R0,TempCounter
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    25

02E7 D3             1573             SETB    C
02E8 120000   F     1574             LCALL   ?C?ULCMP
02EB E4             1575             CLR     A
02EC 4048           1576             JC      ?C0032
                    1577     ;                       {
                    1578                             ; SOURCE LINE # 442
                    1579     ;                               temp = TempCounter / 100;
                    1580                             ; SOURCE LINE # 443
02EE 7B64           1581             MOV     R3,#064H
02F0 FA             1582             MOV     R2,A
02F1 F9             1583             MOV     R1,A
02F2 F8             1584             MOV     R0,A
02F3 AF00     F     1585             MOV     R7,TempCounter+03H
02F5 AE00     F     1586             MOV     R6,TempCounter+02H
02F7 AD00     F     1587             MOV     R5,TempCounter+01H
02F9 AC00     F     1588             MOV     R4,TempCounter
02FB 120000   F     1589             LCALL   ?C?ULDIV
02FE 8F00     F     1590             MOV     temp?042+03H,R7
0300 8E00     F     1591             MOV     temp?042+02H,R6
0302 8D00     F     1592             MOV     temp?042+01H,R5
0304 8C00     F     1593             MOV     temp?042,R4
                    1594     ;                               OutputBuffer[1] = temp;
                    1595                             ; SOURCE LINE # 444
0306 8F00     F     1596             MOV     OutputBuffer+01H,R7
                    1597     ;                               TempCounter = TempCounter - temp*100;
                    1598                             ; SOURCE LINE # 445
0308 E4             1599             CLR     A
0309 7F64           1600             MOV     R7,#064H
030B FE             1601             MOV     R6,A
030C FD             1602             MOV     R5,A
030D FC             1603             MOV     R4,A
030E AB00     F     1604             MOV     R3,temp?042+03H
0310 AA00     F     1605             MOV     R2,temp?042+02H
0312 A900     F     1606             MOV     R1,temp?042+01H
0314 A800     F     1607             MOV     R0,temp?042
0316 120000   F     1608             LCALL   ?C?LMUL
0319 AA06           1609             MOV     R2,AR6
031B A905           1610             MOV     R1,AR5
031D A804           1611             MOV     R0,AR4
031F C3             1612             CLR     C
0320 E500     F     1613             MOV     A,TempCounter+03H
0322 9F             1614             SUBB    A,R7
0323 F500     F     1615             MOV     TempCounter+03H,A
0325 E500     F     1616             MOV     A,TempCounter+02H
0327 9A             1617             SUBB    A,R2
0328 F500     F     1618             MOV     TempCounter+02H,A
032A E500     F     1619             MOV     A,TempCounter+01H
032C 99             1620             SUBB    A,R1
032D F500     F     1621             MOV     TempCounter+01H,A
032F E500     F     1622             MOV     A,TempCounter
0331 98             1623             SUBB    A,R0
0332 F500     F     1624             MOV     TempCounter,A
                    1625     ;                       } else OutputBuffer[1] = 0;
                    1626                             ; SOURCE LINE # 446
0334 8002           1627             SJMP    ?C0033
0336                1628     ?C0032:
0336 F500     F     1629             MOV     OutputBuffer+01H,A
0338                1630     ?C0033:
                    1631     ;                       if (TempCounter > 9) 
                    1632                             ; SOURCE LINE # 447
0338 E4             1633             CLR     A
0339 7F09           1634             MOV     R7,#09H
033B FE             1635             MOV     R6,A
033C FD             1636             MOV     R5,A
033D FC             1637             MOV     R4,A
033E AB00     F     1638             MOV     R3,TempCounter+03H
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    26

0340 AA00     F     1639             MOV     R2,TempCounter+02H
0342 A900     F     1640             MOV     R1,TempCounter+01H
0344 A800     F     1641             MOV     R0,TempCounter
0346 D3             1642             SETB    C
0347 120000   F     1643             LCALL   ?C?ULCMP
034A E4             1644             CLR     A
034B 4048           1645             JC      ?C0034
                    1646     ;                       {
                    1647                             ; SOURCE LINE # 448
                    1648     ;                               temp = TempCounter / 10;
                    1649                             ; SOURCE LINE # 449
034D 7B0A           1650             MOV     R3,#0AH
034F FA             1651             MOV     R2,A
0350 F9             1652             MOV     R1,A
0351 F8             1653             MOV     R0,A
0352 AF00     F     1654             MOV     R7,TempCounter+03H
0354 AE00     F     1655             MOV     R6,TempCounter+02H
0356 AD00     F     1656             MOV     R5,TempCounter+01H
0358 AC00     F     1657             MOV     R4,TempCounter
035A 120000   F     1658             LCALL   ?C?ULDIV
035D 8F00     F     1659             MOV     temp?042+03H,R7
035F 8E00     F     1660             MOV     temp?042+02H,R6
0361 8D00     F     1661             MOV     temp?042+01H,R5
0363 8C00     F     1662             MOV     temp?042,R4
                    1663     ;                               OutputBuffer[2] = temp;
                    1664                             ; SOURCE LINE # 450
0365 8F00     F     1665             MOV     OutputBuffer+02H,R7
                    1666     ;                               TempCounter = TempCounter - temp*10;
                    1667                             ; SOURCE LINE # 451
0367 E4             1668             CLR     A
0368 7F0A           1669             MOV     R7,#0AH
036A FE             1670             MOV     R6,A
036B FD             1671             MOV     R5,A
036C FC             1672             MOV     R4,A
036D AB00     F     1673             MOV     R3,temp?042+03H
036F AA00     F     1674             MOV     R2,temp?042+02H
0371 A900     F     1675             MOV     R1,temp?042+01H
0373 A800     F     1676             MOV     R0,temp?042
0375 120000   F     1677             LCALL   ?C?LMUL
0378 AA06           1678             MOV     R2,AR6
037A A905           1679             MOV     R1,AR5
037C A804           1680             MOV     R0,AR4
037E C3             1681             CLR     C
037F E500     F     1682             MOV     A,TempCounter+03H
0381 9F             1683             SUBB    A,R7
0382 F500     F     1684             MOV     TempCounter+03H,A
0384 E500     F     1685             MOV     A,TempCounter+02H
0386 9A             1686             SUBB    A,R2
0387 F500     F     1687             MOV     TempCounter+02H,A
0389 E500     F     1688             MOV     A,TempCounter+01H
038B 99             1689             SUBB    A,R1
038C F500     F     1690             MOV     TempCounter+01H,A
038E E500     F     1691             MOV     A,TempCounter
0390 98             1692             SUBB    A,R0
0391 F500     F     1693             MOV     TempCounter,A
                    1694     ;                       } else OutputBuffer[2] = 0;
                    1695                             ; SOURCE LINE # 452
0393 8002           1696             SJMP    ?C0035
0395                1697     ?C0034:
0395 F500     F     1698             MOV     OutputBuffer+02H,A
0397                1699     ?C0035:
                    1700     ;                       OutputBuffer[3] = TempCounter ;
                    1701                             ; SOURCE LINE # 453
0397                1702     ?C0163:
0397 850000   F     1703             MOV     OutputBuffer+03H,TempCounter+03H
                    1704     ;               } break;
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    27

                    1705                             ; SOURCE LINE # 454
                    1706     ;       }
                    1707                             ; SOURCE LINE # 455
039A                1708     ?C0021:
                    1709     ; 
                    1710     ; 
                    1711     ;       if ((KEY_RESET == 0) & (LongKeyFlag == 0)) 
                    1712                             ; SOURCE LINE # 458
039A 200004   F     1713             JB      LongKeyFlag,?C0037
039D 7F01           1714             MOV     R7,#01H
039F 8002           1715             SJMP    ?C0038
03A1                1716     ?C0037:
03A1 7F00           1717             MOV     R7,#00H
03A3                1718     ?C0038:
03A3 20A204         1719             JB      KEY_RESET,?C0039
03A6 7E01           1720             MOV     R6,#01H
03A8 8002           1721             SJMP    ?C0040
03AA                1722     ?C0039:
03AA 7E00           1723             MOV     R6,#00H
03AC                1724     ?C0040:
03AC EE             1725             MOV     A,R6
03AD 5F             1726             ANL     A,R7
03AE 6018           1727             JZ      ?C0036
                    1728     ;       {
                    1729                             ; SOURCE LINE # 459
                    1730     ;               LongKeyFlagCounter++;
                    1731                             ; SOURCE LINE # 460
03B0 0500     F     1732             INC     LongKeyFlagCounter+01H
03B2 E500     F     1733             MOV     A,LongKeyFlagCounter+01H
03B4 7002           1734             JNZ     ?C0158
03B6 0500     F     1735             INC     LongKeyFlagCounter
03B8                1736     ?C0158:
                    1737     ;               if (LongKeyFlagCounter > 1000) 
                    1738                             ; SOURCE LINE # 461
03B8 D3             1739             SETB    C
03B9 94E8           1740             SUBB    A,#0E8H
03BB E500     F     1741             MOV     A,LongKeyFlagCounter
03BD 9403           1742             SUBB    A,#03H
03BF 4007           1743             JC      ?C0036
                    1744     ;               { 
                    1745                             ; SOURCE LINE # 462
                    1746     ;                       LongKeyFlag = 1;
                    1747                             ; SOURCE LINE # 463
03C1 D200     F     1748             SETB    LongKeyFlag
                    1749     ;                       LongKeyFlagCounter = 0;
                    1750                             ; SOURCE LINE # 464
03C3 E4             1751             CLR     A
03C4 F500     F     1752             MOV     LongKeyFlagCounter,A
03C6 F500     F     1753             MOV     LongKeyFlagCounter+01H,A
                    1754     ;               } 
                    1755                             ; SOURCE LINE # 465
                    1756     ;       }
                    1757                             ; SOURCE LINE # 466
03C8                1758     ?C0036:
                    1759     ; 
                    1760     ;       if (KEY_INCREMENT == 0) 
                    1761                             ; SOURCE LINE # 468
03C8 20A42F         1762             JB      KEY_INCREMENT,?C0042
                    1763     ;       {
                    1764                             ; SOURCE LINE # 469
                    1765     ;               if ((KeyFlag1 == 0) | (LongKeyFlag == 1))
                    1766                             ; SOURCE LINE # 470
03CB 300004   F     1767             JNB     LongKeyFlag,?C0044
03CE 7F01           1768             MOV     R7,#01H
03D0 8002           1769             SJMP    ?C0045
03D2                1770     ?C0044:
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    28

03D2 7F00           1771             MOV     R7,#00H
03D4                1772     ?C0045:
03D4 200004   F     1773             JB      KeyFlag1,?C0046
03D7 7E01           1774             MOV     R6,#01H
03D9 8002           1775             SJMP    ?C0047
03DB                1776     ?C0046:
03DB 7E00           1777             MOV     R6,#00H
03DD                1778     ?C0047:
03DD EE             1779             MOV     A,R6
03DE 4F             1780             ORL     A,R7
03DF 601D           1781             JZ      ?C0048
                    1782     ;               {
                    1783                             ; SOURCE LINE # 471
                    1784     ;                       Counter ++;
                    1785                             ; SOURCE LINE # 472
03E1 E500     F     1786             MOV     A,Counter+03H
03E3 2401           1787             ADD     A,#01H
03E5 F500     F     1788             MOV     Counter+03H,A
03E7 E4             1789             CLR     A
03E8 3500     F     1790             ADDC    A,Counter+02H
03EA F500     F     1791             MOV     Counter+02H,A
03EC E4             1792             CLR     A
03ED 3500     F     1793             ADDC    A,Counter+01H
03EF F500     F     1794             MOV     Counter+01H,A
03F1 E4             1795             CLR     A
03F2 3500     F     1796             ADDC    A,Counter
03F4 F500     F     1797             MOV     Counter,A
                    1798     ;                       KeyFlag1 = 1; 
                    1799                             ; SOURCE LINE # 473
03F6 D200     F     1800             SETB    KeyFlag1
                    1801     ;               }
                    1802                             ; SOURCE LINE # 474
                    1803     ;       } else { KeyFlag1 = 0; LongKeyFlag = 0; }
                    1804                             ; SOURCE LINE # 475
03F8 8004           1805             SJMP    ?C0048
03FA                1806     ?C0042:
03FA C200     F     1807             CLR     KeyFlag1
03FC C200     F     1808             CLR     LongKeyFlag
03FE                1809     ?C0048:
                    1810     ; 
                    1811     ;       if (KEY_RESET == 0) Counter = 0;
                    1812                             ; SOURCE LINE # 477
03FE 20A209         1813             JB      KEY_RESET,?C0049
0401 E4             1814             CLR     A
0402 F500     F     1815             MOV     Counter+03H,A
0404 F500     F     1816             MOV     Counter+02H,A
0406 F500     F     1817             MOV     Counter+01H,A
0408 F500     F     1818             MOV     Counter,A
040A                1819     ?C0049:
                    1820     ; 
                    1821     ;       if (KEY_MODE == 0)  // Смена режима вывода на дисплюй (ММ или Счётчик сигналов)
                    1822                             ; SOURCE LINE # 479
040A 20A31B         1823             JB      KEY_MODE,?C0050
                    1824     ;       {
                    1825                             ; SOURCE LINE # 480
                    1826     ;               if (KeyFlag3 == 0)
                    1827                             ; SOURCE LINE # 481
040D 20001A   F     1828             JB      KeyFlag3,?C0054
                    1829     ;               {
                    1830                             ; SOURCE LINE # 482
                    1831     ;                       if (LcdMode == 0) LcdMode = 1; else LcdMode = 0;
                    1832                             ; SOURCE LINE # 483
0410 E500     F     1833             MOV     A,LcdMode
0412 7005           1834             JNZ     ?C0052
0414 750001   F     1835             MOV     LcdMode,#01H
0417 8003           1836             SJMP    ?C0053
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    29

0419                1837     ?C0052:
0419 E4             1838             CLR     A
041A F500     F     1839             MOV     LcdMode,A
041C                1840     ?C0053:
                    1841     ;                       LcdOutputLine(2);
                    1842                             ; SOURCE LINE # 484
041C 7F02           1843             MOV     R7,#02H
041E 120000   F     1844             LCALL   _LcdOutputLine
                    1845     ;                       EEPROM_ByteWrite(EEPROM_LCDMODE_ADDR,LcdMode);
                    1846                             ; SOURCE LINE # 485
0421 120000   F     1847             LCALL   L?0167
                    1848     ;                       KeyFlag3 = 1;
                    1849                             ; SOURCE LINE # 486
0424 D200     F     1850             SETB    KeyFlag3
                    1851     ;               }
                    1852                             ; SOURCE LINE # 487
                    1853     ;       } else KeyFlag3 = 0;
                    1854                             ; SOURCE LINE # 488
0426 8002           1855             SJMP    ?C0054
0428                1856     ?C0050:
0428 C200     F     1857             CLR     KeyFlag3
042A                1858     ?C0054:
                    1859     ; 
                    1860     ;       if (KEY_STORE == 0) // запись в память EEPROM дискретизации (Счётчик/1 ММ)
                    1861                             ; SOURCE LINE # 490
042A 30A103         1862             JNB     KEY_STORE,$ + 6H
042D 020000   F     1863             LJMP    ?C0019
                    1864     ;       {
                    1865                             ; SOURCE LINE # 491
                    1866     ;               if (KeyFlag4 == 0)
                    1867                             ; SOURCE LINE # 492
0430 20001C   F     1868             JB      KeyFlag4,?C0056
                    1869     ;               {
                    1870                             ; SOURCE LINE # 493
                    1871     ;                       Discret = Counter;
                    1872                             ; SOURCE LINE # 494
0433 850000   F     1873             MOV     Discret+03H,Counter+03H
0436 850000   F     1874             MOV     Discret+02H,Counter+02H
0439 850000   F     1875             MOV     Discret+01H,Counter+01H
043C 850000   F     1876             MOV     Discret,Counter
                    1877     ;                       LcdOutputLine(4);
                    1878                             ; SOURCE LINE # 495
043F 7F04           1879             MOV     R7,#04H
0441 120000   F     1880             LCALL   _LcdOutputLine
                    1881     ;                       WriteDiscretToEEprom();
                    1882                             ; SOURCE LINE # 496
0444 120000   F     1883             LCALL   WriteDiscretToEEprom
                    1884     ;                       WriteCounterToEEprom();
                    1885                             ; SOURCE LINE # 497
0447 120000   F     1886             LCALL   WriteCounterToEEprom
                    1887     ;                       KeyFlag4 = 1;
                    1888                             ; SOURCE LINE # 498
044A D200     F     1889             SETB    KeyFlag4
                    1890     ;               } else KeyFlag4 = 0;
                    1891                             ; SOURCE LINE # 499
044C 020000   F     1892             LJMP    ?C0019
044F                1893     ?C0056:
044F C200     F     1894             CLR     KeyFlag4
                    1895     ;       }
                    1896                             ; SOURCE LINE # 500
                    1897     ; 
                    1898     ;       }
                    1899                             ; SOURCE LINE # 502
0451 020000   F     1900             LJMP    ?C0019
                    1901     ; END OF main
                    1902     
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    30

                    1903     ; }
                    1904     ; 
                    1905     ; void LcdOutputLine(unsigned char delay)
                    1906     
----                1907             RSEG  ?PR?_LcdOutputLine?MAIN
0000                1908     _LcdOutputLine:
                    1909             USING   0
                    1910                             ; SOURCE LINE # 505
0000 8F00     F     1911             MOV     delay?143,R7
                    1912     ; {
                    1913                             ; SOURCE LINE # 506
                    1914     ;       unsigned char i,y;
                    1915     ;       TCON &= ~0x10;
                    1916                             ; SOURCE LINE # 508
0002 5388EF         1917             ANL     TCON,#0EFH
                    1918     ;       ET0 = 0;
                    1919                             ; SOURCE LINE # 509
0005 C2A9           1920             CLR     ET0
                    1921     ;       
                    1922     ;       LedsSwitchOff();
                    1923                             ; SOURCE LINE # 511
0007 120000   F     1924             LCALL   LedsSwitchOff
                    1925     ;       SEGMENT_G = 1;
                    1926                             ; SOURCE LINE # 512
000A D292           1927             SETB    SEGMENT_G
                    1928     ;       
                    1929     ;       for (i=0;i<6;i++)
                    1930                             ; SOURCE LINE # 514
000C E4             1931             CLR     A
000D F500     F     1932             MOV     i?144,A
000F                1933     ?C0059:
                    1934     ;       {
                    1935                             ; SOURCE LINE # 515
                    1936     ;               for (y=0;y<delay*2;y++) { Del_500mks();Del_500mks();Del_500mks();Del_500mks
                             ();}
                    1937                             ; SOURCE LINE # 516
000F E4             1938             CLR     A
0010 F500     F     1939             MOV     y?145,A
0012                1940     ?C0062:
0012 E500     F     1941             MOV     A,delay?143
0014 75F002         1942             MOV     B,#02H
0017 A4             1943             MUL     AB
0018 FF             1944             MOV     R7,A
0019 C3             1945             CLR     C
001A E500     F     1946             MOV     A,y?145
001C 9F             1947             SUBB    A,R7
001D E5F0           1948             MOV     A,B
001F 6480           1949             XRL     A,#080H
0021 F8             1950             MOV     R0,A
0022 7480           1951             MOV     A,#080H
0024 98             1952             SUBB    A,R0
0025 5010           1953             JNC     ?C0063
0027 120000   F     1954             LCALL   Del_500mks
002A 120000   F     1955             LCALL   Del_500mks
002D 120000   F     1956             LCALL   Del_500mks
0030 120000   F     1957             LCALL   Del_500mks
0033 0500     F     1958             INC     y?145
0035 80DB           1959             SJMP    ?C0062
0037                1960     ?C0063:
                    1961     ;               switch (i)
                    1962                             ; SOURCE LINE # 517
0037 E500     F     1963             MOV     A,i?144
0039 14             1964             DEC     A
003A 600E           1965             JZ      ?C0067
003C 14             1966             DEC     A
003D 600F           1967             JZ      ?C0068
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    31

003F 14             1968             DEC     A
0040 6010           1969             JZ      ?C0069
0042 2403           1970             ADD     A,#03H
0044 700E           1971             JNZ     ?C0061
                    1972     ;               {
                    1973                             ; SOURCE LINE # 518
                    1974     ;                       case 0: LED1 = 0; break;
                    1975                             ; SOURCE LINE # 519
0046                1976     ?C0066:
0046 C2A0           1977             CLR     LED1
0048 800A           1978             SJMP    ?C0061
                    1979     ;                       case 1: LED2 = 0; break;
                    1980                             ; SOURCE LINE # 520
004A                1981     ?C0067:
004A C285           1982             CLR     LED2
004C 8006           1983             SJMP    ?C0061
                    1984     ;                       case 2: LED3 = 0; break;
                    1985                             ; SOURCE LINE # 521
004E                1986     ?C0068:
004E C287           1987             CLR     LED3
0050 8002           1988             SJMP    ?C0061
                    1989     ;                       case 3: LED4 = 0; break;
                    1990                             ; SOURCE LINE # 522
0052                1991     ?C0069:
0052 C286           1992             CLR     LED4
                    1993     ;               }       
                    1994                             ; SOURCE LINE # 523
                    1995     ;       }
                    1996                             ; SOURCE LINE # 524
0054                1997     ?C0061:
0054 0500     F     1998             INC     i?144
0056 E500     F     1999             MOV     A,i?144
0058 C3             2000             CLR     C
0059 9406           2001             SUBB    A,#06H
005B 40B2           2002             JC      ?C0059
005D                2003     ?C0060:
                    2004     ;       ET0 = 1;
                    2005                             ; SOURCE LINE # 525
005D D2A9           2006             SETB    ET0
                    2007     ;       TCON |= 0x10;
                    2008                             ; SOURCE LINE # 526
005F 438810         2009             ORL     TCON,#010H
                    2010     ; }
                    2011                             ; SOURCE LINE # 527
0062 22             2012             RET     
                    2013     ; END OF _LcdOutputLine
                    2014     
                    2015     ; 
                    2016     ; void WriteCounterToEEprom(void)
                    2017     
----                2018             RSEG  ?PR?WriteCounterToEEprom?MAIN
0000                2019     WriteCounterToEEprom:
                    2020             USING   0
                    2021                             ; SOURCE LINE # 529
                    2022     ; {
                    2023                             ; SOURCE LINE # 530
                    2024     ;       unsigned char temp_byte;
                    2025     ;       temp_byte = Counter;
                    2026                             ; SOURCE LINE # 532
                    2027     ;---- Variable 'temp_byte?246' assigned to Register 'R5' ----
0000 AD00     F     2028             MOV     R5,Counter+03H
                    2029     ;       EEPROM_ByteWrite(EEPROM_COUNTER_ADDR_LOW, temp_byte);
                    2030                             ; SOURCE LINE # 533
0002 7F04           2031             MOV     R7,#04H
0004 7E00           2032             MOV     R6,#00H
0006 120000   F     2033             LCALL   _EEPROM_ByteWrite
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    32

                    2034     ;       temp_byte = Counter>>8;
                    2035                             ; SOURCE LINE # 534
0009 AF00     F     2036             MOV     R7,Counter+03H
000B AE00     F     2037             MOV     R6,Counter+02H
000D AD00     F     2038             MOV     R5,Counter+01H
000F AC00     F     2039             MOV     R4,Counter
0011 7808           2040             MOV     R0,#08H
0013 120000   F     2041             LCALL   ?C?ULSHR
0016 AD07           2042             MOV     R5,AR7
                    2043     ;       EEPROM_ByteWrite(EEPROM_COUNTER_ADDR_HIGH,temp_byte);
                    2044                             ; SOURCE LINE # 535
0018 7F05           2045             MOV     R7,#05H
001A 7E00           2046             MOV     R6,#00H
001C 120000   F     2047             LCALL   _EEPROM_ByteWrite
                    2048     ; 
                    2049     ;       LedsSwitchOff();
                    2050                             ; SOURCE LINE # 537
001F 120000   F     2051             LCALL   LedsSwitchOff
                    2052     ;       LcdOutputLine(2);
                    2053                             ; SOURCE LINE # 538
0022 7F02           2054             MOV     R7,#02H
0024 020000   F     2055             LJMP    _LcdOutputLine
                    2056     ; END OF WriteCounterToEEprom
                    2057     
                    2058     ; }
                    2059     ; 
                    2060     ; void WriteDiscretToEEprom(void)
                    2061     
----                2062             RSEG  ?PR?WriteDiscretToEEprom?MAIN
0000                2063     WriteDiscretToEEprom:
                    2064             USING   0
                    2065                             ; SOURCE LINE # 541
                    2066     ; {
                    2067                             ; SOURCE LINE # 542
                    2068     ;       unsigned char temp_byte;
                    2069     ;       
                    2070     ;       if (Discret == 0) Discret = DEFAULT_DISCRET;
                    2071                             ; SOURCE LINE # 545
0000 E4             2072             CLR     A
0001 FF             2073             MOV     R7,A
0002 FE             2074             MOV     R6,A
0003 FD             2075             MOV     R5,A
0004 FC             2076             MOV     R4,A
0005 AB00     F     2077             MOV     R3,Discret+03H
0007 AA00     F     2078             MOV     R2,Discret+02H
0009 A900     F     2079             MOV     R1,Discret+01H
000B A800     F     2080             MOV     R0,Discret
000D C3             2081             CLR     C
000E 120000   F     2082             LCALL   ?C?ULCMP
0011 7009           2083             JNZ     ?C0072
0013 750064   F     2084             MOV     Discret+03H,#064H
0016 F500     F     2085             MOV     Discret+02H,A
0018 F500     F     2086             MOV     Discret+01H,A
001A F500     F     2087             MOV     Discret,A
001C                2088     ?C0072:
                    2089     ;       temp_byte = Discret;
                    2090                             ; SOURCE LINE # 546
                    2091     ;---- Variable 'temp_byte?347' assigned to Register 'R5' ----
001C AD00     F     2092             MOV     R5,Discret+03H
                    2093     ;       EEPROM_ByteWrite(EEPROM_DISCRET_ADDR_LOW, temp_byte);
                    2094                             ; SOURCE LINE # 547
001E 7F20           2095             MOV     R7,#020H
0020 7E00           2096             MOV     R6,#00H
0022 120000   F     2097             LCALL   _EEPROM_ByteWrite
                    2098     ;       temp_byte = Discret>>8;
                    2099                             ; SOURCE LINE # 548
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    33

0025 AF00     F     2100             MOV     R7,Discret+03H
0027 AE00     F     2101             MOV     R6,Discret+02H
0029 AD00     F     2102             MOV     R5,Discret+01H
002B AC00     F     2103             MOV     R4,Discret
002D 7808           2104             MOV     R0,#08H
002F 120000   F     2105             LCALL   ?C?ULSHR
0032 AD07           2106             MOV     R5,AR7
                    2107     ;       EEPROM_ByteWrite(EEPROM_DISCRET_ADDR_HIGH,temp_byte);
                    2108                             ; SOURCE LINE # 549
0034 7F21           2109             MOV     R7,#021H
0036 7E00           2110             MOV     R6,#00H
0038 120000   F     2111             LCALL   _EEPROM_ByteWrite
                    2112     ; 
                    2113     ;       LedsSwitchOff();
                    2114                             ; SOURCE LINE # 551
003B 120000   F     2115             LCALL   LedsSwitchOff
                    2116     ;       LcdOutputLine(2);
                    2117                             ; SOURCE LINE # 552
003E 7F02           2118             MOV     R7,#02H
0040 020000   F     2119             LJMP    _LcdOutputLine
                    2120     ; END OF WriteDiscretToEEprom
                    2121     
                    2122     ; }
                    2123     ; 
                    2124     ; void ResetCounterToOutputBuffer(void)
                    2125     
----                2126             RSEG  ?PR?ResetCounterToOutputBuffer?MAIN
0000                2127     ResetCounterToOutputBuffer:
                    2128             USING   0
                    2129                             ; SOURCE LINE # 555
                    2130     ; {
                    2131                             ; SOURCE LINE # 556
                    2132     ;       OutputBuffer[0] = EEPROM_ByteRead(EEPROM_RESET_COUNTER_ADDR);
                    2133                             ; SOURCE LINE # 557
0000 7F03           2134             MOV     R7,#03H
0002 7E00           2135             MOV     R6,#00H
0004 120000   F     2136             LCALL   _EEPROM_ByteRead
0007 8F00     F     2137             MOV     OutputBuffer,R7
                    2138     ;       OutputBuffer[1] = EEPROM_ByteRead(EEPROM_RESET_COUNTER_ADDR+1);
                    2139                             ; SOURCE LINE # 558
0009 7F04           2140             MOV     R7,#04H
000B 7E00           2141             MOV     R6,#00H
000D 120000   F     2142             LCALL   _EEPROM_ByteRead
0010 8F00     F     2143             MOV     OutputBuffer+01H,R7
                    2144     ;       OutputBuffer[2] = EEPROM_ByteRead(EEPROM_RESET_COUNTER_ADDR+2);
                    2145                             ; SOURCE LINE # 559
0012 7F05           2146             MOV     R7,#05H
0014 7E00           2147             MOV     R6,#00H
0016 120000   F     2148             LCALL   _EEPROM_ByteRead
0019 8F00     F     2149             MOV     OutputBuffer+02H,R7
                    2150     ;       OutputBuffer[3] = EEPROM_ByteRead(EEPROM_RESET_COUNTER_ADDR+3);
                    2151                             ; SOURCE LINE # 560
001B 7F06           2152             MOV     R7,#06H
001D 7E00           2153             MOV     R6,#00H
001F 120000   F     2154             LCALL   _EEPROM_ByteRead
0022 8F00     F     2155             MOV     OutputBuffer+03H,R7
                    2156     ; }
                    2157                             ; SOURCE LINE # 561
0024 22             2158             RET     
                    2159     ; END OF ResetCounterToOutputBuffer
                    2160     
                    2161     ; 
                    2162     ; void OutputBufferToResetCounter(void)
                    2163     
----                2164             RSEG  ?PR?OutputBufferToResetCounter?MAIN
0000                2165     OutputBufferToResetCounter:
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    34

                    2166             USING   0
                    2167                             ; SOURCE LINE # 563
                    2168     ; {
                    2169                             ; SOURCE LINE # 564
                    2170     ;               EEPROM_ByteWrite(EEPROM_RESET_COUNTER_ADDR, OutputBuffer[0]);
                    2171                             ; SOURCE LINE # 565
0000 AD00     F     2172             MOV     R5,OutputBuffer
0002 7F03           2173             MOV     R7,#03H
0004 7E00           2174             MOV     R6,#00H
0006 120000   F     2175             LCALL   _EEPROM_ByteWrite
                    2176     ;               EEPROM_ByteWrite(EEPROM_RESET_COUNTER_ADDR+1, OutputBuffer[1]);
                    2177                             ; SOURCE LINE # 566
0009 AD00     F     2178             MOV     R5,OutputBuffer+01H
000B 7F04           2179             MOV     R7,#04H
000D 7E00           2180             MOV     R6,#00H
000F 120000   F     2181             LCALL   _EEPROM_ByteWrite
                    2182     ;               EEPROM_ByteWrite(EEPROM_RESET_COUNTER_ADDR+2, OutputBuffer[2]);
                    2183                             ; SOURCE LINE # 567
0012 AD00     F     2184             MOV     R5,OutputBuffer+02H
0014 7F05           2185             MOV     R7,#05H
0016 7E00           2186             MOV     R6,#00H
0018 120000   F     2187             LCALL   _EEPROM_ByteWrite
                    2188     ;               EEPROM_ByteWrite(EEPROM_RESET_COUNTER_ADDR+3, OutputBuffer[3]);
                    2189                             ; SOURCE LINE # 568
001B AD00     F     2190             MOV     R5,OutputBuffer+03H
001D 7F06           2191             MOV     R7,#06H
001F 7E00           2192             MOV     R6,#00H
0021 020000   F     2193             LJMP    _EEPROM_ByteWrite
                    2194     ; END OF OutputBufferToResetCounter
                    2195     
                    2196     ; }
                    2197     ; 
                    2198     ; void OutSymbol(unsigned char LedNumber, unsigned char SymbolCode)
                    2199     
----                2200             RSEG  ?PR?_OutSymbol?MAIN
0000                2201     _OutSymbol:
                    2202             USING   0
                    2203                             ; SOURCE LINE # 571
0000 8F00     F     2204             MOV     LedNumber?648,R7
0002 8D00     F     2205             MOV     SymbolCode?649,R5
                    2206     ; {
                    2207                             ; SOURCE LINE # 572
                    2208     ;       LedsSwitchOff();
                    2209                             ; SOURCE LINE # 573
0004 120000   F     2210             LCALL   LedsSwitchOff
                    2211     ; 
                    2212     ;       switch (SymbolCode)
                    2213                             ; SOURCE LINE # 575
0007 E500     F     2214             MOV     A,SymbolCode?649
0009 24D3           2215             ADD     A,#0D3H
000B B40D00         2216             CJNE    A,#0DH,?C0159
000E                2217     ?C0159:
000E 4003           2218             JC      $ + 5H
0010 020000   F     2219             LJMP    ?C0076
0013 900000   F     2220             MOV     DPTR,#?C0160
0016 75F003         2221             MOV     B,#03H
0019 A4             2222             MUL     AB
001A C583           2223             XCH     A,DPH
001C 25F0           2224             ADD     A,B
001E C583           2225             XCH     A,DPH
0020 73             2226             JMP     @A+DPTR
0021                2227     ?C0160:
0021 020000   F     2228             LJMP    ?C0077
0024 020000   F     2229             LJMP    ?C0076
0027 020000   F     2230             LJMP    ?C0076
002A 020000   F     2231             LJMP    ?C0078
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    35

002D 020000   F     2232             LJMP    ?C0079
0030 020000   F     2233             LJMP    ?C0080
0033 020000   F     2234             LJMP    ?C0081
0036 020000   F     2235             LJMP    ?C0082
0039 020000   F     2236             LJMP    ?C0083
003C 020000   F     2237             LJMP    ?C0084
003F 020000   F     2238             LJMP    ?C0085
0042 020000   F     2239             LJMP    ?C0086
0045 020000   F     2240             LJMP    ?C0087
                    2241     ;       {
                    2242                             ; SOURCE LINE # 576
                    2243     ;               case 0x2D:
                    2244                             ; SOURCE LINE # 577
0048                2245     ?C0077:
                    2246     ;               {
                    2247                             ; SOURCE LINE # 578
                    2248     ;                       SEGMENT_G = 1;
                    2249                             ; SOURCE LINE # 579
0048 D292           2250             SETB    SEGMENT_G
                    2251     ;               } break;
                    2252                             ; SOURCE LINE # 580
004A 8068           2253             SJMP    ?C0076
                    2254     ;               case 0x30:
                    2255                             ; SOURCE LINE # 581
004C                2256     ?C0078:
                    2257     ;               {
                    2258                             ; SOURCE LINE # 582
                    2259     ;                       SEGMENT_A = 1;
                    2260                             ; SOURCE LINE # 583
004C D296           2261             SETB    SEGMENT_A
                    2262     ;                       SEGMENT_B = 1;
                    2263                             ; SOURCE LINE # 584
004E D295           2264             SETB    SEGMENT_B
                    2265     ;                       SEGMENT_C = 1;
                    2266                             ; SOURCE LINE # 585
0050 D291           2267             SETB    SEGMENT_C
                    2268     ;                       SEGMENT_D = 1;
                    2269                             ; SOURCE LINE # 586
0052 D293           2270             SETB    SEGMENT_D
                    2271     ;                       SEGMENT_E = 1;
                    2272                             ; SOURCE LINE # 587
0054 D294           2273             SETB    SEGMENT_E
                    2274     ;                       SEGMENT_F = 1;
                    2275                             ; SOURCE LINE # 588
0056 D297           2276             SETB    SEGMENT_F
                    2277     ;               } break;
                    2278                             ; SOURCE LINE # 589
0058 805A           2279             SJMP    ?C0076
                    2280     ;               case 0x31:
                    2281                             ; SOURCE LINE # 590
005A                2282     ?C0079:
                    2283     ;               {
                    2284                             ; SOURCE LINE # 591
                    2285     ;                       SEGMENT_B = 1;
                    2286                             ; SOURCE LINE # 592
                    2287     ;                       SEGMENT_C = 1;
                    2288                             ; SOURCE LINE # 593
                    2289     ;               } break;
                    2290                             ; SOURCE LINE # 594
005A 803A           2291             SJMP    ?C0164
                    2292     ;               case 0x32:
                    2293                             ; SOURCE LINE # 595
005C                2294     ?C0080:
                    2295     ;               {
                    2296                             ; SOURCE LINE # 596
                    2297     ;                       SEGMENT_A = 1;
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    36

                    2298                             ; SOURCE LINE # 597
005C D296           2299             SETB    SEGMENT_A
                    2300     ;                       SEGMENT_B = 1;
                    2301                             ; SOURCE LINE # 598
005E D295           2302             SETB    SEGMENT_B
                    2303     ;                       SEGMENT_G = 1;
                    2304                             ; SOURCE LINE # 599
0060 D292           2305             SETB    SEGMENT_G
                    2306     ;                       SEGMENT_E = 1;
                    2307                             ; SOURCE LINE # 600
0062 D294           2308             SETB    SEGMENT_E
                    2309     ;                       SEGMENT_D = 1;
                    2310                             ; SOURCE LINE # 601
0064 D293           2311             SETB    SEGMENT_D
                    2312     ;               } break;
                    2313                             ; SOURCE LINE # 602
0066 804C           2314             SJMP    ?C0076
                    2315     ;               case 0x33:
                    2316                             ; SOURCE LINE # 603
0068                2317     ?C0081:
                    2318     ;               {
                    2319                             ; SOURCE LINE # 604
                    2320     ;                       SEGMENT_A = 1;
                    2321                             ; SOURCE LINE # 605
0068 D296           2322             SETB    SEGMENT_A
                    2323     ;                       SEGMENT_B = 1;
                    2324                             ; SOURCE LINE # 606
006A D295           2325             SETB    SEGMENT_B
                    2326     ;                       SEGMENT_C = 1;
                    2327                             ; SOURCE LINE # 607
006C D291           2328             SETB    SEGMENT_C
                    2329     ;                       SEGMENT_D = 1;
                    2330                             ; SOURCE LINE # 608
006E D293           2331             SETB    SEGMENT_D
                    2332     ;                       SEGMENT_G = 1;
                    2333                             ; SOURCE LINE # 609
0070 D292           2334             SETB    SEGMENT_G
                    2335     ;               } break;
                    2336                             ; SOURCE LINE # 610
0072 8040           2337             SJMP    ?C0076
                    2338     ;               case 0x34:
                    2339                             ; SOURCE LINE # 611
0074                2340     ?C0082:
                    2341     ;               {
                    2342                             ; SOURCE LINE # 612
                    2343     ;                       SEGMENT_B = 1;
                    2344                             ; SOURCE LINE # 613
0074 D295           2345             SETB    SEGMENT_B
                    2346     ;                       SEGMENT_C = 1;
                    2347                             ; SOURCE LINE # 614
0076 D291           2348             SETB    SEGMENT_C
                    2349     ;                       SEGMENT_F = 1;
                    2350                             ; SOURCE LINE # 615
                    2351     ;                       SEGMENT_G = 1;
                    2352                             ; SOURCE LINE # 616
                    2353     ;               } break;
                    2354                             ; SOURCE LINE # 617
0078 8036           2355             SJMP    ?C0166
                    2356     ;               case 0x35:
                    2357                             ; SOURCE LINE # 618
007A                2358     ?C0083:
                    2359     ;               {
                    2360                             ; SOURCE LINE # 619
                    2361     ;                       SEGMENT_A = 1;
                    2362                             ; SOURCE LINE # 620
007A D296           2363             SETB    SEGMENT_A
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    37

                    2364     ;                       SEGMENT_F = 1;
                    2365                             ; SOURCE LINE # 621
007C D297           2366             SETB    SEGMENT_F
                    2367     ;                       SEGMENT_G = 1;
                    2368                             ; SOURCE LINE # 622
007E D292           2369             SETB    SEGMENT_G
                    2370     ;                       SEGMENT_C = 1;
                    2371                             ; SOURCE LINE # 623
0080 D291           2372             SETB    SEGMENT_C
                    2373     ;                       SEGMENT_D = 1;
                    2374                             ; SOURCE LINE # 624
0082 D293           2375             SETB    SEGMENT_D
                    2376     ;               } break;
                    2377                             ; SOURCE LINE # 625
0084 802E           2378             SJMP    ?C0076
                    2379     ;               case 0x36:
                    2380                             ; SOURCE LINE # 626
0086                2381     ?C0084:
                    2382     ;               {
                    2383                             ; SOURCE LINE # 627
                    2384     ;                       SEGMENT_A = 1;
                    2385                             ; SOURCE LINE # 628
0086 D296           2386             SETB    SEGMENT_A
                    2387     ;                       SEGMENT_F = 1;
                    2388                             ; SOURCE LINE # 629
0088 D297           2389             SETB    SEGMENT_F
                    2390     ;                       SEGMENT_G = 1;
                    2391                             ; SOURCE LINE # 630
008A D292           2392             SETB    SEGMENT_G
                    2393     ;                       SEGMENT_E = 1;
                    2394                             ; SOURCE LINE # 631
008C D294           2395             SETB    SEGMENT_E
                    2396     ;                       SEGMENT_D = 1;
                    2397                             ; SOURCE LINE # 632
008E D293           2398             SETB    SEGMENT_D
                    2399     ;                       SEGMENT_C = 1;
                    2400                             ; SOURCE LINE # 633
0090 D291           2401             SETB    SEGMENT_C
                    2402     ;               } break;
                    2403                             ; SOURCE LINE # 634
0092 8020           2404             SJMP    ?C0076
                    2405     ;               case 0x37:
                    2406                             ; SOURCE LINE # 635
0094                2407     ?C0085:
                    2408     ;               {
                    2409                             ; SOURCE LINE # 636
                    2410     ;                       SEGMENT_A = 1;
                    2411                             ; SOURCE LINE # 637
0094 D296           2412             SETB    SEGMENT_A
                    2413     ;                       SEGMENT_B = 1;
                    2414                             ; SOURCE LINE # 638
0096                2415     ?C0164:
0096 D295           2416             SETB    SEGMENT_B
                    2417     ;                       SEGMENT_C = 1;
                    2418                             ; SOURCE LINE # 639
0098 D291           2419             SETB    SEGMENT_C
                    2420     ;               } break;
                    2421                             ; SOURCE LINE # 640
009A 8018           2422             SJMP    ?C0076
                    2423     ;               case 0x38:
                    2424                             ; SOURCE LINE # 641
009C                2425     ?C0086:
                    2426     ;               {
                    2427                             ; SOURCE LINE # 642
                    2428     ;                       SEGMENT_A = 1;
                    2429                             ; SOURCE LINE # 643
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    38

009C D296           2430             SETB    SEGMENT_A
                    2431     ;                       SEGMENT_B = 1;
                    2432                             ; SOURCE LINE # 644
009E D295           2433             SETB    SEGMENT_B
                    2434     ;                       SEGMENT_C = 1;
                    2435                             ; SOURCE LINE # 645
00A0 D291           2436             SETB    SEGMENT_C
                    2437     ;                       SEGMENT_D = 1;
                    2438                             ; SOURCE LINE # 646
00A2 D293           2439             SETB    SEGMENT_D
                    2440     ;                       SEGMENT_E = 1;
                    2441                             ; SOURCE LINE # 647
00A4 D294           2442             SETB    SEGMENT_E
                    2443     ;                       SEGMENT_F = 1;
                    2444                             ; SOURCE LINE # 648
00A6                2445     ?C0165:
                    2446     ;                       SEGMENT_G = 1;
                    2447                             ; SOURCE LINE # 649
                    2448     ;               } break;
                    2449                             ; SOURCE LINE # 650
00A6 8008           2450             SJMP    ?C0166
                    2451     ;               case 0x39:
                    2452                             ; SOURCE LINE # 651
00A8                2453     ?C0087:
                    2454     ;               {
                    2455                             ; SOURCE LINE # 652
                    2456     ;                       SEGMENT_A = 1;
                    2457                             ; SOURCE LINE # 653
00A8 D296           2458             SETB    SEGMENT_A
                    2459     ;                       SEGMENT_B = 1;
                    2460                             ; SOURCE LINE # 654
00AA D295           2461             SETB    SEGMENT_B
                    2462     ;                       SEGMENT_C = 1;
                    2463                             ; SOURCE LINE # 655
00AC D291           2464             SETB    SEGMENT_C
                    2465     ;                       SEGMENT_D = 1;
                    2466                             ; SOURCE LINE # 656
00AE D293           2467             SETB    SEGMENT_D
                    2468     ;                       SEGMENT_F = 1;
                    2469                             ; SOURCE LINE # 657
00B0                2470     ?C0166:
00B0 D297           2471             SETB    SEGMENT_F
                    2472     ;                       SEGMENT_G = 1;
                    2473                             ; SOURCE LINE # 658
00B2 D292           2474             SETB    SEGMENT_G
                    2475     ;               } break;
                    2476                             ; SOURCE LINE # 659
                    2477     ;       }
                    2478                             ; SOURCE LINE # 660
00B4                2479     ?C0076:
                    2480     ; 
                    2481     ;       if (FlagPoint == 1) SEGMENT_POINT = 1;
                    2482                             ; SOURCE LINE # 662
00B4 300002   F     2483             JNB     FlagPoint,?C0088
00B7 D290           2484             SETB    SEGMENT_POINT
00B9                2485     ?C0088:
                    2486     ;       switch (LedNumber)
                    2487                             ; SOURCE LINE # 663
00B9 E500     F     2488             MOV     A,LedNumber?648
00BB 24FE           2489             ADD     A,#0FEH
00BD 600D           2490             JZ      ?C0091
00BF 14             2491             DEC     A
00C0 600D           2492             JZ      ?C0092
00C2 14             2493             DEC     A
00C3 600D           2494             JZ      ?C0093
00C5 2403           2495             ADD     A,#03H
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    39

00C7 700B           2496             JNZ     ?C0094
                    2497     ;       {
                    2498                             ; SOURCE LINE # 664
                    2499     ;               case 1: LED1 = 0; break;
                    2500                             ; SOURCE LINE # 665
00C9                2501     ?C0090:
00C9 C2A0           2502             CLR     LED1
00CB 22             2503             RET     
                    2504     ;               case 2: LED2 = 0; break;
                    2505                             ; SOURCE LINE # 666
00CC                2506     ?C0091:
00CC C285           2507             CLR     LED2
00CE 22             2508             RET     
                    2509     ;               case 3: LED3 = 0; break;
                    2510                             ; SOURCE LINE # 667
00CF                2511     ?C0092:
00CF C287           2512             CLR     LED3
00D1 22             2513             RET     
                    2514     ;               case 4: LED4 = 0; break;
                    2515                             ; SOURCE LINE # 668
00D2                2516     ?C0093:
00D2 C286           2517             CLR     LED4
                    2518     ;       }       
                    2519                             ; SOURCE LINE # 669
                    2520     ; }
                    2521                             ; SOURCE LINE # 670
00D4                2522     ?C0094:
00D4 22             2523             RET     
                    2524     ; END OF _OutSymbol
                    2525     
                    2526     ; 
                    2527     ; void LedsSwitchOff(void)
                    2528     
----                2529             RSEG  ?PR?LedsSwitchOff?MAIN
0000                2530     LedsSwitchOff:
                    2531                             ; SOURCE LINE # 672
                    2532     ; {
                    2533                             ; SOURCE LINE # 673
                    2534     ;       LED1 = 1;
                    2535                             ; SOURCE LINE # 674
0000 D2A0           2536             SETB    LED1
                    2537     ;       LED2 = 1;
                    2538                             ; SOURCE LINE # 675
0002 D285           2539             SETB    LED2
                    2540     ;       LED3 = 1;
                    2541                             ; SOURCE LINE # 676
0004 D287           2542             SETB    LED3
                    2543     ;       LED4 = 1;
                    2544                             ; SOURCE LINE # 677
0006 D286           2545             SETB    LED4
                    2546     ; 
                    2547     ;       SEGMENT_A = 0;
                    2548                             ; SOURCE LINE # 679
0008 C296           2549             CLR     SEGMENT_A
                    2550     ;       SEGMENT_B = 0;
                    2551                             ; SOURCE LINE # 680
000A C295           2552             CLR     SEGMENT_B
                    2553     ;       SEGMENT_C = 0;
                    2554                             ; SOURCE LINE # 681
000C C291           2555             CLR     SEGMENT_C
                    2556     ;       SEGMENT_D = 0;
                    2557                             ; SOURCE LINE # 682
000E C293           2558             CLR     SEGMENT_D
                    2559     ;       SEGMENT_E = 0;
                    2560                             ; SOURCE LINE # 683
0010 C294           2561             CLR     SEGMENT_E
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    40

                    2562     ;       SEGMENT_F = 0;
                    2563                             ; SOURCE LINE # 684
0012 C297           2564             CLR     SEGMENT_F
                    2565     ;       SEGMENT_G = 0;
                    2566                             ; SOURCE LINE # 685
0014 C292           2567             CLR     SEGMENT_G
                    2568     ;       SEGMENT_POINT = 0;
                    2569                             ; SOURCE LINE # 686
0016 C290           2570             CLR     SEGMENT_POINT
                    2571     ; }
                    2572                             ; SOURCE LINE # 687
0018 22             2573             RET     
                    2574     ; END OF LedsSwitchOff
                    2575     
                    2576     ; 
                    2577     ; //-------------------------
                    2578     ; // Initialize
                    2579     ; //-------------------------
                    2580     ; // Called when a DEV_CONFIGURED interrupt is received.
                    2581     ; // - Enables all peripherals needed for the application
                    2582     ; //
                    2583     ; void Initialize(void)
                    2584     
----                2585             RSEG  ?PR?Initialize?MAIN
0000                2586     Initialize:
                    2587             USING   0
                    2588                             ; SOURCE LINE # 695
                    2589     ; {
                    2590                             ; SOURCE LINE # 696
                    2591     ;       Port_Init();                           // Initialize crossbar and GPIO
                    2592                             ; SOURCE LINE # 697
0000 120000   F     2593             LCALL   Port_Init
                    2594     ;       OSCILLATOR_Init ();
                    2595                             ; SOURCE LINE # 698
0003 120000   F     2596             LCALL   OSCILLATOR_Init
                    2597     ; //    OSCICN |= 0x83;                                                 // задаём частоту
                    2598     ;       Timer0_Init();                          // Initialize timer2
                    2599                             ; SOURCE LINE # 700
0006 120000   F     2600             LCALL   Timer0_Init
                    2601     ;       Timer1_Init(); // smbus SCL
                    2602                             ; SOURCE LINE # 701
0009 120000   F     2603             LCALL   Timer1_Init
                    2604     ;       Timer3_Init(); // smbus
                    2605                             ; SOURCE LINE # 702
000C 120000   F     2606             LCALL   Timer3_Init
                    2607     ;       SMBus_Init ();
                    2608                             ; SOURCE LINE # 703
000F 120000   F     2609             LCALL   SMBus_Init
                    2610     ;       Ext_Interrupt_Init();
                    2611                             ; SOURCE LINE # 704
0012 020000   F     2612             LJMP    Ext_Interrupt_Init
                    2613     ; END OF Initialize
                    2614     
                    2615     ; }
                    2616     ; 
                    2617     ; void OSCILLATOR_Init (void)
                    2618     
----                2619             RSEG  ?PR?OSCILLATOR_Init?MAIN
0000                2620     OSCILLATOR_Init:
                    2621                             ; SOURCE LINE # 707
                    2622     ; {
                    2623                             ; SOURCE LINE # 708
                    2624     ; #ifdef EXTERNAL_CRYSTAL
                    2625     ;       int i;
                    2626     ;     OSCXCN    = 0x67;
                    2627     ;     for (i = 0; i < 256; i++);  // Wait 1ms for initialization
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    41

                    2628     ;     while (!(OSCXCN & 0x80));           // Wait for crystal osc. to settle
                    2629     ;       RSTSRC = 0x06;                          // Enable missing clock detector and
                    2630     ;                                               // VDD Monitor reset
                    2631     ; 
                    2632     ; //    CLKMUL = 0x00;
                    2633     ;       CLKSEL = 0x01;                          // Select external oscillator as system
                    2634     ;                                                       // clock source
                    2635     ; //    CLKMUL |= 0x80;
                    2636     ; //    for (i = 0; i < 256; i++);  // Wait 1ms for initialization
                    2637     ; //    CLKMUL |= 0xC0;
                    2638     ; //    while (!(CLKMUL & 0x20));           // 
                    2639     ;       
                    2640     ;       OSCICN = 0x03;                          // Disable the internal oscillator.
                    2641     ; #else
                    2642     ;       OSCICN = 0x83;                                                  // задаём частоту
                    2643                             ; SOURCE LINE # 727
0000 75B283         2644             MOV     OSCICN,#083H
                    2645     ;       RSTSRC |= 0x04;                         // Enable missing clock detector and
                    2646                             ; SOURCE LINE # 728
0003 43EF04         2647             ORL     RSTSRC,#04H
                    2648     ; #endif
                    2649     ; }
                    2650                             ; SOURCE LINE # 730
0006 22             2651             RET     
                    2652     ; END OF OSCILLATOR_Init
                    2653     
                    2654     ; 
                    2655     ; //-------------------------
                    2656     ; // Timer_Init
                    2657     ; //-------------------------
                    2658     ; // Timer initialization
                    2659     ; // - 1 mhz timer 2 reload, used to check if switch pressed on overflow and
                    2660     ; // used for ADC continuous conversion
                    2661     ; //
                    2662     ; void Timer0_Init(void)
                    2663     
----                2664             RSEG  ?PR?Timer0_Init?MAIN
0000                2665     Timer0_Init:
                    2666                             ; SOURCE LINE # 739
                    2667     ; {
                    2668                             ; SOURCE LINE # 740
                    2669     ;       TL0 = 0;
                    2670                             ; SOURCE LINE # 741
0000 E4             2671             CLR     A
0001 F58A           2672             MOV     TL0,A
                    2673     ;       TH0 = 1;
                    2674                             ; SOURCE LINE # 742
0003 758C01         2675             MOV     TH0,#01H
                    2676     ; 
                    2677     ;       TMOD = 0x02;    //      00 - 13bit, 01 - 16bit, 02 - 8 bit;;
                    2678                             ; SOURCE LINE # 744
0006 758902         2679             MOV     TMOD,#02H
                    2680     ;                                       //      T0M1=0; // 16-РАЗРЯДНЫЙ ТАЙМЕР
                    2681     ; 
                    2682     ; #ifdef EXTERNAL_CRYSTAL
                    2683     ;       CKCON = 0x03; 
                    2684     ; #else
                    2685     ;       CKCON = 0x00; // делитель на 12 (01 - на 4, 10 - на 48, на 8  - EXT CLK)
                    2686                             ; SOURCE LINE # 750
0009 F58E           2687             MOV     CKCON,A
                    2688     ; #endif
                    2689     ;       TCON = 0x10;                        // Timer0 ON
                    2690                             ; SOURCE LINE # 752
000B 758810         2691             MOV     TCON,#010H
                    2692     ; }
                    2693                             ; SOURCE LINE # 753
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    42

000E 22             2694             RET     
                    2695     ; END OF Timer0_Init
                    2696     
                    2697     ; 
                    2698     ; void Timer1_Init (void)
                    2699     
----                2700             RSEG  ?PR?Timer1_Init?MAIN
0000                2701     Timer1_Init:
                    2702                             ; SOURCE LINE # 755
                    2703     ; {
                    2704                             ; SOURCE LINE # 756
                    2705     ; #if ((SYSCLK/SMB_FREQUENCY/3) < 255)
                    2706     ;    #define SCALE 1
                    2707     ;       CKCON |= 0x08;                   // Timer1 clock source = SYSCLK
                    2708                             ; SOURCE LINE # 759
0000 438E08         2709             ORL     CKCON,#08H
                    2710     ; #elif ((SYSCLK/SMB_FREQUENCY/4/3) < 255)
                    2711     ;    #define SCALE 4
                    2712     ;       CKCON |= 0x01;
                    2713     ;       CKCON &= ~0x0A;                  // Timer1 clock source = SYSCLK / 4
                    2714     ; #endif
                    2715     ; 
                    2716     ;    TMOD |= 0x20;                        // Timer1 in 8-bit auto-reload mode
                    2717                             ; SOURCE LINE # 766
0003 438920         2718             ORL     TMOD,#020H
                    2719     ; 
                    2720     ;    TH1 = -(SYSCLK/SMB_FREQUENCY/12/3); // Timer1 configured to overflow at 1/3
                    2721                             ; SOURCE LINE # 768
0006 758DF8         2722             MOV     TH1,#0F8H
                    2723     ;                                        // the rate defined by SMB_FREQUENCY
                    2724     ; 
                    2725     ;    TL1 = TH1;                          // Init Timer1
                    2726                             ; SOURCE LINE # 771
0009 858D8B         2727             MOV     TL1,TH1
                    2728     ; 
                    2729     ;    TR1 = 1;                            // Timer1 enabled
                    2730                             ; SOURCE LINE # 773
000C D28E           2731             SETB    TR1
                    2732     ; }
                    2733                             ; SOURCE LINE # 774
000E 22             2734             RET     
                    2735     ; END OF Timer1_Init
                    2736     
                    2737     ; 
                    2738     ; 
                    2739     ; void Timer3_Init (void)
                    2740     
----                2741             RSEG  ?PR?Timer3_Init?MAIN
0000                2742     Timer3_Init:
                    2743                             ; SOURCE LINE # 777
                    2744     ; {
                    2745                             ; SOURCE LINE # 778
                    2746     ;    TMR3CN = 0x00;                      // Timer3 configured for 16-bit auto-
                    2747                             ; SOURCE LINE # 779
0000 E4             2748             CLR     A
0001 F591           2749             MOV     TMR3CN,A
                    2750     ;                                        // reload, low-byte interrupt disabled
                    2751     ; 
                    2752     ;    CKCON &= ~0x40;                     // Timer3 uses SYSCLK/12
                    2753                             ; SOURCE LINE # 782
0003 538EBF         2754             ANL     CKCON,#0BFH
                    2755     ;    TMR3RL = -(SYSCLK/12/40);           // Timer3 configured to overflow after
                    2756                             ; SOURCE LINE # 783
0006 75939E         2757             MOV     TMR3RL+01H,#09EH
0009 759258         2758             MOV     TMR3RL,#058H
                    2759     ;    TMR3 = TMR3RL;                      // ~25ms (for SMBus low timeout detect)
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    43

                    2760                             ; SOURCE LINE # 784
000C 859395         2761             MOV     TMR3+01H,TMR3RL+01H
000F 859294         2762             MOV     TMR3,TMR3RL
                    2763     ; 
                    2764     ;    EIE1 |= 0x80;                       // Timer3 interrupt enable
                    2765                             ; SOURCE LINE # 786
0012 43E680         2766             ORL     EIE1,#080H
                    2767     ;    TMR3CN |= 0x04;                     // Start Timer3
                    2768                             ; SOURCE LINE # 787
0015 439104         2769             ORL     TMR3CN,#04H
                    2770     ; }
                    2771                             ; SOURCE LINE # 788
0018 22             2772             RET     
                    2773     ; END OF Timer3_Init
                    2774     
                    2775     ; 
                    2776     ; /*
                    2777     ; sbit KEY_RESET                                = P2^1;
                    2778     ; sbit KEY_INCREMENT                    = P2^2;
                    2779     ; sbit KEY_MODE                                 = P2^3;
                    2780     ; sbit KEY_STORE                                = P2^4;
                    2781     ; 
                    2782     ; sbit SEGMENT_A                                = P1^6;
                    2783     ; sbit SEGMENT_B                                = P1^5;
                    2784     ; sbit SEGMENT_C                                = P1^1;
                    2785     ; sbit SEGMENT_D                                = P1^3;
                    2786     ; sbit SEGMENT_E                                = P1^4;
                    2787     ; sbit SEGMENT_F                                = P1^7;
                    2788     ; sbit SEGMENT_G                                = P1^2;
                    2789     ; sbit SEGMENT_POINT                    = P1^0;
                    2790     ; 
                    2791     ; sbit LED1                                     = P2^0;
                    2792     ; sbit LED2                                     = P0^5;
                    2793     ; sbit LED3                                     = P0^7;
                    2794     ; sbit LED4                                     = P0^6;
                    2795     ; 
                    2796     ; sbit EXT_INT0                         = P0^4;
                    2797     ; sbit EXT_INT1                         = P0^5;
                    2798     ; */
                    2799     ; 
                    2800     ; void Port_Init(void)
                    2801     
----                2802             RSEG  ?PR?Port_Init?MAIN
0000                2803     Port_Init:
                    2804                             ; SOURCE LINE # 814
                    2805     ; {
                    2806                             ; SOURCE LINE # 815
                    2807     ;       P0MDOUT = 0xFF; // все на выход
                    2808                             ; SOURCE LINE # 816
0000 75A4FF         2809             MOV     P0MDOUT,#0FFH
                    2810     ;       P0MDOUT &= ~0x7F; // bit6,5,4,3 - клавиатура, bit2 вход /INT0, /INT1, bit0,1 - I2C 
                             EEprom
                    2811                             ; SOURCE LINE # 817
0003 53A480         2812             ANL     P0MDOUT,#080H
                    2813     ;       P1MDOUT = 0xFF;  // все на выход
                    2814                             ; SOURCE LINE # 818
0006 75A5FF         2815             MOV     P1MDOUT,#0FFH
                    2816     ; 
                    2817     ;       P2MDOUT = 0xFF;  // все на выход
                    2818                             ; SOURCE LINE # 820
0009 75A6FF         2819             MOV     P2MDOUT,#0FFH
                    2820     ;       P2MDOUT &= ~0x20; // Int0 дополнение - вход
                    2821                             ; SOURCE LINE # 821
000C 53A6DF         2822             ANL     P2MDOUT,#0DFH
                    2823     ;       P2MDOUT &= ~0x02; // KEY_RESET
                    2824                             ; SOURCE LINE # 822
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    44

000F 53A6FD         2825             ANL     P2MDOUT,#0FDH
                    2826     ;       P2MDOUT &= ~0x04; // KEY_INCREMENT
                    2827                             ; SOURCE LINE # 823
0012 53A6FB         2828             ANL     P2MDOUT,#0FBH
                    2829     ;       P2MDOUT &= ~0x08; // KEY_MODE 
                    2830                             ; SOURCE LINE # 824
0015 53A6F7         2831             ANL     P2MDOUT,#0F7H
                    2832     ;       P2MDOUT &= ~0x10; // KEY_STORE
                    2833                             ; SOURCE LINE # 825
0018 53A6EF         2834             ANL     P2MDOUT,#0EFH
                    2835     ; 
                    2836     ;       P2 |= 0x1E; // p2.1 - p2.4 - клавиатура
                    2837                             ; SOURCE LINE # 827
001B 43A01E         2838             ORL     P2,#01EH
                    2839     ;       P0 |= 0x0C; // p0.2, p0.3  - вход /INT0
                    2840                             ; SOURCE LINE # 828
001E 43800C         2841             ORL     P0,#0CH
                    2842     ;       P0 &= ~0x03; // p0.0 , p0.1 - TX / RX I2C
                    2843                             ; SOURCE LINE # 829
0021 5380FC         2844             ANL     P0,#0FCH
                    2845     ; 
                    2846     ;       XBR0    = 0x04;                                         // SMBUS enabled
                    2847                             ; SOURCE LINE # 831
0024 75E104         2848             MOV     XBR0,#04H
                    2849     ;       XBR1    = 0x40;                     // Enable Crossbar and weak pull-ups
                    2850                             ; SOURCE LINE # 832
0027 75E240         2851             MOV     XBR1,#040H
                    2852     ; }
                    2853                             ; SOURCE LINE # 833
002A 22             2854             RET     
                    2855     ; END OF Port_Init
                    2856     
                    2857     ; 
                    2858     ; //
                    2859     ; // SMBUS INIT
                    2860     ; //
                    2861     ; //
                    2862     ; void SMBus_Init (void)
                    2863     
----                2864             RSEG  ?PR?SMBus_Init?MAIN
0000                2865     SMBus_Init:
                    2866                             ; SOURCE LINE # 839
                    2867     ; {
                    2868                             ; SOURCE LINE # 840
                    2869     ;       SMB0CF = 0x5D;                      // Use Timer1 overflows as SMBus clock
                    2870                             ; SOURCE LINE # 841
0000 75C15D         2871             MOV     SMB0CF,#05DH
                    2872     ;                                        // source;
                    2873     ;                                        // Disable slave mode;
                    2874     ;                                        // Enable setup & hold time extensions;
                    2875     ;                                        // Enable SMBus Free timeout detect;
                    2876     ;                                        // Enable SCL low timeout detect;
                    2877     ; 
                    2878     ;       SMB0CF |= 0x80;                     // Enable SMBus;
                    2879                             ; SOURCE LINE # 848
0003 43C180         2880             ORL     SMB0CF,#080H
                    2881     ; }
                    2882                             ; SOURCE LINE # 849
0006 22             2883             RET     
                    2884     ; END OF SMBus_Init
                    2885     
                    2886     ; 
                    2887     ; void Ext_Interrupt_Init (void)
                    2888     
----                2889             RSEG  ?PR?Ext_Interrupt_Init?MAIN
0000                2890     Ext_Interrupt_Init:
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    45

                    2891                             ; SOURCE LINE # 851
                    2892     ; {
                    2893                             ; SOURCE LINE # 852
                    2894     ;       IP = 0x05;// int1, int0 высокий приоритет
                    2895                             ; SOURCE LINE # 853
0000 75B805         2896             MOV     IP,#05H
                    2897     ; 
                    2898     ;       TCON |= 0x05; // фронтом
                    2899                             ; SOURCE LINE # 855
0003 438805         2900             ORL     TCON,#05H
                    2901     ;       IT01CF |= 0x88; // полярность /INT0 ( 1 - высокий активный уровень)
                    2902                             ; SOURCE LINE # 856
0006 43E488         2903             ORL     IT01CF,#088H
                    2904     ; // выбор активности или HIGH или LOW
                    2905     ; 
                    2906     ;       IT01CF |= 0x02; // 
                    2907                             ; SOURCE LINE # 859
0009 43E402         2908             ORL     IT01CF,#02H
                    2909     ;       IT01CF &= ~0x05; // выбор порта P0.2 для /INT0
                    2910                             ; SOURCE LINE # 860
000C 53E4FA         2911             ANL     IT01CF,#0FAH
                    2912     ; 
                    2913     ;       IT01CF |= 0x30; // 
                    2914                             ; SOURCE LINE # 862
000F 43E430         2915             ORL     IT01CF,#030H
                    2916     ;       IT01CF &= ~0x40; // выбор порта P0.3 для /INT1
                    2917                             ; SOURCE LINE # 863
0012 53E4BF         2918             ANL     IT01CF,#0BFH
                    2919     ; 
                    2920     ;       EX0 = 1;                            // Enable /INT0 interrupts
                    2921                             ; SOURCE LINE # 865
0015 D2A8           2922             SETB    EX0
                    2923     ;       EX1 = 1;                            // Enable /INT1 interrupts
                    2924                             ; SOURCE LINE # 866
0017 D2AA           2925             SETB    EX1
                    2926     ; }
                    2927                             ; SOURCE LINE # 867
0019 22             2928             RET     
                    2929     ; END OF Ext_Interrupt_Init
                    2930     
                    2931     ; 
                    2932     ; 
                    2933     ; //-----------------------------------------------------------------------------
                    2934     ; // EEPROM_ByteWrite ()
                    2935     ; //-----------------------------------------------------------------------------
                    2936     ; //
                    2937     ; // Return Value : None
                    2938     ; // Parameters   :
                    2939     ; //   1) unsigned char addr - address to write in the EEPROM
                    2940     ; //                        range is full range of character: 0 to 255
                    2941     ; //
                    2942     ; //   2) unsigned char dat - data to write to the address <addr> in the EEPROM
                    2943     ; //                        range is full range of character: 0 to 255
                    2944     ; //
                    2945     ; // This function writes the value in <dat> to location <addr> in the EEPROM
                    2946     ; // then polls the EEPROM until the write is complete.
                    2947     ; //
                    2948     ; void EEPROM_ByteWrite(U16 addr, unsigned char dat)
                    2949     
----                2950             RSEG  ?PR?_EEPROM_ByteWrite?MAIN
0000                2951     L?0167:
                    2952             USING   0
0000 AD00     F     2953             MOV     R5,LcdMode
0002 7F10           2954             MOV     R7,#010H
0004 7E00           2955             MOV     R6,#00H
0006                2956     _EEPROM_ByteWrite:
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    46

                    2957             USING   0
                    2958                             ; SOURCE LINE # 885
                    2959     ;---- Variable 'addr?1650' assigned to Register 'R2/R3' ----
0006 AB07           2960             MOV     R3,AR7
0008 AA06           2961             MOV     R2,AR6
                    2962     ;---- Variable 'dat?1651' assigned to Register 'R5' ----
                    2963     ; {
                    2964                             ; SOURCE LINE # 886
000A                2965     ?C0104:
                    2966     ;    while (SMB_BUSY);                   // Wait for SMBus to be free.
                    2967                             ; SOURCE LINE # 887
000A 2000FD   F     2968             JB      SMB_BUSY,?C0104
000D                2969     ?C0105:
                    2970     ;    SMB_BUSY = 1;                       // Claim SMBus (set to busy)
                    2971                             ; SOURCE LINE # 888
000D D200     F     2972             SETB    SMB_BUSY
                    2973     ; 
                    2974     ;       WORD_ADDR_HIGH = addr >> 8;                   // Set the target address in the
                    2975                             ; SOURCE LINE # 890
000F 8A00     F     2976             MOV     WORD_ADDR_HIGH,R2
                    2977     ;       WORD_ADDR_LOW = addr & 0xFF;
                    2978                             ; SOURCE LINE # 891
0011 EB             2979             MOV     A,R3
0012 F500     F     2980             MOV     WORD_ADDR_LOW,A
                    2981     ; 
                    2982     ;    // Set SMBus ISR parameters
                    2983     ; #ifdef EEPROM_24C128
                    2984     ;       SMB_SENDWORDADDR_HIGH = 1;
                    2985                             ; SOURCE LINE # 895
0014 D200     F     2986             SETB    SMB_SENDWORDADDR_HIGH
                    2987     ; #endif
                    2988     ; #ifdef EEPROM_24C16
                    2989     ;       SMB_SENDWORDADDR_HIGH = 0;
                    2990     ; #endif
                    2991     ;       SMB_RW = WRITE;                     // Mark next transfer as a write
                    2992                             ; SOURCE LINE # 900
0016 C200     F     2993             CLR     SMB_RW
                    2994     ;       SMB_SENDWORDADDR_LOW = 1;               // Send Word Address after Slave Address
                    2995                             ; SOURCE LINE # 901
0018 D200     F     2996             SETB    SMB_SENDWORDADDR_LOW
                    2997     ; 
                    2998     ;       SMB_RANDOMREAD = 0;                 // Do not send a START signal after
                    2999                             ; SOURCE LINE # 903
001A C200     F     3000             CLR     SMB_RANDOMREAD
                    3001     ;                                        // the word address
                    3002     ;       SMB_ACKPOLL = 1;                    // Enable Acknowledge Polling (The ISR
                    3003                             ; SOURCE LINE # 905
001C D200     F     3004             SETB    SMB_ACKPOLL
                    3005     ;                                        // will automatically restart the
                    3006     ;                                        // transfer if the slave does not
                    3007     ;                                        // acknoledge its address.
                    3008     ; 
                    3009     ;    // Specify the Outgoing Data
                    3010     ;       SMB_SINGLEBYTE_OUT = dat;           // Store <dat> (local variable) in a
                    3011                             ; SOURCE LINE # 911
001E 8D00     F     3012             MOV     SMB_SINGLEBYTE_OUT,R5
                    3013     ;                                        // global variable so the ISR can read
                    3014     ;                                        // it after this function exits
                    3015     ; 
                    3016     ;    // The outgoing data pointer points to the <dat> variable
                    3017     ;       pSMB_DATA_OUT = &SMB_SINGLEBYTE_OUT;
                    3018                             ; SOURCE LINE # 916
0020 750000   F     3019             MOV     pSMB_DATA_OUT,#00H
0023 750000   F     3020             MOV     pSMB_DATA_OUT+01H,#HIGH (SMB_SINGLEBYTE_OUT)
0026 750000   F     3021             MOV     pSMB_DATA_OUT+02H,#LOW (SMB_SINGLEBYTE_OUT)
                    3022     ; 
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    47

                    3023     ; //    SMB_DATA_LEN = 1;                   // Specify to ISR that the next transfer
                    3024     ;                                        // will contain one data byte
                    3025     ; 
                    3026     ;    // Initiate SMBus Transfer
                    3027     ;       STA = 1;
                    3028                             ; SOURCE LINE # 922
0029 D2C5           3029             SETB    STA
                    3030     ; }
                    3031                             ; SOURCE LINE # 923
002B 22             3032             RET     
                    3033     ; END OF _EEPROM_ByteWrite
                    3034     
                    3035     ; 
                    3036     ; 
                    3037     ; //-----------------------------------------------------------------------------
                    3038     ; // EEPROM_ByteRead ()
                    3039     ; //-----------------------------------------------------------------------------
                    3040     ; //
                    3041     ; // Return Value :
                    3042     ; //   1) unsigned char data - data read from address <addr> in the EEPROM
                    3043     ; //                        range is full range of character: 0 to 255
                    3044     ; //
                    3045     ; // Parameters   :
                    3046     ; //   1) unsigned char addr - address to read data from the EEPROM
                    3047     ; //                        range is full range of character: 0 to 255
                    3048     ; //
                    3049     ; // This function returns a single byte from location <addr> in the EEPROM then
                    3050     ; // polls the <SMB_BUSY> flag until the read is complete.
                    3051     ; //
                    3052     ; unsigned char EEPROM_ByteRead(U16 addr)
                    3053     
----                3054             RSEG  ?PR?_EEPROM_ByteRead?MAIN
0000                3055     _EEPROM_ByteRead:
                    3056             USING   0
                    3057                             ; SOURCE LINE # 941
                    3058     ;---- Variable 'addr?1752' assigned to Register 'R4/R5' ----
0000 AD07           3059             MOV     R5,AR7
0002 AC06           3060             MOV     R4,AR6
                    3061     ; {
                    3062                             ; SOURCE LINE # 942
0004                3063     ?C0107:
                    3064     ;    unsigned char retval;               // Holds the return value
                    3065     ; 
                    3066     ;    
                    3067     ;    while (SMB_BUSY);                   // Wait for SMBus to be free.
                    3068                             ; SOURCE LINE # 946
0004 2000FD   F     3069             JB      SMB_BUSY,?C0107
0007                3070     ?C0108:
                    3071     ;    SMB_BUSY = 1;                       // Claim SMBus (set to busy)
                    3072                             ; SOURCE LINE # 947
0007 D200     F     3073             SETB    SMB_BUSY
                    3074     ; 
                    3075     ; 
                    3076     ;       WORD_ADDR_HIGH = addr >> 8;                   // Set the target address in the
                    3077                             ; SOURCE LINE # 950
0009 8C00     F     3078             MOV     WORD_ADDR_HIGH,R4
                    3079     ;       WORD_ADDR_LOW = addr & 0xFF; 
                    3080                             ; SOURCE LINE # 951
000B ED             3081             MOV     A,R5
000C F500     F     3082             MOV     WORD_ADDR_LOW,A
                    3083     ; 
                    3084     ;    // Set SMBus ISR parameters
                    3085     ; #ifdef EEPROM_24C128
                    3086     ;       SMB_SENDWORDADDR_HIGH = 1;
                    3087                             ; SOURCE LINE # 955
000E D200     F     3088             SETB    SMB_SENDWORDADDR_HIGH
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    48

                    3089     ; #endif
                    3090     ; #ifdef EEPROM_24C16
                    3091     ;       SMB_SENDWORDADDR_HIGH = 0;
                    3092     ; #endif
                    3093     ; 
                    3094     ;    SMB_SENDWORDADDR_LOW = 1;               // Send Word Address after Slave Address
                    3095                             ; SOURCE LINE # 961
0010 D200     F     3096             SETB    SMB_SENDWORDADDR_LOW
                    3097     ;    SMB_RW = WRITE;                     // A random read starts as a write
                    3098                             ; SOURCE LINE # 962
0012 C200     F     3099             CLR     SMB_RW
                    3100     ;                                        // then changes to a read after
                    3101     ;                                        // the repeated start is sent. The
                    3102     ;                                        // ISR handles this switchover if
                    3103     ;                                        // the <SMB_RANDOMREAD> bit is set.
                    3104     ;    SMB_RANDOMREAD = 1;                 // Send a START after the word address
                    3105                             ; SOURCE LINE # 967
0014 D200     F     3106             SETB    SMB_RANDOMREAD
                    3107     ;    SMB_ACKPOLL = 1;                    // Enable Acknowledge Polling
                    3108                             ; SOURCE LINE # 968
0016 D200     F     3109             SETB    SMB_ACKPOLL
                    3110     ; 
                    3111     ; 
                    3112     ;    // Specify the Incoming Data
                    3113     ;    pSMB_DATA_IN = &retval;             // The incoming data pointer points to
                    3114                             ; SOURCE LINE # 972
0018 750000   F     3115             MOV     pSMB_DATA_IN,#00H
001B 750000   F     3116             MOV     pSMB_DATA_IN+01H,#HIGH (retval?1753)
001E 750000   F     3117             MOV     pSMB_DATA_IN+02H,#LOW (retval?1753)
                    3118     ;                                        // the <retval> variable.
                    3119     ; 
                    3120     ; //   SMB_DATA_LEN = 1;                   // Specify to ISR that the next transfer
                    3121     ;                                        // will contain one data byte
                    3122     ; 
                    3123     ;    // Initiate SMBus Transfer
                    3124     ;    STA = 1;
                    3125                             ; SOURCE LINE # 979
0021 D2C5           3126             SETB    STA
0023                3127     ?C0109:
                    3128     ;    while(SMB_BUSY);                    // Wait until data is read
                    3129                             ; SOURCE LINE # 980
0023 2000FD   F     3130             JB      SMB_BUSY,?C0109
0026                3131     ?C0110:
                    3132     ; 
                    3133     ;    return retval;
                    3134                             ; SOURCE LINE # 982
0026 AF00     F     3135             MOV     R7,retval?1753
                    3136     ; 
                    3137     ; }
                    3138                             ; SOURCE LINE # 984
0028                3139     ?C0111:
0028 22             3140             RET     
                    3141     ; END OF _EEPROM_ByteRead
                    3142     
                    3143     ; 
                    3144     ; void Suspend_Device(void)
                    3145     
----                3146             RSEG  ?PR?Suspend_Device?MAIN
0000                3147     Suspend_Device:
                    3148             USING   0
                    3149                             ; SOURCE LINE # 986
                    3150     ; {
                    3151                             ; SOURCE LINE # 987
                    3152     ;    // Disable peripherals before calling USB_Suspend()
                    3153     ; //    P0MDIN = 0x0;                       // Port 0 configured as analog input
                    3154     ; //    P1MDIN = 0x00;                       // Port 1 configured as analog input
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    49

                    3155     ; //    P2MDIN = 0x0;
                    3156     ; //    ADC0CN &= ~0x80;                     // Disable ADC0
                    3157     ; //    ET0 = 0;
                    3158     ; //    ET2 = 0;                             // Disable Timer 2 Interrupts
                    3159     ; 
                    3160     ;       USB_Suspend();                       // Put the device in suspend state
                    3161                             ; SOURCE LINE # 996
0000 020000   F     3162             LJMP    USB_Suspend
                    3163     ; END OF Suspend_Device
                    3164     
----                3165     CSEG    AT      00003H
0003 020000   F     3166             LJMP    INT0_ISR
                    3167     
                    3168     ;                                                                               // Once exe
                             cution returns from USB_Suspend(), device leaves suspend state.
                    3169     ;                                                                               // Reenable
                              peripherals
                    3170     ; //    ADC0CN |= 0x80;                      // Enable ADC0
                    3171     ; //    P0MDIN = 0xFF;
                    3172     ; //    P1MDIN = 0xFF;                       // Port 1 pin 7 set as analog input
                    3173     ; //    P2MDIN = 0xFF;
                    3174     ; //    ET0 = 1;
                    3175     ; //    ET2 = 1;                                                        // Enable Timer 2 I
                             nterrupts
                    3176     ; }
                    3177     ; 
                    3178     ; //
                    3179     ; //  IIII  SS  RRR                                   
                    3180     ; //   II  S  S R  R                                  
                    3181     ; //   II  SS   R  R                                  
                    3182     ; //   II   SS  RRR                                   
                    3183     ; //   II    SS R  R                                  
                    3184     ; //   II  S  S R  R                                  
                    3185     ; //  IIII  SS  R  R                                  
                    3186     ; //
                    3187     ; //
                    3188     ; //
                    3189     ; //-----------------------------------------------------------------------------
                    3190     ; // /INT0 ISR
                    3191     ; //-----------------------------------------------------------------------------
                    3192     ; //
                    3193     ; // Whenever a negative edge appears on P0.0, LED1 is toggled.
                    3194     ; // The interrupt pending flag is automatically cleared by vectoring to the ISR
                    3195     ; //
                    3196     ; //-----------------------------------------------------------------------------
                    3197     ; void INT0_ISR (void) interrupt 0
                    3198     
----                3199             RSEG  ?PR?INT0_ISR?MAIN
                    3200             USING   0
0000                3201     INT0_ISR:
0000 C0E0           3202             PUSH    ACC
0002 C0D0           3203             PUSH    PSW
                    3204                             ; SOURCE LINE # 1026
                    3205     ; {
                    3206     ;       Counter++;
                    3207                             ; SOURCE LINE # 1028
0004 E500     F     3208             MOV     A,Counter+03H
0006 2401           3209             ADD     A,#01H
0008 F500     F     3210             MOV     Counter+03H,A
000A E4             3211             CLR     A
000B 3500     F     3212             ADDC    A,Counter+02H
000D F500     F     3213             MOV     Counter+02H,A
000F E4             3214             CLR     A
0010 3500     F     3215             ADDC    A,Counter+01H
0012 F500     F     3216             MOV     Counter+01H,A
0014 E4             3217             CLR     A
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    50

0015 3500     F     3218             ADDC    A,Counter
0017 F500     F     3219             MOV     Counter,A
                    3220     ; }
                    3221                             ; SOURCE LINE # 1029
0019 D0D0           3222             POP     PSW
001B D0E0           3223             POP     ACC
001D 32             3224             RETI    
                    3225     ; END OF INT0_ISR
                    3226     
----                3227     CSEG    AT      00013H
0013 020000   F     3228             LJMP    INT1_ISR
                    3229     
                    3230     ; void INT1_ISR (void) interrupt 2
                    3231     
----                3232             RSEG  ?PR?INT1_ISR?MAIN
                    3233             USING   0
0000                3234     INT1_ISR:
0000 C0E0           3235             PUSH    ACC
0002 C0D0           3236             PUSH    PSW
                    3237                             ; SOURCE LINE # 1030
                    3238     ; {
                    3239     ;       Counter--;
                    3240                             ; SOURCE LINE # 1032
0004 E500     F     3241             MOV     A,Counter+03H
0006 24FF           3242             ADD     A,#0FFH
0008 F500     F     3243             MOV     Counter+03H,A
000A E500     F     3244             MOV     A,Counter+02H
000C 34FF           3245             ADDC    A,#0FFH
000E F500     F     3246             MOV     Counter+02H,A
0010 E500     F     3247             MOV     A,Counter+01H
0012 34FF           3248             ADDC    A,#0FFH
0014 F500     F     3249             MOV     Counter+01H,A
0016 E500     F     3250             MOV     A,Counter
0018 34FF           3251             ADDC    A,#0FFH
001A F500     F     3252             MOV     Counter,A
                    3253     ; }
                    3254                             ; SOURCE LINE # 1033
001C D0D0           3255             POP     PSW
001E D0E0           3256             POP     ACC
0020 32             3257             RETI    
                    3258     ; END OF INT1_ISR
                    3259     
----                3260     CSEG    AT      0003BH
003B 020000   F     3261             LJMP    SMBus_ISR
                    3262     
                    3263     ; 
                    3264     ; //-----------------------------------------------------------------------------
                    3265     ; // SMBus Interrupt Service Routine (ISR)
                    3266     ; //-----------------------------------------------------------------------------
                    3267     ; //
                    3268     ; void SMBus_ISR (void) interrupt 7
                    3269     
----                3270             RSEG  ?PR?SMBus_ISR?MAIN
                    3271             USING   0
0000                3272     SMBus_ISR:
0000 C0E0           3273             PUSH    ACC
0002 C083           3274             PUSH    DPH
0004 C082           3275             PUSH    DPL
0006 C0D0           3276             PUSH    PSW
0008 75D000         3277             MOV     PSW,#00H
000B C001           3278             PUSH    AR1
000D C002           3279             PUSH    AR2
000F C003           3280             PUSH    AR3
                    3281             USING   0
                    3282                             ; SOURCE LINE # 1039
                    3283     ; {
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    51

                    3284     ;    bit FAIL = 0;                       // Used by the ISR to flag failed
                    3285                             ; SOURCE LINE # 1041
0011 C200     F     3286             CLR     FAIL?2154
                    3287     ;                                        // transfers
                    3288     ; 
                    3289     ;    static char i;                      // Used by the ISR to count the
                    3290     ;                                        // number of data bytes sent or
                    3291     ;                                        // received
                    3292     ; 
                    3293     ;    static bit SEND_START = 0;          // Send a start
                    3294     ; 
                    3295     ;    switch (SMB0CN & 0xF0)              // Status vector
                    3296                             ; SOURCE LINE # 1050
0013 E5C0           3297             MOV     A,SMB0CN
0015 54F0           3298             ANL     A,#0F0H
0017 2480           3299             ADD     A,#080H
0019 7003           3300             JNZ     $ + 5H
001B 020000   F     3301             LJMP    ?C0130
001E 24C0           3302             ADD     A,#0C0H
0020 601B           3303             JZ      ?C0117
0022 24E0           3304             ADD     A,#0E0H
0024 6003           3305             JZ      $ + 5H
0026 020000   F     3306             LJMP    ?C0133
                    3307     ;    {
                    3308                             ; SOURCE LINE # 1051
                    3309     ;       // Master Transmitter/Receiver: START condition transmitted.
                    3310     ;       case SMB_MTSTA:
                    3311                             ; SOURCE LINE # 1053
0029                3312     ?C0116:
                    3313     ;          SMB0DAT = TARGET;             // Load address of the target slave
                    3314                             ; SOURCE LINE # 1054
0029 75C2A0         3315             MOV     SMB0DAT,#0A0H
                    3316     ;          SMB0DAT &= 0xFE;              // Clear the LSB of the address for the
                    3317                             ; SOURCE LINE # 1055
002C 53C2FE         3318             ANL     SMB0DAT,#0FEH
                    3319     ;                                        // R/W bit
                    3320     ;          SMB0DAT |= SMB_RW;            // Load R/W bit
                    3321                             ; SOURCE LINE # 1057
002F A200     F     3322             MOV     C,SMB_RW
0031 E4             3323             CLR     A
0032 33             3324             RLC     A
0033 42C2           3325             ORL     SMB0DAT,A
                    3326     ; 
                    3327     ; #ifdef EEPROM_24C16
                    3328     ;               SMB0DAT = SMB0DAT | ((WORD_ADDR_HIGH & 0x07)<<1);
                    3329     ; #endif
                    3330     ; 
                    3331     ;          STA = 0;                      // Manually clear START bit
                    3332                             ; SOURCE LINE # 1063
0035 C2C5           3333             CLR     STA
                    3334     ;          i = 0;                        // Reset data byte counter
                    3335                             ; SOURCE LINE # 1064
0037 750000   F     3336             MOV     i?2155,#00H
                    3337     ;          break;
                    3338                             ; SOURCE LINE # 1065
003A 020000   F     3339             LJMP    ?C0115
                    3340     ; 
                    3341     ;       // Master Transmitter: Data byte (or Slave Address) transmitted
                    3342     ;       case SMB_MTDB:
                    3343                             ; SOURCE LINE # 1068
003D                3344     ?C0117:
                    3345     ;          if (ACK)                      // Slave Address or Data Byte
                    3346                             ; SOURCE LINE # 1069
003D 30C151         3347             JNB     ACK,?C0118
                    3348     ;          {                             // Acknowledged?
                    3349                             ; SOURCE LINE # 1070
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    52

                    3350     ;             if (SEND_START)
                    3351                             ; SOURCE LINE # 1071
0040 300007   F     3352             JNB     SEND_START?2156,?C0119
                    3353     ;             {
                    3354                             ; SOURCE LINE # 1072
                    3355     ;                STA = 1;
                    3356                             ; SOURCE LINE # 1073
0043 D2C5           3357             SETB    STA
                    3358     ;                SEND_START = 0;
                    3359                             ; SOURCE LINE # 1074
0045 C200     F     3360             CLR     SEND_START?2156
                    3361     ;                break;
                    3362                             ; SOURCE LINE # 1075
0047 020000   F     3363             LJMP    ?C0115
                    3364     ;             }
                    3365                             ; SOURCE LINE # 1076
004A                3366     ?C0119:
                    3367     ; 
                    3368     ;             if(SMB_SENDWORDADDR_HIGH)       // Are we sending the word address?
                    3369                             ; SOURCE LINE # 1078
004A 300007   F     3370             JNB     SMB_SENDWORDADDR_HIGH,?C0120
                    3371     ;             {
                    3372                             ; SOURCE LINE # 1079
                    3373     ;                SMB_SENDWORDADDR_HIGH = 0;   // Clear flag
                    3374                             ; SOURCE LINE # 1080
004D C200     F     3375             CLR     SMB_SENDWORDADDR_HIGH
                    3376     ;                SMB0DAT = WORD_ADDR_HIGH;    // Send word address
                    3377                             ; SOURCE LINE # 1081
004F 8500C2   F     3378             MOV     SMB0DAT,WORD_ADDR_HIGH
                    3379     ;                break;
                    3380                             ; SOURCE LINE # 1082
0052 807A           3381             SJMP    ?C0115
                    3382     ;             }
                    3383                             ; SOURCE LINE # 1083
0054                3384     ?C0120:
                    3385     ; 
                    3386     ;             if(SMB_SENDWORDADDR_LOW)       // Are we sending the word address?
                    3387                             ; SOURCE LINE # 1085
0054 30000E   F     3388             JNB     SMB_SENDWORDADDR_LOW,?C0121
                    3389     ;             {
                    3390                             ; SOURCE LINE # 1086
                    3391     ;                SMB_SENDWORDADDR_LOW = 0;   // Clear flag
                    3392                             ; SOURCE LINE # 1087
0057 C200     F     3393             CLR     SMB_SENDWORDADDR_LOW
                    3394     ;                SMB0DAT = WORD_ADDR_LOW;    // Send word address
                    3395                             ; SOURCE LINE # 1088
0059 8500C2   F     3396             MOV     SMB0DAT,WORD_ADDR_LOW
                    3397     ; 
                    3398     ;                if (SMB_RANDOMREAD)
                    3399                             ; SOURCE LINE # 1090
005C 30006F   F     3400             JNB     SMB_RANDOMREAD,?C0115
                    3401     ;                {
                    3402                             ; SOURCE LINE # 1091
                    3403     ;                   SEND_START = 1;      // Send a START after the next ACK cycle
                    3404                             ; SOURCE LINE # 1092
005F D200     F     3405             SETB    SEND_START?2156
                    3406     ;                   SMB_RW = READ;
                    3407                             ; SOURCE LINE # 1093
0061 D200     F     3408             SETB    SMB_RW
                    3409     ;                }
                    3410                             ; SOURCE LINE # 1094
                    3411     ; 
                    3412     ;                break;
                    3413                             ; SOURCE LINE # 1096
0063 8069           3414             SJMP    ?C0115
                    3415     ;             }
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    53

                    3416                             ; SOURCE LINE # 1097
0065                3417     ?C0121:
                    3418     ; 
                    3419     ;             if (SMB_RW==WRITE)         // Is this transfer a WRITE?
                    3420                             ; SOURCE LINE # 1099
0065 200066   F     3421             JB      SMB_RW,?C0115
                    3422     ;             {
                    3423                             ; SOURCE LINE # 1100
                    3424     ; 
                    3425     ;                if (i < 1)   // Is there data to send?
                    3426                             ; SOURCE LINE # 1102
0068 C3             3427             CLR     C
0069 E500     F     3428             MOV     A,i?2155
006B 6480           3429             XRL     A,#080H
006D 9481           3430             SUBB    A,#081H
006F 501A           3431             JNC     ?C0124
                    3432     ;                {
                    3433                             ; SOURCE LINE # 1103
                    3434     ; //                  // send data byte
                    3435     ;                   SMB0DAT = *pSMB_DATA_OUT;
                    3436                             ; SOURCE LINE # 1105
0071 AB00     F     3437             MOV     R3,pSMB_DATA_OUT
0073 AA00     F     3438             MOV     R2,pSMB_DATA_OUT+01H
0075 A900     F     3439             MOV     R1,pSMB_DATA_OUT+02H
0077 120000   F     3440             LCALL   ?C?CLDPTR
007A F5C2           3441             MOV     SMB0DAT,A
                    3442     ; //
                    3443     ;                   // increment data out pointer
                    3444     ;                   pSMB_DATA_OUT++;
                    3445                             ; SOURCE LINE # 1108
007C 7401           3446             MOV     A,#01H
007E 2500     F     3447             ADD     A,pSMB_DATA_OUT+02H
0080 F500     F     3448             MOV     pSMB_DATA_OUT+02H,A
0082 E4             3449             CLR     A
0083 3500     F     3450             ADDC    A,pSMB_DATA_OUT+01H
0085 F500     F     3451             MOV     pSMB_DATA_OUT+01H,A
                    3452     ; 
                    3453     ;                   // increment number of bytes sent
                    3454     ;                   i++;
                    3455                             ; SOURCE LINE # 1111
0087 0500     F     3456             INC     i?2155
                    3457     ;                }
                    3458                             ; SOURCE LINE # 1112
0089 8043           3459             SJMP    ?C0115
008B                3460     ?C0124:
                    3461     ;                else
                    3462     ;                {
                    3463                             ; SOURCE LINE # 1114
                    3464     ;                  STO = 1;              // Set STO to terminte transfer
                    3465                             ; SOURCE LINE # 1115
008B D2C4           3466             SETB    STO
                    3467     ;                  SMB_BUSY = 0;         // Clear software busy flag
                    3468                             ; SOURCE LINE # 1116
008D C200     F     3469             CLR     SMB_BUSY
                    3470     ;                }
                    3471                             ; SOURCE LINE # 1117
                    3472     ;             }
                    3473                             ; SOURCE LINE # 1118
008F 803D           3474             SJMP    ?C0115
                    3475     ;             else {}                    // If this transfer is a READ,
                    3476                             ; SOURCE LINE # 1119
                    3477     ;                                        // then take no action. Slave
                    3478     ;                                        // address was transmitted. A
                    3479     ;                                        // separate 'case' is defined
                    3480     ;                                        // for data byte recieved.
                    3481     ;          }
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    54

                    3482                             ; SOURCE LINE # 1124
0091                3483     ?C0118:
                    3484     ;          else                          // If slave NACK,
                    3485     ;          {
                    3486                             ; SOURCE LINE # 1126
                    3487     ;             if(SMB_ACKPOLL)
                    3488                             ; SOURCE LINE # 1127
0091 300004   F     3489             JNB     SMB_ACKPOLL,?C0128
                    3490     ;             {
                    3491                             ; SOURCE LINE # 1128
                    3492     ;                STA = 1;                // Restart transfer
                    3493                             ; SOURCE LINE # 1129
0094 D2C5           3494             SETB    STA
                    3495     ;             }
                    3496                             ; SOURCE LINE # 1130
0096 8036           3497             SJMP    ?C0115
0098                3498     ?C0128:
                    3499     ;             else
                    3500     ;             {
                    3501                             ; SOURCE LINE # 1132
                    3502     ;                FAIL = 1;               // Indicate failed transfer
                    3503                             ; SOURCE LINE # 1133
0098 D200     F     3504             SETB    FAIL?2154
                    3505     ;             }                          // and handle at end of ISR
                    3506                             ; SOURCE LINE # 1134
                    3507     ;          }
                    3508                             ; SOURCE LINE # 1135
                    3509     ;          break;
                    3510                             ; SOURCE LINE # 1136
009A 8032           3511             SJMP    ?C0115
                    3512     ; 
                    3513     ;       // Master Receiver: byte received
                    3514     ;       case SMB_MRDB:
                    3515                             ; SOURCE LINE # 1139
009C                3516     ?C0130:
                    3517     ;          if ( i < 1 )       // Is there any data remaining?
                    3518                             ; SOURCE LINE # 1140
009C C3             3519             CLR     C
009D E500     F     3520             MOV     A,i?2155
009F 6480           3521             XRL     A,#080H
00A1 9481           3522             SUBB    A,#081H
00A3 501A           3523             JNC     ?C0131
                    3524     ;          {
                    3525                             ; SOURCE LINE # 1141
                    3526     ;             *pSMB_DATA_IN = SMB0DAT;   // Store received byte
                    3527                             ; SOURCE LINE # 1142
00A5 AB00     F     3528             MOV     R3,pSMB_DATA_IN
00A7 AA00     F     3529             MOV     R2,pSMB_DATA_IN+01H
00A9 A900     F     3530             MOV     R1,pSMB_DATA_IN+02H
00AB E5C2           3531             MOV     A,SMB0DAT
00AD 120000   F     3532             LCALL   ?C?CSTPTR
                    3533     ;             pSMB_DATA_IN++;            // Increment data in pointer
                    3534                             ; SOURCE LINE # 1143
00B0 7401           3535             MOV     A,#01H
00B2 2500     F     3536             ADD     A,pSMB_DATA_IN+02H
00B4 F500     F     3537             MOV     pSMB_DATA_IN+02H,A
00B6 E4             3538             CLR     A
00B7 3500     F     3539             ADDC    A,pSMB_DATA_IN+01H
00B9 F500     F     3540             MOV     pSMB_DATA_IN+01H,A
                    3541     ;             i++;                       // Increment number of bytes received
                    3542                             ; SOURCE LINE # 1144
00BB 0500     F     3543             INC     i?2155
                    3544     ;             ACK = 1;                   // Set ACK bit (may be cleared later
                    3545                             ; SOURCE LINE # 1145
00BD D2C1           3546             SETB    ACK
                    3547     ;                                        // in the code)
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    55

                    3548     ; 
                    3549     ;          }
                    3550                             ; SOURCE LINE # 1148
00BF                3551     ?C0131:
                    3552     ; 
                    3553     ;          if (i == 1)        // This is the last byte
                    3554                             ; SOURCE LINE # 1150
00BF E500     F     3555             MOV     A,i?2155
00C1 B4010A         3556             CJNE    A,#01H,?C0115
                    3557     ;          {
                    3558                             ; SOURCE LINE # 1151
                    3559     ;             SMB_BUSY = 0;              // Free SMBus interface
                    3560                             ; SOURCE LINE # 1152
00C4 C200     F     3561             CLR     SMB_BUSY
                    3562     ;             ACK = 0;                   // Send NACK to indicate last byte
                    3563                             ; SOURCE LINE # 1153
00C6 C2C1           3564             CLR     ACK
                    3565     ;                                        // of this transfer
                    3566     ;             STO = 1;                   // Send STOP to terminate transfer
                    3567                             ; SOURCE LINE # 1155
00C8 D2C4           3568             SETB    STO
                    3569     ;          }
                    3570                             ; SOURCE LINE # 1156
                    3571     ; 
                    3572     ;          break;
                    3573                             ; SOURCE LINE # 1158
00CA 8002           3574             SJMP    ?C0115
                    3575     ; 
                    3576     ;       default:
                    3577                             ; SOURCE LINE # 1160
00CC                3578     ?C0133:
                    3579     ;          FAIL = 1;                     // Indicate failed transfer
                    3580                             ; SOURCE LINE # 1161
00CC D200     F     3581             SETB    FAIL?2154
                    3582     ;                                        // and handle at end of ISR
                    3583     ;          break;
                    3584                             ; SOURCE LINE # 1163
                    3585     ;    }
                    3586                             ; SOURCE LINE # 1164
00CE                3587     ?C0115:
                    3588     ; 
                    3589     ;    if (FAIL)                           // If the transfer failed,
                    3590                             ; SOURCE LINE # 1166
00CE 300010   F     3591             JNB     FAIL?2154,?C0134
                    3592     ;    {
                    3593                             ; SOURCE LINE # 1167
                    3594     ;       SMB0CF &= ~0x80;                 // Reset communication
                    3595                             ; SOURCE LINE # 1168
00D1 53C17F         3596             ANL     SMB0CF,#07FH
                    3597     ;       SMB0CF |= 0x80;
                    3598                             ; SOURCE LINE # 1169
00D4 43C180         3599             ORL     SMB0CF,#080H
                    3600     ;       STA = 0;
                    3601                             ; SOURCE LINE # 1170
00D7 C2C5           3602             CLR     STA
                    3603     ;       STO = 0;
                    3604                             ; SOURCE LINE # 1171
00D9 C2C4           3605             CLR     STO
                    3606     ;       ACK = 0;
                    3607                             ; SOURCE LINE # 1172
00DB C2C1           3608             CLR     ACK
                    3609     ; 
                    3610     ;       SMB_BUSY = 0;                    // Free SMBus
                    3611                             ; SOURCE LINE # 1174
00DD C200     F     3612             CLR     SMB_BUSY
                    3613     ; 
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    56

                    3614     ;       FAIL = 0;
                    3615                             ; SOURCE LINE # 1176
00DF C200     F     3616             CLR     FAIL?2154
                    3617     ;    }
                    3618                             ; SOURCE LINE # 1177
00E1                3619     ?C0134:
                    3620     ; 
                    3621     ;    SI = 0;                             // Clear interrupt flag
                    3622                             ; SOURCE LINE # 1179
00E1 C2C0           3623             CLR     SI
                    3624     ; 
                    3625     ; }
                    3626                             ; SOURCE LINE # 1181
00E3 D003           3627             POP     AR3
00E5 D002           3628             POP     AR2
00E7 D001           3629             POP     AR1
00E9 D0D0           3630             POP     PSW
00EB D082           3631             POP     DPL
00ED D083           3632             POP     DPH
00EF D0E0           3633             POP     ACC
00F1 32             3634             RETI    
                    3635     ; END OF SMBus_ISR
                    3636     
----                3637     CSEG    AT      0000BH
000B 020000   F     3638             LJMP    Timer0_ISR
                    3639     
                    3640     ; 
                    3641     ; //-------------------------
                    3642     ; // Timer0_ISR
                    3643     ; //-------------------------
                    3644     ; // Called when timer 2 overflows, check to see if switch is pressed,
                    3645     ; // then watch for release.
                    3646     ; //
                    3647     ; INTERRUPT(Timer0_ISR, INTERRUPT_TIMER0)
                    3648     
----                3649             RSEG  ?PR?Timer0_ISR?MAIN
                    3650             USING   0
0000                3651     Timer0_ISR:
0000 C0E0           3652             PUSH    ACC
0002 C0F0           3653             PUSH    B
0004 C083           3654             PUSH    DPH
0006 C082           3655             PUSH    DPL
0008 C0D0           3656             PUSH    PSW
000A 75D000         3657             MOV     PSW,#00H
000D C000           3658             PUSH    AR0
000F C001           3659             PUSH    AR1
0011 C002           3660             PUSH    AR2
0013 C003           3661             PUSH    AR3
0015 C004           3662             PUSH    AR4
0017 C005           3663             PUSH    AR5
0019 C006           3664             PUSH    AR6
001B C007           3665             PUSH    AR7
                    3666             USING   0
                    3667                             ; SOURCE LINE # 1189
                    3668     ; {
                    3669     ;       unsigned char i;
                    3670     ;       static int low_counter=0;  // Define counter variable
                    3671     ; 
                    3672     ;       TL0 = TIMER0_RELOAD_LOW;            // Reinit Timer0 Low register
                    3673                             ; SOURCE LINE # 1194
001D 758AF8         3674             MOV     TL0,#0F8H
                    3675     ; 
                    3676     ; //    if ((low_counter2++) == Timer0_RateEncoder )
                    3677     ; //    {
                    3678     ; //            EncoderScan5();
                    3679     ; //            low_counter2 = 0;
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    57

                    3680     ; //    }
                    3681     ;       if ((low_counter++) == Timer0_Rate)
                    3682                             ; SOURCE LINE # 1201
0020 0500     F     3683             INC     low_counter?2258+01H
0022 E500     F     3684             MOV     A,low_counter?2258+01H
0024 AE00     F     3685             MOV     R6,low_counter?2258
0026 7002           3686             JNZ     ?C0161
0028 0500     F     3687             INC     low_counter?2258
002A                3688     ?C0161:
002A 14             3689             DEC     A
002B 640A           3690             XRL     A,#0AH
002D 4E             3691             ORL     A,R6
002E 7049           3692             JNZ     ?C0143
                    3693     ;       {
                    3694                             ; SOURCE LINE # 1202
                    3695     ; //            if (LcdMode = 0) j = 5; else j = 6;
                    3696     ;               for (i=0;i<(4 + LcdMode);i++) 
                    3697                             ; SOURCE LINE # 1204
0030 F500     F     3698             MOV     i?2257,A
0032                3699     ?C0137:
0032 E500     F     3700             MOV     A,LcdMode
0034 2404           3701             ADD     A,#04H
0036 FF             3702             MOV     R7,A
0037 E4             3703             CLR     A
0038 33             3704             RLC     A
0039 FE             3705             MOV     R6,A
003A C3             3706             CLR     C
003B E500     F     3707             MOV     A,i?2257
003D 9F             3708             SUBB    A,R7
003E EE             3709             MOV     A,R6
003F 6480           3710             XRL     A,#080H
0041 F8             3711             MOV     R0,A
0042 7480           3712             MOV     A,#080H
0044 98             3713             SUBB    A,R0
0045 502C           3714             JNC     ?C0138
                    3715     ;               {
                    3716                             ; SOURCE LINE # 1205
                    3717     ;                       if (i == 2) FlagPoint = 1; else FlagPoint = 0;
                    3718                             ; SOURCE LINE # 1206
0047 E500     F     3719             MOV     A,i?2257
0049 B40204         3720             CJNE    A,#02H,?C0140
004C D200     F     3721             SETB    FlagPoint
004E 8002           3722             SJMP    ?C0141
0050                3723     ?C0140:
0050 C200     F     3724             CLR     FlagPoint
0052                3725     ?C0141:
                    3726     ;                       if (LcdMode == 0) FlagPoint = 1;
                    3727                             ; SOURCE LINE # 1207
0052 E500     F     3728             MOV     A,LcdMode
0054 7002           3729             JNZ     ?C0142
0056 D200     F     3730             SETB    FlagPoint
0058                3731     ?C0142:
                    3732     ;                       OutSymbol(i+1,0x30 | OutputBuffer[i]);
                    3733                             ; SOURCE LINE # 1208
0058 E500     F     3734             MOV     A,i?2257
005A 04             3735             INC     A
005B FF             3736             MOV     R7,A
005C 7400     F     3737             MOV     A,#LOW (OutputBuffer)
005E 2500     F     3738             ADD     A,i?2257
0060 F8             3739             MOV     R0,A
0061 E6             3740             MOV     A,@R0
0062 4430           3741             ORL     A,#030H
0064 FD             3742             MOV     R5,A
0065 120000   F     3743             LCALL   _OutSymbol
                    3744     ;                       Del     (200);
                    3745                             ; SOURCE LINE # 1209
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    58

0068 7FC8           3746             MOV     R7,#0C8H
006A 7E00           3747             MOV     R6,#00H
006C 120000   F     3748             LCALL   _Del
                    3749     ;               }
                    3750                             ; SOURCE LINE # 1210
006F 0500     F     3751             INC     i?2257
0071 80BF           3752             SJMP    ?C0137
0073                3753     ?C0138:
                    3754     ;               low_counter = 0;
                    3755                             ; SOURCE LINE # 1211
0073 750000   F     3756             MOV     low_counter?2258,#00H
0076 750000   F     3757             MOV     low_counter?2258+01H,#00H
                    3758     ;       }
                    3759                             ; SOURCE LINE # 1212
                    3760     ; }
                    3761                             ; SOURCE LINE # 1213
0079                3762     ?C0143:
0079 D007           3763             POP     AR7
007B D006           3764             POP     AR6
007D D005           3765             POP     AR5
007F D004           3766             POP     AR4
0081 D003           3767             POP     AR3
0083 D002           3768             POP     AR2
0085 D001           3769             POP     AR1
0087 D000           3770             POP     AR0
0089 D0D0           3771             POP     PSW
008B D082           3772             POP     DPL
008D D083           3773             POP     DPH
008F D0F0           3774             POP     B
0091 D0E0           3775             POP     ACC
0093 32             3776             RETI    
                    3777     ; END OF Timer0_ISR
                    3778     
----                3779     CSEG    AT      0002BH
002B 020000   F     3780             LJMP    Timer2_ISR
                    3781     
                    3782     ; //-------------------------
                    3783     ; // Timer2_ISR
                    3784     ; //-------------------------
                    3785     ; // Called when timer 2 overflows, check to see if switch is pressed,
                    3786     ; // then watch for release.
                    3787     ; //
                    3788     ; INTERRUPT(Timer2_ISR, INTERRUPT_TIMER2)
                    3789     
----                3790             RSEG  ?PR?Timer2_ISR?MAIN
                    3791             USING   0
0000                3792     Timer2_ISR:
                    3793                             ; SOURCE LINE # 1220
                    3794     ; {
                    3795     ;       TF2H = 0;                              // Clear Timer2 interrupt flag
                    3796                             ; SOURCE LINE # 1222
0000 C2CF           3797             CLR     TF2H
                    3798     ;       ET2=1;
                    3799                             ; SOURCE LINE # 1223
0002 D2AD           3800             SETB    ET2
                    3801     ; }
                    3802                             ; SOURCE LINE # 1224
0004 32             3803             RETI    
                    3804     ; END OF Timer2_ISR
                    3805     
----                3806     CSEG    AT      00073H
0073 020000   F     3807             LJMP    Timer3_ISR
                    3808     
                    3809     ; 
                    3810     ; //-----------------------------------------------------------------------------
                    3811     ; // Timer3 Interrupt Service Routine (ISR)
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    59

                    3812     ; //-----------------------------------------------------------------------------
                    3813     ; //
                    3814     ; // A Timer3 interrupt indicates an SMBus SCL low timeout.
                    3815     ; // The SMBus is disabled and re-enabled if a timeout occurs.
                    3816     ; //
                    3817     ; void Timer3_ISR (void) interrupt 14
                    3818     
----                3819             RSEG  ?PR?Timer3_ISR?MAIN
                    3820             USING   0
0000                3821     Timer3_ISR:
                    3822                             ; SOURCE LINE # 1233
                    3823     ; {
                    3824     ;    SMB0CF &= ~0x80;                    // Disable SMBus
                    3825                             ; SOURCE LINE # 1235
0000 53C17F         3826             ANL     SMB0CF,#07FH
                    3827     ;    SMB0CF |= 0x80;                     // Re-enable SMBus
                    3828                             ; SOURCE LINE # 1236
0003 43C180         3829             ORL     SMB0CF,#080H
                    3830     ;    TMR3CN &= ~0x80;                    // Clear Timer3 interrupt-pending flag
                    3831                             ; SOURCE LINE # 1237
0006 53917F         3832             ANL     TMR3CN,#07FH
                    3833     ;    SMB_BUSY = 0;                       // Free bus
                    3834                             ; SOURCE LINE # 1238
0009 C200     F     3835             CLR     SMB_BUSY
                    3836     ; }
                    3837                             ; SOURCE LINE # 1239
000B 32             3838             RETI    
                    3839     ; END OF Timer3_ISR
                    3840     
----                3841     CSEG    AT      0008BH
008B 020000   F     3842             LJMP    USB_API_TEST_ISR
                    3843     
                    3844     ; 
                    3845     ; INTERRUPT(USB_API_TEST_ISR, INTERRUPT_USBXpress)
                    3846     
----                3847             RSEG  ?PR?USB_API_TEST_ISR?MAIN
                    3848             USING   0
0000                3849     USB_API_TEST_ISR:
0000 C0E0           3850             PUSH    ACC
0002 C0F0           3851             PUSH    B
0004 C083           3852             PUSH    DPH
0006 C082           3853             PUSH    DPL
0008 C0D0           3854             PUSH    PSW
000A 75D000         3855             MOV     PSW,#00H
000D C000           3856             PUSH    AR0
000F C001           3857             PUSH    AR1
0011 C002           3858             PUSH    AR2
0013 C003           3859             PUSH    AR3
0015 C004           3860             PUSH    AR4
0017 C005           3861             PUSH    AR5
0019 C006           3862             PUSH    AR6
001B C007           3863             PUSH    AR7
                    3864             USING   0
                    3865                             ; SOURCE LINE # 1241
                    3866     ; {
                    3867     ;       unsigned char INTVAL = Get_Interrupt_Source();
                    3868                             ; SOURCE LINE # 1243
001D 120000   F     3869             LCALL   Get_Interrupt_Source
0020 8F00     F     3870             MOV     INTVAL?2559,R7
                    3871     ; 
                    3872     ;    if (INTVAL & RX_COMPLETE)
                    3873                             ; SOURCE LINE # 1245
0022 E500     F     3874             MOV     A,INTVAL?2559
0024 30E20B         3875             JNB     ACC.2,?C0146
                    3876     ;    {
                    3877                             ; SOURCE LINE # 1246
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    60

                    3878     ;               Block_Read(In_Packet, sizeof(In_Packet));
                    3879                             ; SOURCE LINE # 1247
0027 7B00           3880             MOV     R3,#00H
0029 7A00     F     3881             MOV     R2,#HIGH (In_Packet)
002B 7900     F     3882             MOV     R1,#LOW (In_Packet)
002D 7D0A           3883             MOV     R5,#0AH
002F 120000   F     3884             LCALL   _Block_Read
                    3885     ; 
                    3886     ;               switch (In_Packet[0])
                    3887                             ; SOURCE LINE # 1249
                    3888     ;               {
                    3889                             ; SOURCE LINE # 1250
                    3890     ;               default:;
                    3891                             ; SOURCE LINE # 1251
                    3892     ;               }
                    3893                             ; SOURCE LINE # 1252
                    3894     ;       }
                    3895                             ; SOURCE LINE # 1253
0032                3896     ?C0146:
                    3897     ; 
                    3898     ;    if (INTVAL & DEV_SUSPEND)
                    3899                             ; SOURCE LINE # 1255
0032 E500     F     3900             MOV     A,INTVAL?2559
0034 30E703         3901             JNB     ACC.7,?C0149
                    3902     ;    {
                    3903                             ; SOURCE LINE # 1256
                    3904     ;         Suspend_Device();
                    3905                             ; SOURCE LINE # 1257
0037 120000   F     3906             LCALL   Suspend_Device
                    3907     ;    }
                    3908                             ; SOURCE LINE # 1258
003A                3909     ?C0149:
                    3910     ; 
                    3911     ;    if (INTVAL & DEV_CONFIGURED)
                    3912                             ; SOURCE LINE # 1260
                    3913     ;    {
                    3914                             ; SOURCE LINE # 1261
                    3915     ; //      Initialize();
                    3916     ;    }
                    3917                             ; SOURCE LINE # 1263
                    3918     ; }
                    3919                             ; SOURCE LINE # 1264
003A                3920     ?C0151:
003A D007           3921             POP     AR7
003C D006           3922             POP     AR6
003E D005           3923             POP     AR5
0040 D004           3924             POP     AR4
0042 D003           3925             POP     AR3
0044 D002           3926             POP     AR2
0046 D001           3927             POP     AR1
0048 D000           3928             POP     AR0
004A D0D0           3929             POP     PSW
004C D082           3930             POP     DPL
004E D083           3931             POP     DPH
0050 D0F0           3932             POP     B
0052 D0E0           3933             POP     ACC
0054 32             3934             RETI    
                    3935     ; END OF USB_API_TEST_ISR
                    3936     
                    3937     ; 
                    3938     ; //
                    3939     ; //
                    3940     ; //
                    3941     ; //
                    3942     ; 
                    3943     ; //;======================================================================================
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    61

                             =======
                    3944     ; //; ВРЕМЕННЫЕ ЗАДЕРЖКИ
                    3945     ; //;
                    3946     ; // 1 мкс = 24 такта
                    3947     ; //; Формула: 8+(2+((R0-1)*3)+2)+(2+(((R2-1)*3)+2))+9
                    3948     ; //; Данные:  R0 = 140, R0=79
                    3949     ; //;          R1 = 253
                    3950     ; //; Итого:   8+(2+((140-1)*3)+2)+(2+(((253-1)*3)+2)+(2+(((79-1)*3)+2))+2+9 = 1440
                    3951     ; //;--------------------------------------------------------------------------------------
                             -------
                    3952     ; /*
                    3953     ; void Del_10mks(void)
                    3954     ; {
                    3955     ;       #pragma asm
                    3956     ;       push    00h                                                     ; 2 такта          
                                | 6 тактов
                    3957     ;       mov   R0,#75                                            ; 2 такта             |
                    3958     ;       djnz  R0,$                                                      ; (74*3)+2=224 такт
                             а  | 227 тактов
                    3959     ;       nop                                                                     ; 1 такт   
                                        |
                    3960     ;       
                    3961     ;       pop     00h                                                     ; 2 такта          
                                | 7 тактов
                    3962     ;       ret                                                                     ; Возврат 5
                              тактов    |
                    3963     ;       #pragma endasm
                    3964     ; }
                    3965     ; */
                    3966     ; 
                    3967     ; void Del_500mks(void)
                    3968     
----                3969             RSEG  ?PR?Del_500mks?MAIN
0000                3970     Del_500mks:
                    3971                             ; SOURCE LINE # 1295
                    3972     ; {
                    3973                             ; SOURCE LINE # 1296
                    3974     ;       #pragma asm
                    3975     ;       push    00h                                                     ; 2 такта          
                                |
0000 C000           3976               push  00h                                                     ; 2 такта          
                                |
                    3977     ;       push    01h                                                     ; 2 такта          
                                |
0002 C001           3978               push  01h                                                     ; 2 такта          
                                |
                    3979     ;       push    02h                                                     ; 2 такта          
                                | 12 тактов
0004 C002           3980               push  02h                                                     ; 2 такта          
                                | 12 тактов
                    3981     ;                                                                                       ;  
                                                |
                    3982               ;                     |
                    3983     ;       mov   R1,#20                                            ; 2 такта             |
0006 7914           3984               mov   R1,#20                                          ; 2 такта             |
                    3985     ;               
                    3986               
                    3987     ;       mov   R0,#195                                           ; 2 такта             | (58
                             9*20)-1=
0008 78C3           3988               mov   R0,#195                                         ; 2 такта             | (58
                             9*20)-1=
                    3989     ;       djnz  R0,$                                                      ; (194*3)+2=584 так
                             та | 11779 тактов
000A D8FE           3990               djnz  R0,$                                                    ; (194*3)+2=584 так
                             та | 11779 тактов
                    3991     ;       djnz    R1,$-4                                          ; 3 такта             |
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    62

000C D9FA           3992               djnz  R1,$-4                                          ; 3 такта             |
                    3993     ; 
                    3994               
                    3995     ;       mov   R2,#65                                            ; 2 такта             |
000E 7A41           3996               mov   R2,#65                                          ; 2 такта             |
                    3997     ;       djnz  R2,$                                                      ; (64*3)+2=194 такт
                             ов | 198 тактов
0010 DAFE           3998               djnz  R2,$                                                    ; (64*3)+2=194 такт
                             ов | 198 тактов
                    3999     ;       nop                                                                     ; 1 такт   
                                        |
0012 00             4000               nop                                                                   ; 1 такт   
                                        |
                    4001     ;       nop                                                                     ; 1 такт   
                                        |
0013 00             4002               nop                                                                   ; 1 такт   
                                        |
                    4003     ;                                               
                    4004               
                    4005     ;       pop     02h                                                     ; 2 такта          
                                |
0014 D002           4006               pop   02h                                                     ; 2 такта          
                                |
                    4007     ;       pop     01h                                                     ; 2 такта          
                                | 11 тактов
0016 D001           4008               pop   01h                                                     ; 2 такта          
                                | 11 тактов
                    4009     ;       pop     00h                                                     ; 2 такта          
                                |
0018 D000           4010               pop   00h                                                     ; 2 такта          
                                |
                    4011     ;       ret                                                                     ; Возврат 5
                              тактов    |
001A 22             4012               ret                                                                   ; Возврат 5
                              тактов    |
                    4013     ;       #pragma endasm
                    4014     ; }
                    4015                             ; SOURCE LINE # 1318
001B 22             4016             RET     
                    4017     ; END OF Del_500mks
                    4018     
                    4019     ; 
                    4020     ; /*
                    4021     ; void Del_10ms(void)
                    4022     ; {
                    4023     ;       #pragma asm
                    4024     ;       push    00h                                                     ; 2 такта          
                                |
                    4025     ;       push    01h                                                     ; 2 такта          
                                |
                    4026     ;       push    02h                                                     ; 2 такта          
                                | 14 тактов
                    4027     ;       push    03h                                                     ; 2 такта          
                                |
                    4028     ;                                                                                          
                                                                  ;                     |
                    4029     ;       mov   R2,#6                                                     ; 2 такта          
                                |                                 
                    4030     ;                                                                       
                    4031     ;       mov   R1,#168   ;              | 2 такта +           |
                    4032     ;       mov   R0,#78    ; 2 такта +    |                     | (39988*6)-1=
                    4033     ;       djnz    R0,$            ; (77*3)+2=233 | (((235+3)*168)-1)=  | 239927 тактов
                    4034     ;       djnz  R1,$-4    ;              |    55249 тактов     |   
                    4035     ;       djnz    R2,$-8  ;              | + 3 такта           |
                    4036     ; 
                    4037     ;       mov   R3,#15                                            ; 2 такта             |
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    63

                    4038     ;       djnz  R3,$                                                      ; (14*3)+2=44 такто
                             в  | 46 тактов
                    4039     ;                                               
                    4040     ;       pop     03h                                                     ; 2 такта          
                                |
                    4041     ;       pop     02h                                                     ; 2 такта          
                                |
                    4042     ;       pop     01h                                                     ; 2 такта          
                                | 13 тактов
                    4043     ;       pop     00h                                                     ; 2 такта          
                                |
                    4044     ;       ret                                                                     ; Возврат 5
                              тактов    |
                    4045     ;       #pragma endasm
                    4046     ; }
                    4047     ; 
                    4048     ; void Del_25ms(void)
                    4049     ; {
                    4050     ;       #pragma asm
                    4051     ;       push    00h                                                     ; 2 такта          
                                |
                    4052     ;       push    01h                                                     ; 2 такта          
                                |
                    4053     ;       push    02h                                                     ; 2 такта          
                                | 14 тактов
                    4054     ;       push    03h                                                     ; 2 такта          
                                |
                    4055     ;                                                                                          
                                                                  ;                     |
                    4056     ;       mov   R2,#15                                            ; 2 такта             |    
                                                          
                    4057     ;                                       
                    4058     ;       mov   R1,#168   ;              | 2 такта +           |
                    4059     ;       mov   R0,#78    ; 2 такта +    |                     | (39988*15)-1=
                    4060     ;       djnz    R0,$            ; (77*3)+2=233 | (((235+3)*168)-1)=  | 599819 тактов
                    4061     ;       djnz  R1,$-4    ;              |    55249 тактов     |   
                    4062     ;       djnz    R2,$-8  ;              | + 3 такта           |
                    4063     ; 
                    4064     ;       mov   R3,#51                                            ; 2 такта             |
                    4065     ;       djnz  R3,$                                                      ; (50*3)+2=152 такт
                             ов | 154 тактов
                    4066     ;                                               
                    4067     ;       pop     03h                                                     ; 2 такта          
                                |
                    4068     ;       pop     02h                                                     ; 2 такта          
                                |
                    4069     ;       pop     01h                                                     ; 2 такта          
                                | 13 тактов
                    4070     ;       pop     00h                                                     ; 2 такта          
                                |
                    4071     ;       ret                                                                     ; Возврат 5
                              тактов    |
                    4072     ;       #pragma endasm
                    4073     ; }
                    4074     ; */
                    4075     ; 
                    4076     ; void Del_100ms(void)
                    4077     
----                4078             RSEG  ?PR?Del_100ms?MAIN
0000                4079     Del_100ms:
                    4080                             ; SOURCE LINE # 1376
                    4081     ; {
                    4082                             ; SOURCE LINE # 1377
                    4083     ;       #pragma asm
                    4084     ;       push    00h                                                     ; 2 такта          
                                |
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    64

0000 C000           4085               push  00h                                                     ; 2 такта          
                                |
                    4086     ;       push    01h                                                     ; 2 такта          
                                |
0002 C001           4087               push  01h                                                     ; 2 такта          
                                |
                    4088     ;       push    02h                                                     ; 2 такта          
                                | 14 тактов
0004 C002           4089               push  02h                                                     ; 2 такта          
                                | 14 тактов
                    4090     ;       push    03h                                                     ; 2 такта          
                                |
0006 C003           4091               push  03h                                                     ; 2 такта          
                                |
                    4092     ;                                                                                       ;  
                                                |
                    4093               ;                     |
                    4094     ;       mov   R2,#60                                            ; 2 такта             |    
                                                          
0008 7A3C           4095               mov   R2,#60                                          ; 2 такта             |    
                                                          
                    4096     ;                                                               
                    4097               
                    4098     ;       mov   R1,#168   ;              | 2 такта +           |
000A 79A8           4099               mov   R1,#168 ;              | 2 такта +           |
                    4100     ;       mov   R0,#78    ; 2 такта +    |                     | (39988*60)-1=
000C 784E           4101               mov   R0,#78  ; 2 такта +    |                     | (39988*60)-1=
                    4102     ;       djnz    R0,$            ; (77*3)+2=233 | (((235+3)*168)-1)=  | 2399279 тактов
000E D8FE           4103               djnz  R0,$            ; (77*3)+2=233 | (((235+3)*168)-1)=  | 2399279 тактов
                    4104     ;       djnz  R1,$-4    ;              |    55249 тактов     |   
0010 D9FA           4105               djnz  R1,$-4  ;              |    55249 тактов     |   
                    4106     ;       djnz    R2,$-8  ;              | + 3 такта           |
0012 DAF6           4107               djnz  R2,$-8  ;              | + 3 такта           |
                    4108     ; 
                    4109               
                    4110     ;       mov   R3,#231                                           ; 2 такта             |
0014 7BE7           4111               mov   R3,#231                                         ; 2 такта             |
                    4112     ;       djnz  R3,$                                                      ; (230*3)+2=692 так
                             тов| 694 тактов
0016 DBFE           4113               djnz  R3,$                                                    ; (230*3)+2=692 так
                             тов| 694 тактов
                    4114     ;       
                    4115               
                    4116     ;       pop     03h                                                     ; 2 такта          
                                |
0018 D003           4117               pop   03h                                                     ; 2 такта          
                                |
                    4118     ;       pop     02h                                                     ; 2 такта          
                                |
001A D002           4119               pop   02h                                                     ; 2 такта          
                                |
                    4120     ;       pop     01h                                                     ; 2 такта          
                                | 13 тактов
001C D001           4121               pop   01h                                                     ; 2 такта          
                                | 13 тактов
                    4122     ;       pop     00h                                                     ; 2 такта          
                                |
001E D000           4123               pop   00h                                                     ; 2 такта          
                                |
                    4124     ;       ret                                                                     ; Возврат 5
                              тактов    |
0020 22             4125               ret                                                                   ; Возврат 5
                              тактов    |
                    4126     ;       #pragma endasm
                    4127     ; }
                    4128                             ; SOURCE LINE # 1401
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    65

0021 22             4129             RET     
                    4130     ; END OF Del_100ms
                    4131     
                    4132     ; 
                    4133     ; void Del(int a)
                    4134     
----                4135             RSEG  ?PR?_Del?MAIN
0000                4136     _Del:
                    4137             USING   0
                    4138                             ; SOURCE LINE # 1403
                    4139     ;---- Variable 'a?2860' assigned to Register 'R6/R7' ----
                    4140     ; {
                    4141                             ; SOURCE LINE # 1404
                    4142     ;       int i;
                    4143     ;       for (i=0;i<a;i++)
                    4144                             ; SOURCE LINE # 1406
                    4145     ;---- Variable 'i?2861' assigned to Register 'R4/R5' ----
0000 E4             4146             CLR     A
0001 FD             4147             MOV     R5,A
0002 FC             4148             MOV     R4,A
0003                4149     ?C0154:
0003 C3             4150             CLR     C
0004 ED             4151             MOV     A,R5
0005 9F             4152             SUBB    A,R7
0006 EE             4153             MOV     A,R6
0007 6480           4154             XRL     A,#080H
0009 F8             4155             MOV     R0,A
000A EC             4156             MOV     A,R4
000B 6480           4157             XRL     A,#080H
000D 98             4158             SUBB    A,R0
000E 5007           4159             JNC     ?C0157
                    4160     ;       {
                    4161                             ; SOURCE LINE # 1407
                    4162     ;       }
                    4163                             ; SOURCE LINE # 1408
0010 0D             4164             INC     R5
0011 BD0001         4165             CJNE    R5,#00H,?C0162
0014 0C             4166             INC     R4
0015                4167     ?C0162:
0015 80EC           4168             SJMP    ?C0154
                    4169     ; }
                    4170                             ; SOURCE LINE # 1409
0017                4171     ?C0157:
0017 22             4172             RET     
                    4173     ; END OF _Del
                    4174     
                    4175             END
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    66

XREF SYMBOL TABLE LISTING
---- ------ ----- -------


N A M E                              T Y P E  V A L U E   ATTRIBUTES / REFERENCES

?BI?MAIN. . . . . . . . . . . . . .  B SEG    0013H       REL=UNIT   272# 448
?BI?MAIN?MAIN . . . . . . . . . . .  B SEG    0001H       REL=UNIT   246# 394
?BI?SMBUS_ISR?MAIN. . . . . . . . .  B SEG    0001H       REL=UNIT   273# 386
?C0001. . . . . . . . . . . . . . .  C ADDR   000FH   R   SEG=?PR?MAIN?MAIN   968# 1018
?C0002. . . . . . . . . . . . . . .  C ADDR   002DH   R   SEG=?PR?MAIN?MAIN   973 1019#
?C0003. . . . . . . . . . . . . . .  C ADDR   0019H   R   SEG=?PR?MAIN?MAIN   990# 992
?C0004. . . . . . . . . . . . . . .  C ADDR   001DH   R   SEG=?PR?MAIN?MAIN   993#
?C0006. . . . . . . . . . . . . . .  C ADDR   001FH   R   SEG=?PR?MAIN?MAIN   997# 1000
?C0007. . . . . . . . . . . . . . .  C ADDR   0022H   R   SEG=?PR?MAIN?MAIN   1001#
?C0008. . . . . . . . . . . . . . .  C ADDR   0024H   R   SEG=?PR?MAIN?MAIN   1007# 1009
?C0009. . . . . . . . . . . . . . .  C ADDR   0028H   R   SEG=?PR?MAIN?MAIN   1010#
?C0011. . . . . . . . . . . . . . .  C ADDR   004BH   R   SEG=?PR?MAIN?MAIN   1052 1055#
?C0012. . . . . . . . . . . . . . .  C ADDR   0073H   R   SEG=?PR?MAIN?MAIN   1054 1070 1086 1100 1108#
?C0013. . . . . . . . . . . . . . .  C ADDR   0059H   R   SEG=?PR?MAIN?MAIN   1068 1071#
?C0015. . . . . . . . . . . . . . .  C ADDR   0067H   R   SEG=?PR?MAIN?MAIN   1084 1087#
?C0019. . . . . . . . . . . . . . .  C ADDR   011CH   R   SEG=?PR?MAIN?MAIN   1217 1223# 1863 1892 1900
?C0021. . . . . . . . . . . . . . .  C ADDR   039AH   R   SEG=?PR?MAIN?MAIN   1242 1708#
?C0022. . . . . . . . . . . . . . .  C ADDR   012CH   R   SEG=?PR?MAIN?MAIN   1247#
?C0023. . . . . . . . . . . . . . .  C ADDR   0198H   R   SEG=?PR?MAIN?MAIN   1272 1324#
?C0024. . . . . . . . . . . . . . .  C ADDR   019AH   R   SEG=?PR?MAIN?MAIN   1323 1326#
?C0025. . . . . . . . . . . . . . .  C ADDR   01F7H   R   SEG=?PR?MAIN?MAIN   1342 1394#
?C0026. . . . . . . . . . . . . . .  C ADDR   01F9H   R   SEG=?PR?MAIN?MAIN   1393 1396#
?C0027. . . . . . . . . . . . . . .  C ADDR   0257H   R   SEG=?PR?MAIN?MAIN   1412 1464#
?C0028. . . . . . . . . . . . . . .  C ADDR   0259H   R   SEG=?PR?MAIN?MAIN   1466#
?C0029. . . . . . . . . . . . . . .  C ADDR   025CH   R   SEG=?PR?MAIN?MAIN   1239 1474#
?C0030. . . . . . . . . . . . . . .  C ADDR   02D7H   R   SEG=?PR?MAIN?MAIN   1506 1558#
?C0031. . . . . . . . . . . . . . .  C ADDR   02D9H   R   SEG=?PR?MAIN?MAIN   1557 1560#
?C0032. . . . . . . . . . . . . . .  C ADDR   0336H   R   SEG=?PR?MAIN?MAIN   1576 1628#
?C0033. . . . . . . . . . . . . . .  C ADDR   0338H   R   SEG=?PR?MAIN?MAIN   1627 1630#
?C0034. . . . . . . . . . . . . . .  C ADDR   0395H   R   SEG=?PR?MAIN?MAIN   1645 1697#
?C0035. . . . . . . . . . . . . . .  C ADDR   0397H   R   SEG=?PR?MAIN?MAIN   1696 1699#
?C0036. . . . . . . . . . . . . . .  C ADDR   03C8H   R   SEG=?PR?MAIN?MAIN   1727 1743 1758#
?C0037. . . . . . . . . . . . . . .  C ADDR   03A1H   R   SEG=?PR?MAIN?MAIN   1713 1716#
?C0038. . . . . . . . . . . . . . .  C ADDR   03A3H   R   SEG=?PR?MAIN?MAIN   1715 1718#
?C0039. . . . . . . . . . . . . . .  C ADDR   03AAH   R   SEG=?PR?MAIN?MAIN   1719 1722#
?C0040. . . . . . . . . . . . . . .  C ADDR   03ACH   R   SEG=?PR?MAIN?MAIN   1721 1724#
?C0042. . . . . . . . . . . . . . .  C ADDR   03FAH   R   SEG=?PR?MAIN?MAIN   1762 1806#
?C0044. . . . . . . . . . . . . . .  C ADDR   03D2H   R   SEG=?PR?MAIN?MAIN   1767 1770#
?C0045. . . . . . . . . . . . . . .  C ADDR   03D4H   R   SEG=?PR?MAIN?MAIN   1769 1772#
?C0046. . . . . . . . . . . . . . .  C ADDR   03DBH   R   SEG=?PR?MAIN?MAIN   1773 1776#
?C0047. . . . . . . . . . . . . . .  C ADDR   03DDH   R   SEG=?PR?MAIN?MAIN   1775 1778#
?C0048. . . . . . . . . . . . . . .  C ADDR   03FEH   R   SEG=?PR?MAIN?MAIN   1781 1805 1809#
?C0049. . . . . . . . . . . . . . .  C ADDR   040AH   R   SEG=?PR?MAIN?MAIN   1813 1819#
?C0050. . . . . . . . . . . . . . .  C ADDR   0428H   R   SEG=?PR?MAIN?MAIN   1823 1856#
?C0052. . . . . . . . . . . . . . .  C ADDR   0419H   R   SEG=?PR?MAIN?MAIN   1834 1837#
?C0053. . . . . . . . . . . . . . .  C ADDR   041CH   R   SEG=?PR?MAIN?MAIN   1836 1840#
?C0054. . . . . . . . . . . . . . .  C ADDR   042AH   R   SEG=?PR?MAIN?MAIN   1828 1855 1858#
?C0056. . . . . . . . . . . . . . .  C ADDR   044FH   R   SEG=?PR?MAIN?MAIN   1868 1893#
?C0059. . . . . . . . . . . . . . .  C ADDR   000FH   R   SEG=?PR?_LCDOUTPUTLINE?MAIN   1933# 2002
?C0060. . . . . . . . . . . . . . .  C ADDR   005DH   R   SEG=?PR?_LCDOUTPUTLINE?MAIN   2003#
?C0061. . . . . . . . . . . . . . .  C ADDR   0054H   R   SEG=?PR?_LCDOUTPUTLINE?MAIN   1971 1978 1983 1988 1997#
?C0062. . . . . . . . . . . . . . .  C ADDR   0012H   R   SEG=?PR?_LCDOUTPUTLINE?MAIN   1940# 1959
?C0063. . . . . . . . . . . . . . .  C ADDR   0037H   R   SEG=?PR?_LCDOUTPUTLINE?MAIN   1953 1960#
?C0066. . . . . . . . . . . . . . .  C ADDR   0046H   R   SEG=?PR?_LCDOUTPUTLINE?MAIN   1976#
?C0067. . . . . . . . . . . . . . .  C ADDR   004AH   R   SEG=?PR?_LCDOUTPUTLINE?MAIN   1965 1981#
?C0068. . . . . . . . . . . . . . .  C ADDR   004EH   R   SEG=?PR?_LCDOUTPUTLINE?MAIN   1967 1986#
?C0069. . . . . . . . . . . . . . .  C ADDR   0052H   R   SEG=?PR?_LCDOUTPUTLINE?MAIN   1969 1991#
?C0072. . . . . . . . . . . . . . .  C ADDR   001CH   R   SEG=?PR?WRITEDISCRETTOEEPROM?MAIN   2083 2088#
?C0076. . . . . . . . . . . . . . .  C ADDR   00B4H   R   SEG=?PR?_OUTSYMBOL?MAIN   2219 2229 2230 2253 2279 2314
                                                            2337 2378 2404 2422 2479#
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    67

?C0077. . . . . . . . . . . . . . .  C ADDR   0048H   R   SEG=?PR?_OUTSYMBOL?MAIN   2228 2245#
?C0078. . . . . . . . . . . . . . .  C ADDR   004CH   R   SEG=?PR?_OUTSYMBOL?MAIN   2231 2256#
?C0079. . . . . . . . . . . . . . .  C ADDR   005AH   R   SEG=?PR?_OUTSYMBOL?MAIN   2232 2282#
?C0080. . . . . . . . . . . . . . .  C ADDR   005CH   R   SEG=?PR?_OUTSYMBOL?MAIN   2233 2294#
?C0081. . . . . . . . . . . . . . .  C ADDR   0068H   R   SEG=?PR?_OUTSYMBOL?MAIN   2234 2317#
?C0082. . . . . . . . . . . . . . .  C ADDR   0074H   R   SEG=?PR?_OUTSYMBOL?MAIN   2235 2340#
?C0083. . . . . . . . . . . . . . .  C ADDR   007AH   R   SEG=?PR?_OUTSYMBOL?MAIN   2236 2358#
?C0084. . . . . . . . . . . . . . .  C ADDR   0086H   R   SEG=?PR?_OUTSYMBOL?MAIN   2237 2381#
?C0085. . . . . . . . . . . . . . .  C ADDR   0094H   R   SEG=?PR?_OUTSYMBOL?MAIN   2238 2407#
?C0086. . . . . . . . . . . . . . .  C ADDR   009CH   R   SEG=?PR?_OUTSYMBOL?MAIN   2239 2425#
?C0087. . . . . . . . . . . . . . .  C ADDR   00A8H   R   SEG=?PR?_OUTSYMBOL?MAIN   2240 2453#
?C0088. . . . . . . . . . . . . . .  C ADDR   00B9H   R   SEG=?PR?_OUTSYMBOL?MAIN   2483 2485#
?C0090. . . . . . . . . . . . . . .  C ADDR   00C9H   R   SEG=?PR?_OUTSYMBOL?MAIN   2501#
?C0091. . . . . . . . . . . . . . .  C ADDR   00CCH   R   SEG=?PR?_OUTSYMBOL?MAIN   2490 2506#
?C0092. . . . . . . . . . . . . . .  C ADDR   00CFH   R   SEG=?PR?_OUTSYMBOL?MAIN   2492 2511#
?C0093. . . . . . . . . . . . . . .  C ADDR   00D2H   R   SEG=?PR?_OUTSYMBOL?MAIN   2494 2516#
?C0094. . . . . . . . . . . . . . .  C ADDR   00D4H   R   SEG=?PR?_OUTSYMBOL?MAIN   2496 2522#
?C0104. . . . . . . . . . . . . . .  C ADDR   000AH   R   SEG=?PR?_EEPROM_BYTEWRITE?MAIN   2965# 2968
?C0105. . . . . . . . . . . . . . .  C ADDR   000DH   R   SEG=?PR?_EEPROM_BYTEWRITE?MAIN   2969#
?C0107. . . . . . . . . . . . . . .  C ADDR   0004H   R   SEG=?PR?_EEPROM_BYTEREAD?MAIN   3063# 3069
?C0108. . . . . . . . . . . . . . .  C ADDR   0007H   R   SEG=?PR?_EEPROM_BYTEREAD?MAIN   3070#
?C0109. . . . . . . . . . . . . . .  C ADDR   0023H   R   SEG=?PR?_EEPROM_BYTEREAD?MAIN   3127# 3130
?C0110. . . . . . . . . . . . . . .  C ADDR   0026H   R   SEG=?PR?_EEPROM_BYTEREAD?MAIN   3131#
?C0111. . . . . . . . . . . . . . .  C ADDR   0028H   R   SEG=?PR?_EEPROM_BYTEREAD?MAIN   3139#
?C0115. . . . . . . . . . . . . . .  C ADDR   00CEH   R   SEG=?PR?SMBUS_ISR?MAIN   3339 3363 3381 3400 3414 3421 3459
                                                            3474 3497 3511 3556 3574 3587#
?C0116. . . . . . . . . . . . . . .  C ADDR   0029H   R   SEG=?PR?SMBUS_ISR?MAIN   3312#
?C0117. . . . . . . . . . . . . . .  C ADDR   003DH   R   SEG=?PR?SMBUS_ISR?MAIN   3303 3344#
?C0118. . . . . . . . . . . . . . .  C ADDR   0091H   R   SEG=?PR?SMBUS_ISR?MAIN   3347 3483#
?C0119. . . . . . . . . . . . . . .  C ADDR   004AH   R   SEG=?PR?SMBUS_ISR?MAIN   3352 3366#
?C0120. . . . . . . . . . . . . . .  C ADDR   0054H   R   SEG=?PR?SMBUS_ISR?MAIN   3370 3384#
?C0121. . . . . . . . . . . . . . .  C ADDR   0065H   R   SEG=?PR?SMBUS_ISR?MAIN   3388 3417#
?C0124. . . . . . . . . . . . . . .  C ADDR   008BH   R   SEG=?PR?SMBUS_ISR?MAIN   3431 3460#
?C0128. . . . . . . . . . . . . . .  C ADDR   0098H   R   SEG=?PR?SMBUS_ISR?MAIN   3489 3498#
?C0130. . . . . . . . . . . . . . .  C ADDR   009CH   R   SEG=?PR?SMBUS_ISR?MAIN   3301 3516#
?C0131. . . . . . . . . . . . . . .  C ADDR   00BFH   R   SEG=?PR?SMBUS_ISR?MAIN   3523 3551#
?C0133. . . . . . . . . . . . . . .  C ADDR   00CCH   R   SEG=?PR?SMBUS_ISR?MAIN   3306 3578#
?C0134. . . . . . . . . . . . . . .  C ADDR   00E1H   R   SEG=?PR?SMBUS_ISR?MAIN   3591 3619#
?C0137. . . . . . . . . . . . . . .  C ADDR   0032H   R   SEG=?PR?TIMER0_ISR?MAIN   3699# 3752
?C0138. . . . . . . . . . . . . . .  C ADDR   0073H   R   SEG=?PR?TIMER0_ISR?MAIN   3714 3753#
?C0140. . . . . . . . . . . . . . .  C ADDR   0050H   R   SEG=?PR?TIMER0_ISR?MAIN   3720 3723#
?C0141. . . . . . . . . . . . . . .  C ADDR   0052H   R   SEG=?PR?TIMER0_ISR?MAIN   3722 3725#
?C0142. . . . . . . . . . . . . . .  C ADDR   0058H   R   SEG=?PR?TIMER0_ISR?MAIN   3729 3731#
?C0143. . . . . . . . . . . . . . .  C ADDR   0079H   R   SEG=?PR?TIMER0_ISR?MAIN   3692 3762#
?C0146. . . . . . . . . . . . . . .  C ADDR   0032H   R   SEG=?PR?USB_API_TEST_ISR?MAIN   3875 3896#
?C0149. . . . . . . . . . . . . . .  C ADDR   003AH   R   SEG=?PR?USB_API_TEST_ISR?MAIN   3901 3909#
?C0151. . . . . . . . . . . . . . .  C ADDR   003AH   R   SEG=?PR?USB_API_TEST_ISR?MAIN   3920#
?C0154. . . . . . . . . . . . . . .  C ADDR   0003H   R   SEG=?PR?_DEL?MAIN   4149# 4168
?C0157. . . . . . . . . . . . . . .  C ADDR   0017H   R   SEG=?PR?_DEL?MAIN   4159 4171#
?C0158. . . . . . . . . . . . . . .  C ADDR   03B8H   R   SEG=?PR?MAIN?MAIN   1734 1736#
?C0159. . . . . . . . . . . . . . .  C ADDR   000EH   R   SEG=?PR?_OUTSYMBOL?MAIN   2216 2217#
?C0160. . . . . . . . . . . . . . .  C ADDR   0021H   R   SEG=?PR?_OUTSYMBOL?MAIN   2220 2227#
?C0161. . . . . . . . . . . . . . .  C ADDR   002AH   R   SEG=?PR?TIMER0_ISR?MAIN   3686 3688#
?C0162. . . . . . . . . . . . . . .  C ADDR   0015H   R   SEG=?PR?_DEL?MAIN   4165 4167#
?C0163. . . . . . . . . . . . . . .  C ADDR   0397H   R   SEG=?PR?MAIN?MAIN   1463 1471 1702#
?C0164. . . . . . . . . . . . . . .  C ADDR   0096H   R   SEG=?PR?_OUTSYMBOL?MAIN   2291 2415#
?C0165. . . . . . . . . . . . . . .  C ADDR   00A6H   R   SEG=?PR?_OUTSYMBOL?MAIN   2445#
?C0166. . . . . . . . . . . . . . .  C ADDR   00B0H   R   SEG=?PR?_OUTSYMBOL?MAIN   2355 2450 2470#
?C?CLDPTR . . . . . . . . . . . . .  C ADDR   -----       EXT   294# 3440
?C?CSTPTR . . . . . . . . . . . . .  C ADDR   -----       EXT   295# 3532
?C?LMUL . . . . . . . . . . . . . .  C ADDR   -----       EXT   292# 1304 1374 1444 1538 1608 1677
?C?LSHL . . . . . . . . . . . . . .  C ADDR   -----       EXT   289# 1142 1185
?C?ULCMP. . . . . . . . . . . . . .  C ADDR   -----       EXT   290# 1270 1340 1410 1504 1574 1643 2082
?C?ULDIV. . . . . . . . . . . . . .  C ADDR   -----       EXT   291# 1285 1355 1425 1487 1519 1589 1658
?C?ULSHR. . . . . . . . . . . . . .  C ADDR   -----       EXT   293# 2041 2105
?CO?MAIN. . . . . . . . . . . . . .  C SEG    004CH       REL=UNIT   284# 469
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    68

?C_INITSEG. . . . . . . . . . . . .  C SEG    002FH       REL=UNIT   283# 566
?C_STARTUP. . . . . . . . . . . . .  C ADDR   -----       EXT   288#
?DT?MAIN. . . . . . . . . . . . . .  D SEG    003CH       REL=UNIT   271# 416 419
?DT?MAIN?MAIN . . . . . . . . . . .  D SEG    0004H       REL=UNIT   245# 390
?DT?TIMER0_ISR?MAIN . . . . . . . .  D SEG    0001H       REL=UNIT   275# 378
?DT?USB_API_TEST_ISR?MAIN . . . . .  D SEG    0001H       REL=UNIT   279# 382
?DT?_EEPROM_BYTEREAD?MAIN . . . . .  D SEG    0001H       REL=UNIT   266# 412
?DT?_LCDOUTPUTLINE?MAIN . . . . . .  D SEG    0003H       REL=UNIT   248# 404
?DT?_OUTSYMBOL?MAIN . . . . . . . .  D SEG    0002H       REL=UNIT   254# 398
?MAIN?BIT . . . . . . . . . . . . .  B ADDR   0000H.0 R   SEG=?BI?MAIN?MAIN   395#
?MAIN?BYTE. . . . . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?MAIN?MAIN   391#
?PR?DEL_100MS?MAIN. . . . . . . . .  C SEG    0022H       REL=UNIT   281# 4078
?PR?DEL_500MKS?MAIN . . . . . . . .  C SEG    001CH       REL=UNIT   280# 3969
?PR?EXT_INTERRUPT_INIT?MAIN . . . .  C SEG    001AH       REL=UNIT   263# 2889
?PR?INITIALIZE?MAIN . . . . . . . .  C SEG    0015H       REL=UNIT   256# 2585
?PR?INT0_ISR?MAIN . . . . . . . . .  C SEG    001EH       REL=UNIT   268# 3199
?PR?INT1_ISR?MAIN . . . . . . . . .  C SEG    0021H       REL=UNIT   269# 3232
?PR?LEDSSWITCHOFF?MAIN. . . . . . .  C SEG    0019H       REL=UNIT   255# 2529
?PR?MAIN?MAIN . . . . . . . . . . .  C SEG    0454H       REL=UNIT   244# 931
?PR?OSCILLATOR_INIT?MAIN. . . . . .  C SEG    0007H       REL=UNIT   257# 2619
?PR?OUTPUTBUFFERTORESETCOUNTER?MAIN  C SEG    0024H       REL=UNIT   252# 2164
?PR?PORT_INIT?MAIN. . . . . . . . .  C SEG    002BH       REL=UNIT   261# 2802
?PR?RESETCOUNTERTOOUTPUTBUFFER?MAIN  C SEG    0025H       REL=UNIT   251# 2126
?PR?SMBUS_INIT?MAIN . . . . . . . .  C SEG    0007H       REL=UNIT   262# 2864
?PR?SMBUS_ISR?MAIN. . . . . . . . .  C SEG    00F2H       REL=UNIT   270# 3270
?PR?SUSPEND_DEVICE?MAIN . . . . . .  C SEG    0003H       REL=UNIT   267# 3146
?PR?TIMER0_INIT?MAIN. . . . . . . .  C SEG    000FH       REL=UNIT   258# 2664
?PR?TIMER0_ISR?MAIN . . . . . . . .  C SEG    0094H       REL=UNIT   274# 3649
?PR?TIMER1_INIT?MAIN. . . . . . . .  C SEG    000FH       REL=UNIT   259# 2700
?PR?TIMER2_ISR?MAIN . . . . . . . .  C SEG    0005H       REL=UNIT   276# 3790
?PR?TIMER3_INIT?MAIN. . . . . . . .  C SEG    0019H       REL=UNIT   260# 2741
?PR?TIMER3_ISR?MAIN . . . . . . . .  C SEG    000CH       REL=UNIT   277# 3819
?PR?USB_API_TEST_ISR?MAIN . . . . .  C SEG    0055H       REL=UNIT   278# 3847
?PR?WRITECOUNTERTOEEPROM?MAIN . . .  C SEG    0027H       REL=UNIT   249# 2018
?PR?WRITEDISCRETTOEEPROM?MAIN . . .  C SEG    0043H       REL=UNIT   250# 2062
?PR?_DEL?MAIN . . . . . . . . . . .  C SEG    0018H       REL=UNIT   282# 4135
?PR?_EEPROM_BYTEREAD?MAIN . . . . .  C SEG    0029H       REL=UNIT   265# 3054
?PR?_EEPROM_BYTEWRITE?MAIN. . . . .  C SEG    002CH       REL=UNIT   264# 2950
?PR?_LCDOUTPUTLINE?MAIN . . . . . .  C SEG    0063H       REL=UNIT   247# 1907
?PR?_OUTSYMBOL?MAIN . . . . . . . .  C SEG    00D5H       REL=UNIT   253# 2200
?SMBUS_ISR?BIT. . . . . . . . . . .  B ADDR   0000H.0 R   SEG=?BI?SMBUS_ISR?MAIN   387#
?TIMER0_ISR?BYTE. . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?TIMER0_ISR?MAIN   379#
?USB_API_TEST_ISR?BYTE. . . . . . .  D ADDR   0000H   R   SEG=?DT?USB_API_TEST_ISR?MAIN   383#
?_EEPROM_BYTEREAD?BYTE. . . . . . .  D ADDR   0000H   R   SEG=?DT?_EEPROM_BYTEREAD?MAIN   413#
?_LCDOUTPUTLINE?BYTE. . . . . . . .  D ADDR   0000H   R   SEG=?DT?_LCDOUTPUTLINE?MAIN   405#
?_OUTSYMBOL?BYTE. . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?_OUTSYMBOL?MAIN   399#
AC. . . . . . . . . . . . . . . . .  B ADDR   00D0H.6 A      22#
ACC . . . . . . . . . . . . . . . .  D ADDR   00E0H   A      149# 3202 3223 3235 3256 3273 3633 3652 3775 3850 3875
                                                            3901 3933
ACK . . . . . . . . . . . . . . . .  B ADDR   00C0H.1 A      175# 3347 3546 3564 3608
ACKRQ . . . . . . . . . . . . . . .  B ADDR   00C0H.3 A      224#
AD0BUSY . . . . . . . . . . . . . .  B ADDR   00E8H.4 A      238#
AD0CM0. . . . . . . . . . . . . . .  B ADDR   00E8H.0 A      230#
AD0CM1. . . . . . . . . . . . . . .  B ADDR   00E8H.1 A      233#
AD0CM2. . . . . . . . . . . . . . .  B ADDR   00E8H.2 A      235#
AD0EN . . . . . . . . . . . . . . .  B ADDR   00E8H.7 A      151#
AD0INT. . . . . . . . . . . . . . .  B ADDR   00E8H.5 A      91#
AD0TM . . . . . . . . . . . . . . .  B ADDR   00E8H.6 A      188#
AD0WINT . . . . . . . . . . . . . .  B ADDR   00E8H.3 A      237#
ADC0. . . . . . . . . . . . . . . .  D ADDR   00BDH   A      236#
ADC0CF. . . . . . . . . . . . . . .  D ADDR   00BCH   A      19#
ADC0CN. . . . . . . . . . . . . . .  D ADDR   00E8H   A      37#
ADC0GT. . . . . . . . . . . . . . .  D ADDR   00C3H   A      60#
ADC0GTH . . . . . . . . . . . . . .  D ADDR   00C4H   A      195#
ADC0GTL . . . . . . . . . . . . . .  D ADDR   00C3H   A      197#
ADC0H . . . . . . . . . . . . . . .  D ADDR   00BEH   A      143#
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    69

ADC0L . . . . . . . . . . . . . . .  D ADDR   00BDH   A      147#
ADC0LT. . . . . . . . . . . . . . .  D ADDR   00C5H   A      77#
ADC0LTH . . . . . . . . . . . . . .  D ADDR   00C6H   A      201#
ADC0LTL . . . . . . . . . . . . . .  D ADDR   00C5H   A      208#
AMX0N . . . . . . . . . . . . . . .  D ADDR   00BAH   A      207#
AMX0P . . . . . . . . . . . . . . .  D ADDR   00BBH   A      209#
AR0 . . . . . . . . . . . . . . . .  D ADDR   0000H   A      3658 3770 3856 3928
AR1 . . . . . . . . . . . . . . . .  D ADDR   0001H   A      3278 3629 3659 3769 3857 3927
AR2 . . . . . . . . . . . . . . . .  D ADDR   0002H   A      3279 3628 3660 3768 3858 3926
AR3 . . . . . . . . . . . . . . . .  D ADDR   0003H   A      3280 3627 3661 3767 3859 3925
AR4 . . . . . . . . . . . . . . . .  D ADDR   0004H   A      1307 1377 1447 1541 1611 1680 3662 3766 3860 3924
AR5 . . . . . . . . . . . . . . . .  D ADDR   0005H   A      1306 1376 1446 1540 1610 1679 3663 3765 3861 3923
AR6 . . . . . . . . . . . . . . . .  D ADDR   0006H   A      1305 1375 1445 1539 1609 1678 2961 3060 3664 3764 3862
                                                            3922
AR7 . . . . . . . . . . . . . . . .  D ADDR   0007H   A      2042 2106 2960 3059 3665 3763 3863 3921
ARBLOST . . . . . . . . . . . . . .  B ADDR   00C0H.2 A      76#
B . . . . . . . . . . . . . . . . .  D ADDR   00F0H   A      142# 1942 1948 2221 2224 3653 3774 3851 3932
CCF0. . . . . . . . . . . . . . . .  B ADDR   00D8H.0 A      240#
CCF1. . . . . . . . . . . . . . . .  B ADDR   00D8H.1 A      243#
CCF2. . . . . . . . . . . . . . . .  B ADDR   00D8H.2 A      9#
CCF3. . . . . . . . . . . . . . . .  B ADDR   00D8H.3 A      12#
CCF4. . . . . . . . . . . . . . . .  B ADDR   00D8H.4 A      15#
CF. . . . . . . . . . . . . . . . .  B ADDR   00D8H.7 A      34#
CKCON . . . . . . . . . . . . . . .  D ADDR   008EH   A      218# 2687 2709 2754
CLKMUL. . . . . . . . . . . . . . .  D ADDR   00B9H   A      157#
CLKSEL. . . . . . . . . . . . . . .  D ADDR   00A9H   A      141#
COUNTER . . . . . . . . . . . . . .  D ADDR   0022H   R   SEG=?DT?MAIN   303 441# 572 1122 1123 1124 1125 1132 1133
                                                            1134 1135 1138 1139 1140 1143 1144 1145 1146 1152 1154
                                                            1155 1156 1157 1158 1159 1160 1252 1254 1483 1484 1485
                                                            1486 1786 1788 1790 1791 1793 1794 1796 1797 1815 1816
                                                            1817 1818 1873 1874 1875 1876 2028 2036 2037 2038 2039
                                                            3208 3210 3212 3213 3215 3216 3218 3219 3241 3243 3244
                                                            3246 3247 3249 3250 3252
CPT0CN. . . . . . . . . . . . . . .  D ADDR   009BH   A      104#
CPT0MD. . . . . . . . . . . . . . .  D ADDR   009DH   A      103#
CPT0MX. . . . . . . . . . . . . . .  D ADDR   009FH   A      137#
CPT1CN. . . . . . . . . . . . . . .  D ADDR   009AH   A      107#
CPT1MD. . . . . . . . . . . . . . .  D ADDR   009CH   A      106#
CPT1MX. . . . . . . . . . . . . . .  D ADDR   009EH   A      140#
CR. . . . . . . . . . . . . . . . .  B ADDR   00D8H.6 A      57#
CY. . . . . . . . . . . . . . . . .  B ADDR   00D0H.7 A      81#
DELAY?143 . . . . . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?_LCDOUTPUTLINE?MAIN   406# 1911 1941
DEL_100MS . . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?DEL_100MS?MAIN   349 4079#
DEL_500MKS. . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?DEL_500MKS?MAIN   350 1954 1955 1956 1957 3970#
DEVICE_NAME_STR . . . . . . . . . .  C ADDR   003CH   R   SEG=?CO?MAIN   339 543#
DEVICE_SN_STR . . . . . . . . . . .  C ADDR   0042H   R   SEG=?CO?MAIN   338 551#
DISCRET . . . . . . . . . . . . . .  D ADDR   001EH   R   SEG=?DT?MAIN   308 440# 1165 1166 1167 1168 1175 1176 1177
                                                            1178 1181 1182 1183 1186 1187 1188 1189 1195 1197 1198
                                                            1199 1200 1201 1202 1203 1479 1480 1481 1482 1873 1874
                                                            1875 1876 2077 2078 2079 2080 2084 2085 2086 2087 2092
                                                            2100 2101 2102 2103
DP. . . . . . . . . . . . . . . . .  D ADDR   0082H   A      55#
DPH . . . . . . . . . . . . . . . .  D ADDR   0083H   A      194# 2223 2225 3274 3632 3654 3773 3852 3931
DPL . . . . . . . . . . . . . . . .  D ADDR   0082H   A      196# 3275 3631 3655 3772 3853 3930
EA. . . . . . . . . . . . . . . . .  B ADDR   00A8H.7 A      26# 1032
EEPROM_SCL. . . . . . . . . . . . .  B ADDR   0080H.1 A      40# 984 996 1000
EEPROM_SDA. . . . . . . . . . . . .  B ADDR   0080H.0 A      21# 973
EIE1. . . . . . . . . . . . . . . .  D ADDR   00E6H   A      25# 1029 2766
EIE2. . . . . . . . . . . . . . . .  D ADDR   00E7H   A      28#
EIP1. . . . . . . . . . . . . . . .  D ADDR   00F6H   A      47#
EIP2. . . . . . . . . . . . . . . .  D ADDR   00F7H   A      50#
EMI0CF. . . . . . . . . . . . . . .  D ADDR   0085H   A      65#
EMI0CN. . . . . . . . . . . . . . .  D ADDR   00AAH   A      87#
EMI0TC. . . . . . . . . . . . . . .  D ADDR   0084H   A      93#
ENCDATA . . . . . . . . . . . . . .  D ADDR   0005H   R   SEG=?DT?MAIN   330 423#
ENCMINUS. . . . . . . . . . . . . .  D ADDR   000EH   R   SEG=?DT?MAIN   431#
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    70

ENCN. . . . . . . . . . . . . . . .  D ADDR   0026H   R   SEG=?DT?MAIN   302 442# 598
ENCOLD. . . . . . . . . . . . . . .  D ADDR   0015H   R   SEG=?DT?MAIN   314 436# 602
ENCPLUS . . . . . . . . . . . . . .  D ADDR   001AH   R   SEG=?DT?MAIN   438#
ENCSTATE. . . . . . . . . . . . . .  D ADDR   0007H   R   SEG=?DT?MAIN   326 425#
ENCTEMP . . . . . . . . . . . . . .  D ADDR   0013H   R   SEG=?DT?MAIN   316 434#
ES0 . . . . . . . . . . . . . . . .  B ADDR   00A8H.4 A      150#
ESPI0 . . . . . . . . . . . . . . .  B ADDR   00A8H.6 A      199#
ET0 . . . . . . . . . . . . . . . .  B ADDR   00A8H.1 A      152# 1035 1920 2006
ET1 . . . . . . . . . . . . . . . .  B ADDR   00A8H.3 A      154#
ET2 . . . . . . . . . . . . . . . .  B ADDR   00A8H.5 A      158# 3800
EX0 . . . . . . . . . . . . . . . .  B ADDR   00A8H.0 A      164# 2922
EX1 . . . . . . . . . . . . . . . .  B ADDR   00A8H.2 A      171# 2925
EXT_INT0. . . . . . . . . . . . . .  B ADDR   0080H.4 A      213#
EXT_INT1. . . . . . . . . . . . . .  B ADDR   0080H.5 A      216#
EXT_INTERRUPT_INIT. . . . . . . . .  C ADDR   0000H   R   SEG=?PR?EXT_INTERRUPT_INIT?MAIN   361 2612 2890#
F0. . . . . . . . . . . . . . . . .  B ADDR   00D0H.5 A      227#
F1. . . . . . . . . . . . . . . . .  B ADDR   00D0H.1 A      231#
FAIL?2154 . . . . . . . . . . . . .  B ADDR   0000H.0 R   SEG=?BI?SMBUS_ISR?MAIN   388# 3286 3504 3581 3591 3616
FLAG. . . . . . . . . . . . . . . .  D ADDR   0037H   R   SEG=?DT?MAIN   297 445# 568
FLAG1 . . . . . . . . . . . . . . .  B ADDR   0001H.1 R   SEG=?BI?MAIN   317 458# 575
FLAGPOINT . . . . . . . . . . . . .  B ADDR   0000H.3 R   SEG=?BI?MAIN   333 452# 577 1232 2483 3721 3724 3730
FLKEY . . . . . . . . . . . . . . .  D ADDR   00B7H   A      242#
FLSCL . . . . . . . . . . . . . . .  D ADDR   00B6H   A      228#
GET_INTERRUPT_SOURCE. . . . . . . .  C ADDR   -----       EXT   285# 3869
HIGH? . . . . . . . . . . . . . . .  D ADDR   0003H   R   SEG=?DT?MAIN   336 421#
I?144 . . . . . . . . . . . . . . .  D ADDR   0001H   R   SEG=?DT?_LCDOUTPUTLINE?MAIN   408# 1932 1963 1998 1999
I?2155. . . . . . . . . . . . . . .  D ADDR   0002H   R   SEG=?DT?MAIN   420# 3336 3428 3456 3520 3543 3555
I?2257. . . . . . . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?TIMER0_ISR?MAIN   380# 3698 3707 3719 3734 3738
                                                            3751
IE. . . . . . . . . . . . . . . . .  D ADDR   00A8H   A      42#
IE0 . . . . . . . . . . . . . . . .  B ADDR   0088H.1 A      136#
IE1 . . . . . . . . . . . . . . . .  B ADDR   0088H.3 A      138#
INITIALIZE. . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITIALIZE?MAIN   368 947 2586#
INT0_ISR. . . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INT0_ISR?MAIN   357 3166 3201#
INT1_ISR. . . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INT1_ISR?MAIN   356 3228 3234#
INTVAL?2559 . . . . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?USB_API_TEST_ISR?MAIN   384# 3870 3874 3900
IN_PACKET . . . . . . . . . . . . .  D ADDR   0027H   R   SEG=?DT?MAIN   299 443# 3881 3882
IP. . . . . . . . . . . . . . . . .  D ADDR   00B8H   A      75# 2896
IT0 . . . . . . . . . . . . . . . .  B ADDR   0088H.0 A      166#
IT01CF. . . . . . . . . . . . . . .  D ADDR   00E4H   A      35# 2903 2908 2911 2915 2918
IT1 . . . . . . . . . . . . . . . .  B ADDR   0088H.2 A      172#
KEYFLAG1. . . . . . . . . . . . . .  B ADDR   0001H.5 R   SEG=?BI?MAIN   307 462# 579 1773 1800 1807
KEYFLAG2. . . . . . . . . . . . . .  B ADDR   0001H.6 R   SEG=?BI?MAIN   306 463# 581
KEYFLAG3. . . . . . . . . . . . . .  B ADDR   0001H.7 R   SEG=?BI?MAIN   305 464# 583 1828 1850 1857
KEYFLAG4. . . . . . . . . . . . . .  B ADDR   0002H.0 R   SEG=?BI?MAIN   304 465# 585 1868 1889 1894
KEY_INCREMENT . . . . . . . . . . .  B ADDR   00A0H.4 A      223# 1762
KEY_MODE. . . . . . . . . . . . . .  B ADDR   00A0H.3 A      219# 1823
KEY_RESET . . . . . . . . . . . . .  B ADDR   00A0H.2 A      173# 1719 1813
KEY_STORE . . . . . . . . . . . . .  B ADDR   00A0H.1 A      192# 1862
L?0167. . . . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?_EEPROM_BYTEWRITE?MAIN   1222 1847 2951#
LCDMODE . . . . . . . . . . . . . .  D ADDR   0008H   R   SEG=?DT?MAIN   325 426# 594 1210 1214 1219 1236 1833 1835
                                                            1839 2953 3700 3728
LCD_STRING. . . . . . . . . . . . .  C ADDR   0046H   R   SEG=?CO?MAIN   337 557#
LED1. . . . . . . . . . . . . . . .  B ADDR   00A0H.0 A      30# 967 1025 1977 2502 2536
LED2. . . . . . . . . . . . . . . .  B ADDR   0080H.5 A      31# 1982 2507 2539
LED3. . . . . . . . . . . . . . . .  B ADDR   0080H.7 A      33# 1987 2512 2542
LED4. . . . . . . . . . . . . . . .  B ADDR   0080H.6 A      36# 1992 2517 2545
LEDNUMBER?648 . . . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?_OUTSYMBOL?MAIN   400# 2204 2488
LEDSSWITCHOFF . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?LEDSSWITCHOFF?MAIN   369 960 1924 2051 2115 2210
                                                            2530#
LONGKEYFLAG . . . . . . . . . . . .  B ADDR   0001H.2 R   SEG=?BI?MAIN   313 459# 587 1713 1748 1767 1808
LONGKEYFLAGCOUNTER. . . . . . . . .  D ADDR   000BH   R   SEG=?DT?MAIN   321 429# 590 1732 1733 1735 1741 1752 1753
LOW?. . . . . . . . . . . . . . . .  D ADDR   0014H   R   SEG=?DT?MAIN   315 435#
LOW_COUNTER?2258. . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?MAIN   417# 613 3683 3684 3685 3687 3756 3757
MAIN. . . . . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?MAIN?MAIN   7 376 932#
MASTER. . . . . . . . . . . . . . .  B ADDR   00C0H.7 A      170#
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    71

MCE0. . . . . . . . . . . . . . . .  B ADDR   0098H.5 A      27#
MODF. . . . . . . . . . . . . . . .  B ADDR   00F8H.5 A      97#
NEW . . . . . . . . . . . . . . . .  D ADDR   0012H   R   SEG=?DT?MAIN   433#
NOW_A . . . . . . . . . . . . . . .  B ADDR   0000H.5 R   SEG=?BI?MAIN   329 454#
NOW_B . . . . . . . . . . . . . . .  B ADDR   0000H.6 R   SEG=?BI?MAIN   327 455#
NSSMD0. . . . . . . . . . . . . . .  B ADDR   00F8H.2 A      121#
NSSMD1. . . . . . . . . . . . . . .  B ADDR   00F8H.3 A      123#
OLDSTATE. . . . . . . . . . . . . .  D ADDR   000DH   R   SEG=?DT?MAIN   319 430#
OSCICL. . . . . . . . . . . . . . .  D ADDR   00B3H   A      139#
OSCICN. . . . . . . . . . . . . . .  D ADDR   00B2H   A      144# 2644
OSCILLATOR_INIT . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?OSCILLATOR_INIT?MAIN   367 2596 2620#
OSCLCN. . . . . . . . . . . . . . .  D ADDR   0086H   A      145#
OSCXCN. . . . . . . . . . . . . . .  D ADDR   00B1H   A      176#
OUTPUTBUFFER. . . . . . . . . . . .  D ADDR   0031H   R   SEG=?DT?MAIN   298 444# 1049 1053 1062 1065 1069 1078 1081
                                                            1085 1094 1097 1101 1292 1325 1362 1395 1432 1465 1526
                                                            1559 1596 1629 1665 1698 1703 2137 2143 2149 2155 2172
                                                            2178 2184 2190 3737
OUTPUTBUFFERTORESETCOUNTER. . . . .  C ADDR   0000H   R   SEG=?PR?OUTPUTBUFFERTORESETCOUNTER?MAIN   371 1111 2165#
OV. . . . . . . . . . . . . . . . .  B ADDR   00D0H.2 A      94#
P . . . . . . . . . . . . . . . . .  B ADDR   00D0H.0 A      174#
P0. . . . . . . . . . . . . . . . .  D ADDR   0080H   A      13# 2841 2844
P0MDIN. . . . . . . . . . . . . . .  D ADDR   00F1H   A      102#
P0MDOUT . . . . . . . . . . . . . .  D ADDR   00A4H   A      38# 2809 2812
P0SKIP. . . . . . . . . . . . . . .  D ADDR   00D4H   A      126#
P1. . . . . . . . . . . . . . . . .  D ADDR   0090H   A      16#
P1MDIN. . . . . . . . . . . . . . .  D ADDR   00F2H   A      105#
P1MDOUT . . . . . . . . . . . . . .  D ADDR   00A5H   A      39# 2815
P1SKIP. . . . . . . . . . . . . . .  D ADDR   00D5H   A      130#
P2. . . . . . . . . . . . . . . . .  D ADDR   00A0H   A      17# 2838
P2MDIN. . . . . . . . . . . . . . .  D ADDR   00F3H   A      108#
P2MDOUT . . . . . . . . . . . . . .  D ADDR   00A6H   A      43# 2819 2822 2825 2828 2831 2834
P2SKIP. . . . . . . . . . . . . . .  D ADDR   00D6H   A      132#
P3. . . . . . . . . . . . . . . . .  D ADDR   00B0H   A      20#
P3MDIN. . . . . . . . . . . . . . .  D ADDR   00F4H   A      110#
P3MDOUT . . . . . . . . . . . . . .  D ADDR   00A7H   A      45#
P3SKIP. . . . . . . . . . . . . . .  D ADDR   00DFH   A      134#
P4. . . . . . . . . . . . . . . . .  D ADDR   00C7H   A      23#
P4MDIN. . . . . . . . . . . . . . .  D ADDR   00F5H   A      111#
P4MDOUT . . . . . . . . . . . . . .  D ADDR   00AEH   A      48#
PCA0. . . . . . . . . . . . . . . .  D ADDR   00F9H   A      24#
PCA0CN. . . . . . . . . . . . . . .  D ADDR   00D8H   A      69#
PCA0CP0 . . . . . . . . . . . . . .  D ADDR   00FBH   A      153#
PCA0CP1 . . . . . . . . . . . . . .  D ADDR   00E9H   A      156#
PCA0CP2 . . . . . . . . . . . . . .  D ADDR   00EBH   A      161#
PCA0CP3 . . . . . . . . . . . . . .  D ADDR   00EDH   A      162#
PCA0CP4 . . . . . . . . . . . . . .  D ADDR   00FDH   A      167#
PCA0CPH0. . . . . . . . . . . . . .  D ADDR   00FCH   A      51#
PCA0CPH1. . . . . . . . . . . . . .  D ADDR   00EAH   A      53#
PCA0CPH2. . . . . . . . . . . . . .  D ADDR   00ECH   A      56#
PCA0CPH3. . . . . . . . . . . . . .  D ADDR   00EEH   A      61#
PCA0CPH4. . . . . . . . . . . . . .  D ADDR   00FEH   A      63#
PCA0CPL0. . . . . . . . . . . . . .  D ADDR   00FBH   A      64#
PCA0CPL1. . . . . . . . . . . . . .  D ADDR   00E9H   A      66#
PCA0CPL2. . . . . . . . . . . . . .  D ADDR   00EBH   A      70#
PCA0CPL3. . . . . . . . . . . . . .  D ADDR   00EDH   A      73#
PCA0CPL4. . . . . . . . . . . . . .  D ADDR   00FDH   A      78#
PCA0CPM0. . . . . . . . . . . . . .  D ADDR   00DAH   A      67#
PCA0CPM1. . . . . . . . . . . . . .  D ADDR   00DBH   A      71#
PCA0CPM2. . . . . . . . . . . . . .  D ADDR   00DCH   A      74#
PCA0CPM3. . . . . . . . . . . . . .  D ADDR   00DDH   A      79#
PCA0CPM4. . . . . . . . . . . . . .  D ADDR   00DEH   A      80#
PCA0H . . . . . . . . . . . . . . .  D ADDR   00FAH   A      168#
PCA0L . . . . . . . . . . . . . . .  D ADDR   00F9H   A      178#
PCA0MD. . . . . . . . . . . . . . .  D ADDR   00D9H   A      68# 944
PCON. . . . . . . . . . . . . . . .  D ADDR   0087H   A      114#
PFE0CN. . . . . . . . . . . . . . .  D ADDR   00AFH   A      86#
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    72

PORT_INIT . . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?PORT_INIT?MAIN   363 2593 2803#
PRE_A . . . . . . . . . . . . . . .  B ADDR   0000H.2 R   SEG=?BI?MAIN   334 451#
PRE_B . . . . . . . . . . . . . . .  B ADDR   0000H.4 R   SEG=?BI?MAIN   332 453#
PS0 . . . . . . . . . . . . . . . .  B ADDR   00B8H.4 A      181#
PSCTL . . . . . . . . . . . . . . .  D ADDR   008FH   A      32#
PSMB_DATA_IN. . . . . . . . . . . .  D ADDR   001BH   R   SEG=?DT?MAIN   311 439# 3115 3116 3117 3528 3529 3530 3536
                                                            3537 3539 3540
PSMB_DATA_OUT . . . . . . . . . . .  D ADDR   000FH   R   SEG=?DT?MAIN   318 432# 3019 3020 3021 3437 3438 3439 3447
                                                            3448 3450 3451
PSPI0 . . . . . . . . . . . . . . .  B ADDR   00B8H.6 A      211#
PSW . . . . . . . . . . . . . . . .  D ADDR   00D0H   A      239# 3203 3222 3236 3255 3276 3277 3630 3656 3657 3771
                                                            3854 3855 3929
PT0 . . . . . . . . . . . . . . . .  B ADDR   00B8H.1 A      182#
PT1 . . . . . . . . . . . . . . . .  B ADDR   00B8H.3 A      184#
PT2 . . . . . . . . . . . . . . . .  B ADDR   00B8H.5 A      186#
PX0 . . . . . . . . . . . . . . . .  B ADDR   00B8H.0 A      191#
PX1 . . . . . . . . . . . . . . . .  B ADDR   00B8H.2 A      193#
RB80. . . . . . . . . . . . . . . .  B ADDR   0098H.2 A      241#
REF0CN. . . . . . . . . . . . . . .  D ADDR   00D1H   A      89#
REG0CN. . . . . . . . . . . . . . .  D ADDR   00C9H   A      90#
REN0. . . . . . . . . . . . . . . .  B ADDR   0098H.4 A      62#
RESETCOUNTERTOOUTPUTBUFFER. . . . .  C ADDR   0000H   R   SEG=?PR?RESETCOUNTERTOOUTPUTBUFFER?MAIN   372 1044 2127#
RETVAL?1753 . . . . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?_EEPROM_BYTEREAD?MAIN   414# 3116 3117 3135
RI0 . . . . . . . . . . . . . . . .  B ADDR   0098H.0 A      159#
ROTATE. . . . . . . . . . . . . . .  B ADDR   0002H.2 R   SEG=?BI?MAIN   300 467#
RS0 . . . . . . . . . . . . . . . .  B ADDR   00D0H.3 A      183#
RS1 . . . . . . . . . . . . . . . .  B ADDR   00D0H.4 A      185#
RSTSRC. . . . . . . . . . . . . . .  D ADDR   00EFH   A      202# 2647
RXOVRN. . . . . . . . . . . . . . .  B ADDR   00F8H.4 A      221#
S0MODE. . . . . . . . . . . . . . .  B ADDR   0098H.7 A      100#
SBCON1. . . . . . . . . . . . . . .  D ADDR   00ACH   A      99#
SBRL1 . . . . . . . . . . . . . . .  D ADDR   00B4H   A      204#
SBRLH1. . . . . . . . . . . . . . .  D ADDR   00B5H   A      112#
SBRLL1. . . . . . . . . . . . . . .  D ADDR   00B4H   A      115#
SBUF0 . . . . . . . . . . . . . . .  D ADDR   0099H   A      198#
SBUF1 . . . . . . . . . . . . . . .  D ADDR   00D3H   A      200#
SCON0 . . . . . . . . . . . . . . .  D ADDR   0098H   A      203#
SCON1 . . . . . . . . . . . . . . .  D ADDR   00D2H   A      206#
SEGMENT_A . . . . . . . . . . . . .  B ADDR   0090H.6 A      120# 964 1022 2261 2299 2322 2363 2386 2412 2430 2458
                                                            2549
SEGMENT_B . . . . . . . . . . . . .  B ADDR   0090H.5 A      122# 2264 2302 2325 2345 2416 2433 2461 2552
SEGMENT_C . . . . . . . . . . . . .  B ADDR   0090H.1 A      125# 2267 2328 2348 2372 2401 2419 2436 2464 2555
SEGMENT_D . . . . . . . . . . . . .  B ADDR   0090H.3 A      128# 2270 2311 2331 2375 2398 2439 2467 2558
SEGMENT_E . . . . . . . . . . . . .  B ADDR   0090H.4 A      131# 2273 2308 2395 2442 2561
SEGMENT_F . . . . . . . . . . . . .  B ADDR   0090H.7 A      133# 2276 2366 2389 2471 2564
SEGMENT_G . . . . . . . . . . . . .  B ADDR   0090H.2 A      135# 1927 2250 2305 2334 2369 2392 2474 2567
SEGMENT_POINT . . . . . . . . . . .  B ADDR   0090H.0 A      18# 2484 2570
SEND_START?2156 . . . . . . . . . .  B ADDR   0000H.0 R   SEG=?BI?MAIN   449# 610 3352 3360 3405
SI. . . . . . . . . . . . . . . . .  B ADDR   00C0H.0 A      82# 3623
SMB0CF. . . . . . . . . . . . . . .  D ADDR   00C1H   A      84# 2871 2880 3596 3599 3826 3829
SMB0CN. . . . . . . . . . . . . . .  D ADDR   00C0H   A      95# 3297
SMB0DAT . . . . . . . . . . . . . .  D ADDR   00C2H   A      212# 3315 3318 3325 3378 3396 3441 3531
SMBUS_INIT. . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?SMBUS_INIT?MAIN   362 2609 2865#
SMBUS_ISR . . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?SMBUS_ISR?MAIN   355 3261 3272#
SMB_ACKPOLL . . . . . . . . . . . .  B ADDR   0001H.3 R   SEG=?BI?MAIN   310 460# 3004 3109 3489
SMB_BUSY. . . . . . . . . . . . . .  B ADDR   0000H.1 R   SEG=?BI?MAIN   335 450# 608 2968 2972 3069 3073 3130 3469
                                                            3561 3612 3835
SMB_DATA_LEN. . . . . . . . . . . .  D ADDR   000AH   R   SEG=?DT?MAIN   322 428#
SMB_RANDOMREAD. . . . . . . . . . .  B ADDR   0001H.0 R   SEG=?BI?MAIN   320 457# 3000 3106 3400
SMB_RW. . . . . . . . . . . . . . .  B ADDR   0002H.1 R   SEG=?BI?MAIN   301 466# 2993 3099 3322 3408 3421
SMB_SENDWORDADDR_HIGH . . . . . . .  B ADDR   0001H.4 R   SEG=?BI?MAIN   309 461# 2986 3088 3370 3375
SMB_SENDWORDADDR_LOW. . . . . . . .  B ADDR   0000H.7 R   SEG=?BI?MAIN   324 456# 2996 3096 3388 3393
SMB_SINGLEBYTE_OUT. . . . . . . . .  D ADDR   0006H   R   SEG=?DT?MAIN   328 424# 3012 3020 3021
SMOD1 . . . . . . . . . . . . . . .  D ADDR   00E5H   A      205#
SP. . . . . . . . . . . . . . . . .  D ADDR   0081H   A      92#
SPI0CFG . . . . . . . . . . . . . .  D ADDR   00A1H   A      215#
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    73

SPI0CKR . . . . . . . . . . . . . .  D ADDR   00A2H   A      11#
SPI0CN. . . . . . . . . . . . . . .  D ADDR   00F8H   A      113#
SPI0DAT . . . . . . . . . . . . . .  D ADDR   00A3H   A      234#
SPIEN . . . . . . . . . . . . . . .  B ADDR   00F8H.0 A      14#
SPIF. . . . . . . . . . . . . . . .  B ADDR   00F8H.7 A      116#
STA . . . . . . . . . . . . . . . .  B ADDR   00C0H.5 A      210# 3029 3126 3333 3357 3494 3602
STEP. . . . . . . . . . . . . . . .  D ADDR   0009H   R   SEG=?DT?MAIN   323 427#
STO . . . . . . . . . . . . . . . .  B ADDR   00C0H.4 A      232# 3466 3568 3605
SUSPEND_DEVICE. . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?SUSPEND_DEVICE?MAIN   358 3147# 3906
SYMBOLCODE?649. . . . . . . . . . .  D ADDR   0001H   R   SEG=?DT?_OUTSYMBOL?MAIN   402# 2205 2214
T2CE. . . . . . . . . . . . . . . .  B ADDR   00C8H.4 A      44#
T2CSS . . . . . . . . . . . . . . .  B ADDR   00C8H.1 A      220#
T2SPLIT . . . . . . . . . . . . . .  B ADDR   00C8H.3 A      58#
T2XCLK. . . . . . . . . . . . . . .  B ADDR   00C8H.0 A      129#
TB80. . . . . . . . . . . . . . . .  B ADDR   0098H.3 A      10#
TCON. . . . . . . . . . . . . . . .  D ADDR   0088H   A      118# 1917 2009 2691 2900
TEMP?042. . . . . . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?MAIN?MAIN   392# 1286 1287 1288 1289 1300 1301 1302
                                                            1303 1356 1357 1358 1359 1370 1371 1372 1373 1426 1427
                                                            1428 1429 1440 1441 1442 1443 1520 1521 1522 1523 1534
                                                            1535 1536 1537 1590 1591 1592 1593 1604 1605 1606 1607
                                                            1659 1660 1661 1662 1673 1674 1675 1676
TEMPCOUNTER . . . . . . . . . . . .  D ADDR   0038H   R   SEG=?DT?MAIN   296 446# 1253 1255 1257 1258 1265 1266 1267
                                                            1268 1281 1282 1283 1284 1309 1311 1312 1314 1315 1317
                                                            1318 1320 1335 1336 1337 1338 1351 1352 1353 1354 1379
                                                            1381 1382 1384 1385 1387 1388 1390 1405 1406 1407 1408
                                                            1421 1422 1423 1424 1449 1451 1452 1454 1455 1457 1458
                                                            1460 1488 1489 1490 1491 1499 1500 1501 1502 1515 1516
                                                            1517 1518 1543 1545 1546 1548 1549 1551 1552 1554 1569
                                                            1570 1571 1572 1585 1586 1587 1588 1613 1615 1616 1618
                                                            1619 1621 1622 1624 1638 1639 1640 1641 1654 1655 1656
                                                            1657 1682 1684 1685 1687 1688 1690 1691 1693 1703
TF0 . . . . . . . . . . . . . . . .  B ADDR   0088H.5 A      155#
TF1 . . . . . . . . . . . . . . . .  B ADDR   0088H.7 A      160#
TF2H. . . . . . . . . . . . . . . .  B ADDR   00C8H.7 A      59# 3797
TF2L. . . . . . . . . . . . . . . .  B ADDR   00C8H.6 A      72#
TF2LEN. . . . . . . . . . . . . . .  B ADDR   00C8H.5 A      109#
TH0 . . . . . . . . . . . . . . . .  D ADDR   008CH   A      163# 2675
TH1 . . . . . . . . . . . . . . . .  D ADDR   008DH   A      169# 2722 2727
TI0 . . . . . . . . . . . . . . . .  B ADDR   0098H.1 A      165#
TIMER0_INIT . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?TIMER0_INIT?MAIN   366 2600 2665#
TIMER0_ISR. . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?TIMER0_ISR?MAIN   354 3638 3651#
TIMER1_INIT . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?TIMER1_INIT?MAIN   365 2603 2701#
TIMER2_ISR. . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?TIMER2_ISR?MAIN   353 3780 3792#
TIMER3_INIT . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?TIMER3_INIT?MAIN   364 2606 2742#
TIMER3_ISR. . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?TIMER3_ISR?MAIN   352 3807 3821#
TL0 . . . . . . . . . . . . . . . .  D ADDR   008AH   A      177# 2672 3674
TL1 . . . . . . . . . . . . . . . .  D ADDR   008BH   A      179# 2727
TMOD. . . . . . . . . . . . . . . .  D ADDR   0089H   A      117# 2679 2718
TMR2. . . . . . . . . . . . . . . .  D ADDR   00CCH   A      96#
TMR2CN. . . . . . . . . . . . . . .  D ADDR   00C8H   A      124#
TMR2H . . . . . . . . . . . . . . .  D ADDR   00CDH   A      214#
TMR2L . . . . . . . . . . . . . . .  D ADDR   00CCH   A      222#
TMR2RL. . . . . . . . . . . . . . .  D ADDR   00CAH   A      146#
TMR2RLH . . . . . . . . . . . . . .  D ADDR   00CBH   A      41#
TMR2RLL . . . . . . . . . . . . . .  D ADDR   00CAH   A      52#
TMR3. . . . . . . . . . . . . . . .  D ADDR   0094H   A      98# 2761 2762
TMR3CN. . . . . . . . . . . . . . .  D ADDR   0091H   A      127# 2749 2769 3832
TMR3H . . . . . . . . . . . . . . .  D ADDR   0095H   A      217#
TMR3L . . . . . . . . . . . . . . .  D ADDR   0094H   A      226#
TMR3RL. . . . . . . . . . . . . . .  D ADDR   0092H   A      148# 2757 2758 2761 2762
TMR3RLH . . . . . . . . . . . . . .  D ADDR   0093H   A      46#
TMR3RLL . . . . . . . . . . . . . .  D ADDR   0092H   A      54#
TR0 . . . . . . . . . . . . . . . .  B ADDR   0088H.4 A      187#
TR1 . . . . . . . . . . . . . . . .  B ADDR   0088H.6 A      189# 2731
TR2 . . . . . . . . . . . . . . . .  B ADDR   00C8H.2 A      190#
TXBMT . . . . . . . . . . . . . . .  B ADDR   00F8H.1 A      49#
A51 MACRO ASSEMBLER  MAIN                                                                 02/12/2015 20:32:03 PAGE    74

TXMODE. . . . . . . . . . . . . . .  B ADDR   00C0H.6 A      180#
UPDOWN?041. . . . . . . . . . . . .  B ADDR   0000H.0 R   SEG=?BI?MAIN?MAIN   396# 940
USB0ADR . . . . . . . . . . . . . .  D ADDR   0096H   A      225#
USB0DAT . . . . . . . . . . . . . .  D ADDR   0097H   A      229#
USB0XCN . . . . . . . . . . . . . .  D ADDR   00D7H   A      29#
USB_API_TEST_ISR. . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?USB_API_TEST_ISR?MAIN   351 3842 3849#
USB_BCDDEVICE . . . . . . . . . . .  C ADDR   003AH   R   SEG=?CO?MAIN   340 540#
USB_MAXPOWER. . . . . . . . . . . .  C ADDR   0038H   R   SEG=?CO?MAIN   342 534#
USB_MFRSTR. . . . . . . . . . . . .  C ADDR   0004H   R   SEG=?CO?MAIN   345 476#
USB_PID . . . . . . . . . . . . . .  C ADDR   0002H   R   SEG=?CO?MAIN   346 473#
USB_PRODUCTSTR. . . . . . . . . . .  C ADDR   0018H   R   SEG=?CO?MAIN   344 498#
USB_PWATTRIBUTES. . . . . . . . . .  C ADDR   0039H   R   SEG=?CO?MAIN   341 537#
USB_SERIALSTR . . . . . . . . . . .  C ADDR   002EH   R   SEG=?CO?MAIN   343 522#
USB_SUSPEND . . . . . . . . . . . .  C ADDR   -----       EXT   286# 3162
USB_VID . . . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?CO?MAIN   347 470#
VDM0CN. . . . . . . . . . . . . . .  D ADDR   00FFH   A      101#
WCOL. . . . . . . . . . . . . . . .  B ADDR   00F8H.6 A      119#
WORD_ADDR_HIGH. . . . . . . . . . .  D ADDR   0019H   R   SEG=?DT?MAIN   312 437# 2976 3078 3378
WORD_ADDR_LOW . . . . . . . . . . .  D ADDR   0004H   R   SEG=?DT?MAIN   331 422# 2980 3082 3396
WRITECOUNTERTOEEPROM. . . . . . . .  C ADDR   0000H   R   SEG=?PR?WRITECOUNTERTOEEPROM?MAIN   374 1886 2019#
WRITEDISCRETTOEEPROM. . . . . . . .  C ADDR   0000H   R   SEG=?PR?WRITEDISCRETTOEEPROM?MAIN   373 1883 2063#
XBR0. . . . . . . . . . . . . . . .  D ADDR   00E1H   A      83# 2848
XBR1. . . . . . . . . . . . . . . .  D ADDR   00E2H   A      85# 981 1015 2851
XBR2. . . . . . . . . . . . . . . .  D ADDR   00E3H   A      88#
Y?145 . . . . . . . . . . . . . . .  D ADDR   0002H   R   SEG=?DT?_LCDOUTPUTLINE?MAIN   410# 1939 1946 1958
_BLOCK_READ . . . . . . . . . . . .  C ADDR   -----       EXT   287# 3884
_DEL. . . . . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?_DEL?MAIN   348 3748 4136#
_EEPROM_BYTEREAD. . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?_EEPROM_BYTEREAD?MAIN   359 1130 1151 1173 1194
                                                            1209 2136 2142 2148 2154 3055#
_EEPROM_BYTEWRITE . . . . . . . . .  C ADDR   0006H   R   SEG=?PR?_EEPROM_BYTEWRITE?MAIN   360 2033 2047 2097 2111
                                                            2175 2181 2187 2193 2956#
_LCDOUTPUTLINE. . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?_LCDOUTPUTLINE?MAIN   375 1040 1116 1221 1844 1880
                                                            1908# 2055 2119
_OUTSYMBOL. . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?_OUTSYMBOL?MAIN   370 2201# 3743


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
