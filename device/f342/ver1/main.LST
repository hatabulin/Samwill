A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE     1


MACRO ASSEMBLER A51 V8.00d
OBJECT MODULE PLACED IN main.OBJ
ASSEMBLER INVOKED BY: E:\CD_WORK\Keil\C51\BIN\A51.EXE main.SRC XR GEN DB EP NOMOD51 INCDIR(E:\!Hardware\!SiLabs\MCU\Inc) 

LOC  OBJ            LINE     SOURCE

                       1     ; main.SRC generated from: main.c
                       2     ; COMPILER INVOKED BY:
                       3     ;        E:\CD_WORK\Keil\C51\BIN\C51.exe main.c DB OE BR INCDIR(E:\!Hardware\!SiLabs\MCU\In
                             c) SRC
                       4     
                       5     $nomod51 
                       6     
                       7     NAME    MAIN
                       8     
  00DA                 9     CCF2    BIT     0D8H.2
  009B                10     TB80    BIT     098H.3
  00A2                11     SPI0CKR DATA    0A2H
  00DB                12     CCF3    BIT     0D8H.3
  0080                13     P0      DATA    080H
  00F8                14     SPIEN   BIT     0F8H.0
  00DC                15     CCF4    BIT     0D8H.4
  0090                16     P1      DATA    090H
  00A0                17     P2      DATA    0A0H
  0087                18     SEGMENT_POINT   BIT     080H.7
  00BC                19     ADC0CF  DATA    0BCH
  00B0                20     P3      DATA    0B0H
  0080                21     EEPROM_SDA      BIT     080H.0
  00D6                22     AC      BIT     0D0H.6
  00C7                23     P4      DATA    0C7H
  00F9                24     PCA0    DATA    0F9H
  00E6                25     EIE1    DATA    0E6H
  00AF                26     EA      BIT     0A8H.7
  009D                27     MCE0    BIT     098H.5
  00E7                28     EIE2    DATA    0E7H
  00D7                29     USB0XCN DATA    0D7H
  0097                30     LED1    BIT     090H.7
  00A0                31     LED2    BIT     0A0H.0
  008F                32     PSCTL   DATA    08FH
  00A1                33     LED3    BIT     0A0H.1
  00DF                34     CF      BIT     0D8H.7
  00E4                35     IT01CF  DATA    0E4H
  00A2                36     LED4    BIT     0A0H.2
  00A3                37     LED5    BIT     0A0H.3
  00E8                38     ADC0CN  DATA    0E8H
  00A4                39     LED6    BIT     0A0H.4
  00A4                40     P0MDOUT DATA    0A4H
  00A5                41     P1MDOUT DATA    0A5H
  0081                42     EEPROM_SCL      BIT     080H.1
  00CB                43     TMR2RLH DATA    0CBH
  00A8                44     IE      DATA    0A8H
  00A6                45     P2MDOUT DATA    0A6H
  00CC                46     T2CE    BIT     0C8H.4
  00A7                47     P3MDOUT DATA    0A7H
  0093                48     TMR3RLH DATA    093H
  00F6                49     EIP1    DATA    0F6H
  00AE                50     P4MDOUT DATA    0AEH
  00F9                51     TXBMT   BIT     0F8H.1
  00F7                52     EIP2    DATA    0F7H
  00FC                53     PCA0CPH0        DATA    0FCH
  00CA                54     TMR2RLL DATA    0CAH
  00EA                55     PCA0CPH1        DATA    0EAH
  0092                56     TMR3RLL DATA    092H
  0082                57     DP      DATA    082H
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE     2

  00EC                58     PCA0CPH2        DATA    0ECH
  00DE                59     CR      BIT     0D8H.6
  00CB                60     T2SPLIT BIT     0C8H.3
  00CF                61     TF2H    BIT     0C8H.7
  00C3                62     ADC0GT  DATA    0C3H
  00EE                63     PCA0CPH3        DATA    0EEH
  009C                64     REN0    BIT     098H.4
  00FE                65     PCA0CPH4        DATA    0FEH
  00FB                66     PCA0CPL0        DATA    0FBH
  0085                67     EMI0CF  DATA    085H
  00E9                68     PCA0CPL1        DATA    0E9H
  00DA                69     PCA0CPM0        DATA    0DAH
  00D9                70     PCA0MD  DATA    0D9H
  00D8                71     PCA0CN  DATA    0D8H
  00EB                72     PCA0CPL2        DATA    0EBH
  00DB                73     PCA0CPM1        DATA    0DBH
  00CE                74     TF2L    BIT     0C8H.6
  00ED                75     PCA0CPL3        DATA    0EDH
  00DC                76     PCA0CPM2        DATA    0DCH
  00B8                77     IP      DATA    0B8H
  00C2                78     ARBLOST BIT     0C0H.2
  00C5                79     ADC0LT  DATA    0C5H
  00FD                80     PCA0CPL4        DATA    0FDH
  00DD                81     PCA0CPM3        DATA    0DDH
  0084                82     KEY1    BIT     080H.4
  00DE                83     PCA0CPM4        DATA    0DEH
  00A5                84     KEY2    BIT     0A0H.5
  00D7                85     CY      BIT     0D0H.7
  00C0                86     SI      BIT     0C0H.0
  0086                87     KEY3    BIT     080H.6
  00E1                88     XBR0    DATA    0E1H
  00C1                89     SMB0CF  DATA    0C1H
  0085                90     KEY4    BIT     080H.5
  00E2                91     XBR1    DATA    0E2H
  00AF                92     PFE0CN  DATA    0AFH
  00AA                93     EMI0CN  DATA    0AAH
  00E3                94     XBR2    DATA    0E3H
  00D1                95     REF0CN  DATA    0D1H
  00C9                96     REG0CN  DATA    0C9H
  00ED                97     AD0INT  BIT     0E8H.5
  0081                98     SP      DATA    081H
  0084                99     EMI0TC  DATA    084H
  00D2               100     OV      BIT     0D0H.2
  00C0               101     SMB0CN  DATA    0C0H
  00CC               102     TMR2    DATA    0CCH
  00FD               103     MODF    BIT     0F8H.5
  0094               104     TMR3    DATA    094H
  00AC               105     SBCON1  DATA    0ACH
  009F               106     S0MODE  BIT     098H.7
  00FF               107     VDM0CN  DATA    0FFH
  00F1               108     P0MDIN  DATA    0F1H
  009D               109     CPT0MD  DATA    09DH
  009B               110     CPT0CN  DATA    09BH
  00F2               111     P1MDIN  DATA    0F2H
  009C               112     CPT1MD  DATA    09CH
  009A               113     CPT1CN  DATA    09AH
  00F3               114     P2MDIN  DATA    0F3H
  00CD               115     TF2LEN  BIT     0C8H.5
  00F4               116     P3MDIN  DATA    0F4H
  00F5               117     P4MDIN  DATA    0F5H
  00B5               118     SBRLH1  DATA    0B5H
  00F8               119     SPI0CN  DATA    0F8H
  0087               120     PCON    DATA    087H
  00B4               121     SBRLL1  DATA    0B4H
  00FF               122     SPIF    BIT     0F8H.7
  0089               123     TMOD    DATA    089H
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE     3

  0088               124     TCON    DATA    088H
  00FE               125     WCOL    BIT     0F8H.6
  0090               126     SEGMENT_A       BIT     090H.0
  00FA               127     NSSMD0  BIT     0F8H.2
  0091               128     SEGMENT_B       BIT     090H.1
  00FB               129     NSSMD1  BIT     0F8H.3
  00C8               130     TMR2CN  DATA    0C8H
  0092               131     SEGMENT_C       BIT     090H.2
  00D4               132     P0SKIP  DATA    0D4H
  0091               133     TMR3CN  DATA    091H
  0093               134     SEGMENT_D       BIT     090H.3
  00C8               135     T2XCLK  BIT     0C8H.0
  00D5               136     P1SKIP  DATA    0D5H
  0094               137     SEGMENT_E       BIT     090H.4
  00D6               138     P2SKIP  DATA    0D6H
  0096               139     SEGMENT_F       BIT     090H.6
  00DF               140     P3SKIP  DATA    0DFH
  0095               141     SEGMENT_G       BIT     090H.5
  0089               142     IE0     BIT     088H.1
  009F               143     CPT0MX  DATA    09FH
  008B               144     IE1     BIT     088H.3
  00B3               145     OSCICL  DATA    0B3H
  009E               146     CPT1MX  DATA    09EH
  00A9               147     CLKSEL  DATA    0A9H
  00F0               148     B       DATA    0F0H
  00BE               149     ADC0H   DATA    0BEH
  00B2               150     OSCICN  DATA    0B2H
  0086               151     OSCLCN  DATA    086H
  00CA               152     TMR2RL  DATA    0CAH
  00BD               153     ADC0L   DATA    0BDH
  0092               154     TMR3RL  DATA    092H
  00E0               155     ACC     DATA    0E0H
  00AC               156     ES0     BIT     0A8H.4
  00EF               157     AD0EN   BIT     0E8H.7
  00A9               158     ET0     BIT     0A8H.1
  00FB               159     PCA0CP0 DATA    0FBH
  00AB               160     ET1     BIT     0A8H.3
  008D               161     TF0     BIT     088H.5
  00E9               162     PCA0CP1 DATA    0E9H
  00B9               163     CLKMUL  DATA    0B9H
  00AD               164     ET2     BIT     0A8H.5
  0098               165     RI0     BIT     098H.0
  008F               166     TF1     BIT     088H.7
  00EB               167     PCA0CP2 DATA    0EBH
  00ED               168     PCA0CP3 DATA    0EDH
  008C               169     TH0     DATA    08CH
  00A8               170     EX0     BIT     0A8H.0
  0099               171     TI0     BIT     098H.1
  0088               172     IT0     BIT     088H.0
  00FD               173     PCA0CP4 DATA    0FDH
  00FA               174     PCA0H   DATA    0FAH
  008D               175     TH1     DATA    08DH
  00C7               176     MASTER  BIT     0C0H.7
  00AA               177     EX1     BIT     0A8H.2
  008A               178     IT1     BIT     088H.2
  00D0               179     P       BIT     0D0H.0
  00C1               180     ACK     BIT     0C0H.1
  00B1               181     OSCXCN  DATA    0B1H
  008A               182     TL0     DATA    08AH
  00F9               183     PCA0L   DATA    0F9H
  008B               184     TL1     DATA    08BH
  00C6               185     TXMODE  BIT     0C0H.6
  00BC               186     PS0     BIT     0B8H.4
  00B9               187     PT0     BIT     0B8H.1
  00D3               188     RS0     BIT     0D0H.3
  00BB               189     PT1     BIT     0B8H.3
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE     4

  00D4               190     RS1     BIT     0D0H.4
  00BD               191     PT2     BIT     0B8H.5
  008C               192     TR0     BIT     088H.4
  00EE               193     AD0TM   BIT     0E8H.6
  008E               194     TR1     BIT     088H.6
  00CA               195     TR2     BIT     0C8H.2
  00B8               196     PX0     BIT     0B8H.0
  00BA               197     PX1     BIT     0B8H.2
  0083               198     DPH     DATA    083H
  00C4               199     ADC0GTH DATA    0C4H
  0082               200     DPL     DATA    082H
  00C3               201     ADC0GTL DATA    0C3H
  0099               202     SBUF0   DATA    099H
  00AE               203     ESPI0   BIT     0A8H.6
  00D3               204     SBUF1   DATA    0D3H
  00C6               205     ADC0LTH DATA    0C6H
  00EF               206     RSTSRC  DATA    0EFH
  0098               207     SCON0   DATA    098H
  00B4               208     SBRL1   DATA    0B4H
  00E5               209     SMOD1   DATA    0E5H
  00D2               210     SCON1   DATA    0D2H
  00BA               211     AMX0N   DATA    0BAH
  00C5               212     ADC0LTL DATA    0C5H
  00BB               213     AMX0P   DATA    0BBH
  00C5               214     STA     BIT     0C0H.5
  00BE               215     PSPI0   BIT     0B8H.6
  00C2               216     SMB0DAT DATA    0C2H
  0082               217     EXT_INT0        BIT     080H.2
  00CD               218     TMR2H   DATA    0CDH
  00A1               219     SPI0CFG DATA    0A1H
  0083               220     EXT_INT1        BIT     080H.3
  0095               221     TMR3H   DATA    095H
  008E               222     CKCON   DATA    08EH
  00C9               223     T2CSS   BIT     0C8H.1
  00FC               224     RXOVRN  BIT     0F8H.4
  00CC               225     TMR2L   DATA    0CCH
  00C3               226     ACKRQ   BIT     0C0H.3
  0096               227     USB0ADR DATA    096H
  0094               228     TMR3L   DATA    094H
  00D5               229     F0      BIT     0D0H.5
  00B6               230     FLSCL   DATA    0B6H
  0097               231     USB0DAT DATA    097H
  00E8               232     AD0CM0  BIT     0E8H.0
  00D1               233     F1      BIT     0D0H.1
  00C4               234     STO     BIT     0C0H.4
  00E9               235     AD0CM1  BIT     0E8H.1
  00A3               236     SPI0DAT DATA    0A3H
  00EA               237     AD0CM2  BIT     0E8H.2
  00BD               238     ADC0    DATA    0BDH
  00EB               239     AD0WINT BIT     0E8H.3
  00EC               240     AD0BUSY BIT     0E8H.4
  00D0               241     PSW     DATA    0D0H
  00D8               242     CCF0    BIT     0D8H.0
  009A               243     RB80    BIT     098H.2
  00B7               244     FLKEY   DATA    0B7H
  00D9               245     CCF1    BIT     0D8H.1
                     246     ?PR?main?MAIN        SEGMENT CODE 
                     247     ?DT?main?MAIN        SEGMENT DATA OVERLAYABLE 
                     248     ?BI?main?MAIN        SEGMENT BIT OVERLAYABLE 
                     249     ?PR?EncoderScan2?MAIN                    SEGMENT CODE 
                     250     ?PR?EncoderScan1?MAIN                    SEGMENT CODE 
                     251     ?PR?EncoderScan3?MAIN                    SEGMENT CODE 
                     252     ?PR?EncoderScan4?MAIN                    SEGMENT CODE 
                     253     ?PR?EncoderScan5?MAIN                    SEGMENT CODE 
                     254     ?PR?_LcdOutputLine?MAIN                  SEGMENT CODE 
                     255     ?DT?_LcdOutputLine?MAIN                  SEGMENT DATA OVERLAYABLE 
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE     5

                     256     ?PR?WriteCounterToEEprom?MAIN            SEGMENT CODE 
                     257     ?PR?WriteDiscretToEEprom?MAIN            SEGMENT CODE 
                     258     ?PR?ResetCounterToOutputBuffer?MAIN      SEGMENT CODE 
                     259     ?PR?OutputBufferToResetCounter?MAIN      SEGMENT CODE 
                     260     ?PR?_OutSymbol?MAIN  SEGMENT CODE 
                     261     ?DT?_OutSymbol?MAIN  SEGMENT DATA OVERLAYABLE 
                     262     ?PR?LedsSwitchOff?MAIN                   SEGMENT CODE 
                     263     ?PR?Initialize?MAIN  SEGMENT CODE 
                     264     ?PR?OSCILLATOR_Init?MAIN                 SEGMENT CODE 
                     265     ?PR?Timer0_Init?MAIN SEGMENT CODE 
                     266     ?PR?Timer1_Init?MAIN SEGMENT CODE 
                     267     ?PR?Timer3_Init?MAIN SEGMENT CODE 
                     268     ?PR?Port_Init?MAIN   SEGMENT CODE 
                     269     ?PR?SMBus_Init?MAIN  SEGMENT CODE 
                     270     ?PR?Ext_Interrupt_Init?MAIN              SEGMENT CODE 
                     271     ?PR?_EEPROM_ByteWrite?MAIN               SEGMENT CODE 
                     272     ?PR?_EEPROM_ByteRead?MAIN                SEGMENT CODE 
                     273     ?DT?_EEPROM_ByteRead?MAIN                SEGMENT DATA OVERLAYABLE 
                     274     ?PR?Suspend_Device?MAIN                  SEGMENT CODE 
                     275     ?PR?INT0_ISR?MAIN    SEGMENT CODE 
                     276     ?PR?INT1_ISR?MAIN    SEGMENT CODE 
                     277     ?PR?SMBus_ISR?MAIN   SEGMENT CODE 
                     278     ?DT?MAIN             SEGMENT DATA 
                     279     ?BI?MAIN             SEGMENT BIT 
                     280     ?BI?SMBus_ISR?MAIN   SEGMENT BIT OVERLAYABLE 
                     281     ?PR?Timer0_ISR?MAIN  SEGMENT CODE 
                     282     ?DT?Timer0_ISR?MAIN  SEGMENT DATA OVERLAYABLE 
                     283     ?PR?Timer2_ISR?MAIN  SEGMENT CODE 
                     284     ?PR?Timer3_ISR?MAIN  SEGMENT CODE 
                     285     ?PR?USB_API_TEST_ISR?MAIN                SEGMENT CODE 
                     286     ?DT?USB_API_TEST_ISR?MAIN                SEGMENT DATA OVERLAYABLE 
                     287     ?PR?_Del?MAIN        SEGMENT CODE 
                     288     ?C_INITSEG           SEGMENT CODE 
                     289     ?CO?MAIN             SEGMENT CODE 
                     290             EXTRN   CODE (Get_Interrupt_Source)
                     291             EXTRN   CODE (USB_Suspend)
                     292             EXTRN   CODE (_Block_Read)
                     293             EXTRN   CODE (?C_STARTUP)
                     294             EXTRN   CODE (?C?LSHL)
                     295             EXTRN   CODE (?C?ULCMP)
                     296             EXTRN   CODE (?C?ULDIV)
                     297             EXTRN   CODE (?C?LMUL)
                     298             EXTRN   CODE (?C?ULSHR)
                     299             EXTRN   CODE (?C?CLDPTR)
                     300             EXTRN   CODE (?C?CSTPTR)
                     301             PUBLIC  TempCounter
                     302             PUBLIC  Flag
                     303             PUBLIC  OutputBuffer
                     304             PUBLIC  In_Packet
                     305             PUBLIC  Rotate
                     306             PUBLIC  SMB_RW
                     307             PUBLIC  EncN
                     308             PUBLIC  Counter
                     309             PUBLIC  KeyFlag4
                     310             PUBLIC  KeyFlag3
                     311             PUBLIC  KeyFlag2
                     312             PUBLIC  KeyFlag1
                     313             PUBLIC  Discret
                     314             PUBLIC  SMB_SENDWORDADDR_HIGH
                     315             PUBLIC  SMB_ACKPOLL
                     316             PUBLIC  pSMB_DATA_IN
                     317             PUBLIC  WORD_ADDR_HIGH
                     318             PUBLIC  LongKeyFlag
                     319             PUBLIC  EncOld
                     320             PUBLIC  Low?
                     321             PUBLIC  EncTemp
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE     6

                     322             PUBLIC  Flag1
                     323             PUBLIC  pSMB_DATA_OUT
                     324             PUBLIC  OldState
                     325             PUBLIC  SMB_RANDOMREAD
                     326             PUBLIC  LongKeyFlagCounter
                     327             PUBLIC  SMB_DATA_LEN
                     328             PUBLIC  Step
                     329             PUBLIC  SMB_SENDWORDADDR_LOW
                     330             PUBLIC  LcdMode
                     331             PUBLIC  EncState
                     332             PUBLIC  now_b
                     333             PUBLIC  SMB_SINGLEBYTE_OUT
                     334             PUBLIC  now_a
                     335             PUBLIC  EncData
                     336             PUBLIC  WORD_ADDR_LOW
                     337             PUBLIC  pre_b
                     338             PUBLIC  FlagPoint
                     339             PUBLIC  pre_a
                     340             PUBLIC  SMB_BUSY
                     341             PUBLIC  High?
                     342             PUBLIC  LCD_STRING
                     343             PUBLIC  DEVICE_SN_Str
                     344             PUBLIC  DEVICE_NAME_Str
                     345             PUBLIC  USB_bcdDevice
                     346             PUBLIC  USB_PwAttributes
                     347             PUBLIC  USB_MaxPower
                     348             PUBLIC  USB_SerialStr
                     349             PUBLIC  USB_ProductStr
                     350             PUBLIC  USB_MfrStr
                     351             PUBLIC  USB_PID
                     352             PUBLIC  USB_VID
                     353             PUBLIC  _Del
                     354             PUBLIC  USB_API_TEST_ISR
                     355             PUBLIC  Timer3_ISR
                     356             PUBLIC  Timer2_ISR
                     357             PUBLIC  Timer0_ISR
                     358             PUBLIC  SMBus_ISR
                     359             PUBLIC  INT1_ISR
                     360             PUBLIC  INT0_ISR
                     361             PUBLIC  Suspend_Device
                     362             PUBLIC  _EEPROM_ByteRead
                     363             PUBLIC  _EEPROM_ByteWrite
                     364             PUBLIC  Ext_Interrupt_Init
                     365             PUBLIC  SMBus_Init
                     366             PUBLIC  Port_Init
                     367             PUBLIC  Timer3_Init
                     368             PUBLIC  Timer1_Init
                     369             PUBLIC  Timer0_Init
                     370             PUBLIC  OSCILLATOR_Init
                     371             PUBLIC  Initialize
                     372             PUBLIC  LedsSwitchOff
                     373             PUBLIC  _OutSymbol
                     374             PUBLIC  OutputBufferToResetCounter
                     375             PUBLIC  ResetCounterToOutputBuffer
                     376             PUBLIC  WriteDiscretToEEprom
                     377             PUBLIC  WriteCounterToEEprom
                     378             PUBLIC  _LcdOutputLine
                     379             PUBLIC  EncoderScan5
                     380             PUBLIC  EncoderScan4
                     381             PUBLIC  EncoderScan3
                     382             PUBLIC  EncoderScan1
                     383             PUBLIC  EncoderScan2
                     384             PUBLIC  main
                     385     
----                 386             RSEG  ?DT?Timer0_ISR?MAIN
0000                 387     ?Timer0_ISR?BYTE:
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE     7

0000                 388              i?2758:   DS   1
                     389     
----                 390             RSEG  ?DT?USB_API_TEST_ISR?MAIN
0000                 391     ?USB_API_TEST_ISR?BYTE:
0000                 392         INTVAL?3060:   DS   1
                     393     
----                 394             RSEG  ?BI?SMBus_ISR?MAIN
0000                 395     ?SMBus_ISR?BIT:
0000                 396           FAIL?2655:   DBIT   1
                     397     
----                 398             RSEG  ?DT?main?MAIN
0000                 399     ?main?BYTE:
0000                 400            temp?042:   DS   4
                     401     
----                 402             RSEG  ?BI?main?MAIN
0000                 403     ?main?BIT:
0000                 404          UpDown?041:   DBIT   1
                     405     
----                 406             RSEG  ?DT?_OutSymbol?MAIN
0000                 407     ?_OutSymbol?BYTE:
0000                 408      LedNumber?1149:   DS   1
0001                 409             ORG  1
0001                 410     SymbolCode?1150:   DS   1
                     411     
----                 412             RSEG  ?DT?_LcdOutputLine?MAIN
0000                 413     ?_LcdOutputLine?BYTE:
0000                 414           delay?644:   DS   1
                     415     
----                 416             RSEG  ?DT?_EEPROM_ByteRead?MAIN
0000                 417     ?_EEPROM_ByteRead?BYTE:
0000                 418         retval?2254:   DS   1
                     419     
----                 420             RSEG  ?DT?MAIN
0000                 421     low_counter?2759:   DS   2
                     422     
----                 423             RSEG  ?DT?MAIN
0002                 424              i?2656:   DS   1
0003                 425               High?:   DS   1
0004                 426       WORD_ADDR_LOW:   DS   1
0005                 427             EncData:   DS   1
0006                 428     SMB_SINGLEBYTE_OUT:   DS   1
0007                 429            EncState:   DS   1
0008                 430             LcdMode:   DS   1
0009                 431                Step:   DS   1
000A                 432        SMB_DATA_LEN:   DS   1
000B                 433     LongKeyFlagCounter:   DS   2
000D                 434            OldState:   DS   1
000E                 435            EncMinus:   DS   1
000F                 436       pSMB_DATA_OUT:   DS   3
0012                 437                 New:   DS   1
0013                 438             EncTemp:   DS   1
0014                 439                Low?:   DS   1
0015                 440              EncOld:   DS   4
0019                 441      WORD_ADDR_HIGH:   DS   1
001A                 442             EncPlus:   DS   1
001B                 443        pSMB_DATA_IN:   DS   3
001E                 444             Discret:   DS   4
0022                 445             Counter:   DS   4
0026                 446                EncN:   DS   1
0027                 447           In_Packet:   DS   10
0031                 448        OutputBuffer:   DS   6
0037                 449                Flag:   DS   1
0038                 450         TempCounter:   DS   4
                     451     
----                 452             RSEG  ?BI?MAIN
0000                 453     SEND_START?2657:   DBIT   1
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE     8

0001                 454            SMB_BUSY:   DBIT   1
0002                 455               pre_a:   DBIT   1
0003                 456           FlagPoint:   DBIT   1
0004                 457               pre_b:   DBIT   1
0005                 458               now_a:   DBIT   1
0006                 459               now_b:   DBIT   1
0007                 460     SMB_SENDWORDADDR_LOW:   DBIT   1
0008                 461      SMB_RANDOMREAD:   DBIT   1
0009                 462               Flag1:   DBIT   1
000A                 463         LongKeyFlag:   DBIT   1
000B                 464         SMB_ACKPOLL:   DBIT   1
000C                 465     SMB_SENDWORDADDR_HIGH:   DBIT   1
000D                 466            KeyFlag1:   DBIT   1
000E                 467            KeyFlag2:   DBIT   1
000F                 468            KeyFlag3:   DBIT   1
0010                 469            KeyFlag4:   DBIT   1
0011                 470              SMB_RW:   DBIT   1
0012                 471              Rotate:   DBIT   1
                     472     
----                 473             RSEG  ?CO?MAIN
0000                 474     USB_VID:
0000 10C4            475             DW      010C4H
                     476     
0002                 477     USB_PID:
0002 EA61            478             DW      0EA61H
                     479     
0004                 480     USB_MfrStr:
0004 1A              481             DB      01AH
0005 03              482             DB      003H
0006 48              483             DB      048H
0007 00              484             DB      000H
0008 61              485             DB      061H
0009 00              486             DB      000H
000A 74              487             DB      074H
000B 00              488             DB      000H
000C 61              489             DB      061H
000D 00              490             DB      000H
000E 62              491             DB      062H
000F 00              492             DB      000H
0010 40              493             DB      040H
0011 00              494             DB      000H
0012 43              495             DB      043H
0013 00              496             DB      000H
0014 6F              497             DB      06FH
0015 00              498             DB      000H
0016 20              499             DB      020H
0017 00              500             DB      000H
                     501     
0018                 502     USB_ProductStr:
0018 10              503             DB      010H
0019 03              504             DB      003H
001A 48              505             DB      048H
001B 00              506             DB      000H
001C 61              507             DB      061H
001D 00              508             DB      000H
001E 74              509             DB      074H
001F 00              510             DB      000H
0020 53              511             DB      053H
0021 00              512             DB      000H
0022 61              513             DB      061H
0023 00              514             DB      000H
0024 6D              515             DB      06DH
0025 00              516             DB      000H
0026 77              517             DB      077H
0027 00              518             DB      000H
0028 69              519             DB      069H
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE     9

0029 00              520             DB      000H
002A 6C              521             DB      06CH
002B 00              522             DB      000H
002C 6C              523             DB      06CH
002D 00              524             DB      000H
                     525     
002E                 526     USB_SerialStr:
002E 0A              527             DB      00AH
002F 03              528             DB      003H
0030 30              529             DB      030H
0031 00              530             DB      000H
0032 30              531             DB      030H
0033 00              532             DB      000H
0034 30              533             DB      030H
0035 00              534             DB      000H
0036 31              535             DB      031H
0037 00              536             DB      000H
                     537     
0038                 538     USB_MaxPower:
0038 0F              539             DB      00FH
                     540     
0039                 541     USB_PwAttributes:
0039 80              542             DB      080H
                     543     
003A                 544     USB_bcdDevice:
003A 0100            545             DW      00100H
                     546     
003C                 547     DEVICE_NAME_Str:
003C 48              548             DB      048H
003D 61              549             DB      061H
003E 74              550             DB      074H
003F 53              551             DB      053H
0040 61              552             DB      061H
0041 6D              553             DB      06DH
                     554     
0042                 555     DEVICE_SN_Str:
0042 01              556             DB      001H
0043 02              557             DB      002H
0044 03              558             DB      003H
0045 04              559             DB      004H
                     560     
0046                 561     LCD_STRING:
0046 2D              562             DB      02DH
0047 2D              563             DB      02DH
0048 2D              564             DB      02DH
0049 2D              565             DB      02DH
004A 2D              566             DB      02DH
004B 2D              567             DB      02DH
                     568     
                     569     
----                 570             RSEG  ?C_INITSEG
0000 01              571             DB      001H
0001 00       F      572             DB      Flag
0002 00              573             DB      000H
                     574     
0003 04              575             DB      004H
0004 00       F      576             DB      Counter
0005 00000000        577             DB      000H,000H,000H,000H     ; long
                     578     
0009 C100     F      579             DB      0C1H, Flag1 + 080H      ; bit-init
                     580     
000B C100     F      581             DB      0C1H, FlagPoint + 000H  ; bit-init
                     582     
000D C100     F      583             DB      0C1H, KeyFlag1 + 000H   ; bit-init
                     584     
000F C100     F      585             DB      0C1H, KeyFlag2 + 000H   ; bit-init
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    10

                     586     
0011 C100     F      587             DB      0C1H, KeyFlag3 + 000H   ; bit-init
                     588     
0013 C100     F      589             DB      0C1H, KeyFlag4 + 000H   ; bit-init
                     590     
0015 C100     F      591             DB      0C1H, LongKeyFlag + 000H        ; bit-init
                     592     
0017 02              593             DB      002H
0018 00       F      594             DB      LongKeyFlagCounter
0019 0000            595             DW      00000H
                     596     
001B 01              597             DB      001H
001C 00       F      598             DB      LcdMode
001D 00              599             DB      000H
                     600     
001E 01              601             DB      001H
001F 00       F      602             DB      EncN
0020 00              603             DB      000H
                     604     
0021 04              605             DB      004H
0022 00       F      606             DB      EncOld
0023 00              607             DB      000H
0024 00              608             DB      000H
0025 01              609             DB      001H
0026 00              610             DB      000H
                     611     
0027 C100     F      612             DB      0C1H, SMB_BUSY + 000H   ; bit-init
                     613     
0029 C100     F      614             DB      0C1H, SEND_START?2657 + 000H    ; bit-init
                     615     
002B 02              616             DB      002H
002C 00       F      617             DB      low_counter?2759
002D 0000            618             DW      00000H
                     619     
                     620     ; 
                     621     ;     ////////////////////////////////////////////////////////////////////
                     622     ; //
                     623     ; // <NAME PROJECT WITH MORE INFO>
                     624     ; // 
                     625     ; // Name:              Hatab Samwill
                     626     ; // Version:           1.0 
                     627     ; // Project started:   16.03.2013: 
                     628     ; // Project ended::
                     629     ; // 
                     630     ; // version 1 - 
                     631     ; // build: 160313
                     632     ; // 
                     633     ; // EEPROM 24c64 - 64Kbit (8 Kbytes)
                     634     ; // OSCILLATOR 24Mhz on p0.2, p0.3
                     635     ; //
                     636     ; // Плавает 1-2 мм на 20 см
                     637     ; // Нет "болтанки" и дребезгов
                     638     ; //
                     639     ; #define VERSION2      // Версия платы: 
                     640     ;                                       // ------------
                     641     ;                                       // 1.0 - Первый блин
                     642     ;                                       // 2.0 - 
                     643     ;                                       // 3.0 - 
                     644     ;                                       // 3.1 - 
                     645     ;                                       // 3.2 - 
                     646     ; #define ALGO3
                     647     ; #define DEFAULT_DISCRET               100;
                     648     ; #define EEPROM_24C128
                     649     ; #define REVISION_VER_DIGIT1 0x01 // версия прошивки
                     650     ; #define REVISION_VER_DIGIT2 0x00
                     651     ; 
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    11

                     652     ; #define EncA    2
                     653     ; #define EncB    3
                     654     ; #define EncSw   6
                     655     ; #define EncIN   P0
                     656     ; #define EncPort P0
                     657     ; #define EncMask ((1<<EncB)|(1<<EncA)|(1<<EncSw))
                     658     ; 
                     659     ; #include "compiler_defs.h"
                     660     ; #include "C8051f340_defs.h"
                     661     ; //#include "C8051f340.h"
                     662     ; #include "USB_API.h"
                     663     ; #include <math.h>
                     664     ; #include <string.h>
                     665     ; 
                     666     ; #define INTERRUPT_USBXpress 17
                     667     ; //#define _GENERATOR_MODE_ON_OFF_ ~state
                     668     ; //////////////////////////////////////////////////////
                     669     ; ///
                     670     ; ///            PORT PINS CONFIGURATIONS (Defines)
                     671     ; /// 
                     672     ; //////////////////////////////////////////////////////
                     673     ; // 
                     674     ; // PINS
                     675     ; // 
                     676     ; sbit EEPROM_SDA                       = P0^0;
                     677     ; sbit EEPROM_SCL                       = P0^1;
                     678     ; 
                     679     ; #ifdef VERSION1
                     680     ; sbit KEY1                                     = P2^5;
                     681     ; sbit KEY2                                     = P2^6;
                     682     ; sbit KEY3                                     = P2^7;
                     683     ; sbit KEY4                                     = P0^6;
                     684     ; 
                     685     ; sbit SEGMENT_A                                = P0^7;
                     686     ; sbit SEGMENT_B                                = P1^0;
                     687     ; sbit SEGMENT_C                                = P1^1;
                     688     ; sbit SEGMENT_D                                = P1^2;
                     689     ; sbit SEGMENT_E                                = P1^3;
                     690     ; sbit SEGMENT_F                                = P1^4;
                     691     ; sbit SEGMENT_G                                = P1^5;
                     692     ; sbit SEGMENT_POINT                    = P1^6;
                     693     ; 
                     694     ; sbit LED1                                     = P1^7;
                     695     ; sbit LED2                                     = P2^0;
                     696     ; sbit LED3                                     = P2^1;
                     697     ; sbit LED4                                     = P2^4;
                     698     ; sbit LED5                                     = P2^3;
                     699     ; sbit LED6                                     = P2^2;
                     700     ; 
                     701     ; sbit EXT_INT0                         = P0^4;
                     702     ; sbit EXT_INT1                         = P0^5;
                     703     ; #endif
                     704     ; 
                     705     ; #ifdef VERSION2
                     706     ; sbit KEY1                                     = P0^4;
                     707     ; sbit KEY2                                     = P2^5;
                     708     ; sbit KEY3                                     = P0^6;
                     709     ; sbit KEY4                                     = P0^5;
                     710     ; 
                     711     ; sbit SEGMENT_A                                = P1^0;
                     712     ; sbit SEGMENT_B                                = P1^1;
                     713     ; sbit SEGMENT_C                                = P1^2;
                     714     ; sbit SEGMENT_D                                = P1^3;
                     715     ; sbit SEGMENT_E                                = P1^4;
                     716     ; sbit SEGMENT_F                                = P1^6;
                     717     ; sbit SEGMENT_G                                = P1^5;
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    12

                     718     ; sbit SEGMENT_POINT                    = P0^7;
                     719     ; 
                     720     ; sbit LED1                                     = P1^7;
                     721     ; sbit LED2                                     = P2^0;
                     722     ; sbit LED3                                     = P2^1;
                     723     ; sbit LED4                                     = P2^2;
                     724     ; sbit LED5                                     = P2^3;
                     725     ; sbit LED6                                     = P2^4;
                     726     ; 
                     727     ; sbit EXT_INT0                         = P0^2;
                     728     ; sbit EXT_INT1                         = P0^3;
                     729     ; #endif
                     730     ; 
                     731     ; //
                     732     ; // Адреса области EEPROM
                     733     ; //
                     734     ; #define EEPROM_TEST_ADDR1                                     0x00
                     735     ; #define EEPROM_TEST_ADDR2                                     0x01
                     736     ; #define EEPROM_CONST_ADDR                                     0x02
                     737     ; #define EEPROM_RESET_COUNTER_ADDR                     0x03
                     738     ; #define EEPROM_COUNTER_ADDR_LOW                               0x04
                     739     ; #define EEPROM_COUNTER_ADDR_HIGH                      0x05
                     740     ; #define EEPROM_LCDMODE_ADDR                                   0x10
                     741     ; #define EEPROM_DISCRET_ADDR_LOW                               0x20
                     742     ; #define EEPROM_DISCRET_ADDR_HIGH                      0x21
                     743     ; 
                     744     ; // Device addresses (7 bits, lsb is a don't care)
                     745     ; #define  SYSCLK         12000000
                     746     ; #define  SMB_FREQUENCY  40000          // Target SCL clock rate
                     747     ;                                        // This example supports between 10kHz
                     748     ;                                        // and 100kHz
                     749     ; 
                     750     ; #define  WRITE          0x00           // SMBus WRITE command
                     751     ; #define  READ           0x01           // SMBus READ command
                     752     ; #define  EEPROM_ADDR    0xA0           // Device address for slave target
                     753     ;                                        // Note: This address is specified
                     754     ;                                        // in the Microchip 24LC02B
                     755     ;                                        // datasheet.
                     756     ; #define  TARGET                       0xA0           // Target SMBus slave address
                     757     ; 
                     758     ; 
                     759     ; // SMBus Buffer Size
                     760     ; #define  SMB_BUFF_SIZE  0x08           // Defines the maximum number of bytes
                     761     ;                                        // that can be sent or received in a
                     762     ;                                       // single transfer
                     763     ; // Status vector - top 4 bits only
                     764     ; #define  SMB_MTSTA      0xE0           // (MT) start transmitted
                     765     ; #define  SMB_MTDB       0xC0           // (MT) data byte transmitted
                     766     ; #define  SMB_MRDB       0x80           // (MR) data byte received
                     767     ; //
                     768     ; // ..
                     769     ; #define TIMER0_RELOAD_HIGH 0xF8
                     770     ; #define TIMER0_RELOAD_LOW  0xF8
                     771     ; 
                     772     ; //--------------------------TIMER DEFINITIONS ------
                     773     ; #define TIMER_PRESCALER           32  //48  // Based on Timer CKCON settings
                     774     ; 
                     775     ; #define TIMER_TICKS_PER_MS  SYSCLK/TIMER_PRESCALER/1500 //1000
                     776     ; 
                     777     ; #define AUX1     TIMER_TICKS_PER_MS
                     778     ; #define AUX2     -AUX1
                     779     ; 
                     780     ; #define READ_TEMP_COUNT 255
                     781     ; #define Timer0_Rate 10
                     782     ; #define Timer0_RateEncoder 5
                     783     ; //
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    13

                     784     ; // SYSCLK/SMB_FREQUENCY/4/3) < 255)
                     785     ; //---------------------------------------------------------
                     786     ; 
                     787     ; // Prototypes
                     788     ; //
                     789     ; void Initialize(void);
                     790     ; void Timer0_Init(void);
                     791     ; void Timer1_Init(void);
                     792     ; void Timer3_Init(void);
                     793     ; void Timer3_ISR(void);
                     794     ; void Timer0_ISR(void);
                     795     ; void OSCILLATOR_Init (void);
                     796     ; void Ext_Interrupt_Init (void);
                     797     ; void Port_Init(void);
                     798     ; void SMBus_Init (void);
                     799     ; void SMBus_ISR(void);
                     800     ; //
                     801     ; // Функции контроллера юзер интерфейсные
                     802     ; void EEPROM_ByteWrite(U16 addr, unsigned char dat);
                     803     ; unsigned char EEPROM_ByteRead(U16 addr);
                     804     ; void LedsSwitchOff(void);
                     805     ; void OutSymbol(unsigned char , unsigned char);
                     806     ; void WriteCounterToEEprom(void);
                     807     ; void WriteDiscretToEEprom(void);
                     808     ; void LcdOutputLine(unsigned char);
                     809     ; void EncoderScan2(void);
                     810     ; void EncoderScan3(void);
                     811     ; void EncoderScan4(void);
                     812     ; void EncoderScan5(void);
                     813     ; 
                     814     ; //
                     815     ; void ResetCounterToOutputBuffer(void);
                     816     ; void OutputBufferToResetCounter(void);
                     817     ; //
                     818     ; void Del_10mks(void);
                     819     ; void Del_25ms(void);
                     820     ; void Del_100ms(void);
                     821     ; void Del_500mks(void);
                     822     ; void Del_10ms(void);
                     823     ; void Del(int);
                     824     ; ////////////////////////////
                     825     ; ////////////////////////////
                     826     ; // GLOBAL ПЕРЕМЕННЫЕ !!!
                     827     ; ////////////////////////////
                     828     ; unsigned char Flag = 0;
                     829     ; unsigned long Counter = 0, TempCounter, Discret ;
                     830     ; bit Flag1 = 1;
                     831     ; bit FlagPoint = 0;
                     832     ; bit KeyFlag1 = 0;
                     833     ; bit KeyFlag2 = 0;
                     834     ; bit KeyFlag3 = 0;
                     835     ; bit KeyFlag4 = 0;
                     836     ; bit LongKeyFlag = 0;
                     837     ; unsigned int LongKeyFlagCounter = 0;
                     838     ; unsigned char LcdMode = 0;
                     839     ; //unsigned int Discret = 0;
                     840     ; unsigned char EncData, EncState, OldState, EncTemp;
                     841     ; unsigned char EncN = 0, EncOld[4] = {0, 0, 1, 0};
                     842     ; unsigned char Step,Low,High;
                     843     ; bit Rotate;
                     844     ; 
                     845     ; bit now_a, now_b, pre_a, pre_b;
                     846     ; 
                     847     ; static unsigned char New, EncPlus, EncMinus;//Переменные нового значения нкодера, промежу
                             точные переменные + и -
                     848     ; 
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    14

                     849     ; //
                     850     ; // массивы
                     851     ; //
                     852     ; unsigned char data    OutputBuffer[6];
                     853     ; unsigned char data    In_Packet[10];
                     854     ; 
                     855     ; //unsigned char waveform[256];
                     856     ; //
                     857     ; // Переменные для функций работы с EEPROM
                     858     ; 
                     859     ; unsigned char* pSMB_DATA_IN;           // Global pointer for SMBus data
                     860     ;                                        // All receive data is written here
                     861     ; 
                     862     ; unsigned char SMB_SINGLEBYTE_OUT;      // Global holder for single byte writes.
                     863     ; 
                     864     ; unsigned char* pSMB_DATA_OUT;          // Global pointer for SMBus data.
                     865     ;                                        // All transmit data is read from here
                     866     ; 
                     867     ; unsigned char SMB_DATA_LEN;            // Global holder for number of bytes
                     868     ;                                        // to send or receive in the current
                     869     ;                                        // SMBus transfer.
                     870     ; 
                     871     ; unsigned char WORD_ADDR_HIGH;               // Global holder for the EEPROM word
                     872     ;                                        // address that will be accessed in
                     873     ;                                        // the next transfer
                     874     ; 
                     875     ; unsigned char WORD_ADDR_LOW;
                     876     ; 
                     877     ; bit SMB_BUSY = 0;                      // Software flag to indicate when the
                     878     ;                                        // EEPROM_ByteRead() or
                     879     ;                                        // EEPROM_ByteWrite()
                     880     ;                                        // functions have claimed the SMBus
                     881     ; 
                     882     ; bit SMB_RW;                            // Software flag to indicate the
                     883     ;                                        // direction of the current transfer
                     884     ; 
                     885     ; bit SMB_SENDWORDADDR_LOW;                  // When set, this flag causes the ISR
                     886     ;                                        // to send the 8-bit <WORD_ADDR>
                     887     ;                                        // after sending the slave address.
                     888     ; bit SMB_SENDWORDADDR_HIGH;
                     889     ; 
                     890     ; bit SMB_RANDOMREAD;                    // When set, this flag causes the ISR
                     891     ;                                        // to send a START signal after sending
                     892     ;                                        // the word address.
                     893     ;                                        // For the 24LC02B EEPROM, a random read
                     894     ;                                        // (a read from a particular address in
                     895     ;                                        // memory) starts as a write then
                     896     ;                                        // changes to a read after the repeated
                     897     ;                                        // start is sent. The ISR handles this
                     898     ;                                        // switchover if the <SMB_RANDOMREAD>
                     899     ;                                        // bit is set.
                     900     ; 
                     901     ; bit SMB_ACKPOLL;                       // When set, this flag causes the ISR
                     902     ;                                        // to send a repeated START until the
                     903     ;                                        // slave has acknowledged its address
                     904     ; 
                     905     ; /*** [BEGIN] USB Descriptor Information [BEGIN] ***/
                     906     ; 
                     907     ; SEGMENT_VARIABLE(USB_VID, U16, SEG_CODE) = 0x10c4;
                     908     ; SEGMENT_VARIABLE(USB_PID, U16, SEG_CODE) = 0xea61;
                     909     ; SEGMENT_VARIABLE(USB_MfrStr[], char , SEG_CODE) = // Manufacturer String
                     910     ; {
                     911     ;    0x1A,
                     912     ;    0x03,
                     913     ;    'H',0,
                     914     ;    'a',0,
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    15

                     915     ;    't',0,
                     916     ;    'a',0,
                     917     ;    'b',0,
                     918     ;    '@',0,
                     919     ;    'C',0,
                     920     ;    'o',0,
                     921     ;    ' ',0
                     922     ; 
                     923     ; };
                     924     ; SEGMENT_VARIABLE(USB_ProductStr[], unsigned char , SEG_CODE) = // Product Desc. String
                     925     ; {
                     926     ;    0x10,
                     927     ;    0x03,
                     928     ;    'H',0,
                     929     ;    'a',0,
                     930     ;    't',0,
                     931     ;    'S',0,
                     932     ;    'a',0,
                     933     ;    'm',0,
                     934     ;    'w',0,
                     935     ;    'i',0,
                     936     ;    'l',0,
                     937     ;    'l',0
                     938     ; };
                     939     ; 
                     940     ; SEGMENT_VARIABLE(USB_SerialStr[], unsigned char , SEG_CODE) = // Serial Number String
                     941     ; {
                     942     ;    0x0A,
                     943     ;    0x03,
                     944     ;    '0',0,
                     945     ;    '0',0,
                     946     ;    '0',0,
                     947     ;    '1',0,
                     948     ; };
                     949     ; 
                     950     ; SEGMENT_VARIABLE(USB_MaxPower, unsigned char , SEG_CODE) = 15;    // Max current = 30 mA
                     951     ;                                                       // (15 * 2)
                     952     ; SEGMENT_VARIABLE(USB_PwAttributes, unsigned char , SEG_CODE) = 0x80;    // Bus-powered,
                     953     ;                                                           // remote wakeup not
                     954     ;                                                          // supported
                     955     ; SEGMENT_VARIABLE(USB_bcdDevice, U16, SEG_CODE) = 0x0100;    // Device release
                     956     ;                                                             // number 1.00
                     957     ; 
                     958     ; SEGMENT_VARIABLE(DEVICE_NAME_Str[], unsigned char , SEG_CODE) = // Serial Number String
                     959     ; {'H','a','t','S','a','m' };
                     960     ; SEGMENT_VARIABLE(DEVICE_SN_Str[], unsigned char , SEG_CODE) = { 1,2,3,4 };
                     961     ; SEGMENT_VARIABLE(LCD_STRING[], unsigned char, SEG_CODE) = {'-','-','-','-','-','-'};
                     962     ; /*** [ END ] USB Descriptor Information [ END ] ***/
                     963     ; 
                     964     ; #define ERROR_EEPROM 1
                     965     ; 
                     966     ; void main(void)
                     967     
----                 968             RSEG  ?PR?main?MAIN
0000                 969     main:
                     970             USING   0
                     971                             ; SOURCE LINE # 347
                     972     ; {
                     973                             ; SOURCE LINE # 348
                     974     ;       unsigned char i;
                     975     ;       bit UpDown = 0;
                     976                             ; SOURCE LINE # 350
0000 C200     F      977             CLR     UpDown?041
                     978     ;       long    temp;
                     979     ;       PCA0MD &= ~0x40;                       // Disable Watchdog timer
                     980                             ; SOURCE LINE # 352
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    16

0002 53D9BF          981             ANL     PCA0MD,#0BFH
                     982     ;       Initialize();
                     983                             ; SOURCE LINE # 353
0005 120000   F      984             LCALL   Initialize
                     985     ; 
                     986     ; //    USB_Clock_Start();                     // Init USB clock *before* calling USB_Init
                     987     ; //    USB_Init(USB_VID,USB_PID,USB_MfrStr,USB_ProductStr,USB_SerialStr,USB_MaxPower,USB_P
                             wAttributes,USB_bcdDevice);
                     988     ;       
                     989     ; //    USB_Int_Enable();
                     990     ; 
                     991     ; // If slave is holding SDA low because of an improper SMBus reset or error
                     992     ;       
                     993     ; //    while (1)
                     994     ; 
                     995     ;       LedsSwitchOff();
                     996                             ; SOURCE LINE # 364
0008 120000   F      997             LCALL   LedsSwitchOff
                     998     ;       
                     999     ;       SEGMENT_A = 1;
                    1000                             ; SOURCE LINE # 366
000B D290           1001             SETB    SEGMENT_A
                    1002     ;       LED1 = 0;
                    1003                             ; SOURCE LINE # 367
000D C297           1004             CLR     LED1
000F                1005     ?C0001:
                    1006     ; 
                    1007     ;       while(!EEPROM_SDA)
                    1008                             ; SOURCE LINE # 369
000F 20801B         1009             JB      EEPROM_SDA,?C0002
                    1010     ;       {
                    1011                             ; SOURCE LINE # 370
                    1012     ; 
                    1013     ;   // Provide clock pulses to allow the slave to advance out
                    1014     ;       // of its current state. This will allow it to release SDA.
                    1015     ;               XBR1 = 0x40;                     // Enable Crossbar
                    1016                             ; SOURCE LINE # 374
0012 75E240         1017             MOV     XBR1,#040H
                    1018     ;       EEPROM_SCL = 0;                  // Drive the clock low
                    1019                             ; SOURCE LINE # 375
0015 C281           1020             CLR     EEPROM_SCL
                    1021     ;       for (i = 0; i < 255; i++) {  } // Hold the clock low
                    1022                             ; SOURCE LINE # 376
                    1023     ;---- Variable 'i?040' assigned to Register 'R7' ----
0017 E4             1024             CLR     A
0018 FF             1025             MOV     R7,A
0019                1026     ?C0003:
0019 0F             1027             INC     R7
001A BFFFFC         1028             CJNE    R7,#0FFH,?C0003
001D                1029     ?C0004:
                    1030     ;       EEPROM_SCL = 1; ;//                 // Release the clock
                    1031                             ; SOURCE LINE # 377
001D D281           1032             SETB    EEPROM_SCL
001F                1033     ?C0006:
                    1034     ;       while(!EEPROM_SCL);// { }//;              // Wait for open-drain
                    1035                             ; SOURCE LINE # 378
001F 3081FD         1036             JNB     EEPROM_SCL,?C0006
0022                1037     ?C0007:
                    1038     ;                                                // clock output to rise
                    1039     ;       for(i = 0; i < 10; i++);         // Hold the clock high
                    1040                             ; SOURCE LINE # 380
0022 E4             1041             CLR     A
0023 FF             1042             MOV     R7,A
0024                1043     ?C0008:
0024 0F             1044             INC     R7
0025 BF0AFC         1045             CJNE    R7,#0AH,?C0008
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    17

0028                1046     ?C0009:
                    1047     ; 
                    1048     ;               XBR1 = 0x00;                     // Disable Crossbar
                    1049                             ; SOURCE LINE # 382
0028 E4             1050             CLR     A
0029 F5E2           1051             MOV     XBR1,A
                    1052     ;       }
                    1053                             ; SOURCE LINE # 383
002B 80E2           1054             SJMP    ?C0001
002D                1055     ?C0002:
                    1056     ;       SEGMENT_A = 0;
                    1057                             ; SOURCE LINE # 384
002D C290           1058             CLR     SEGMENT_A
                    1059     ;       LED1 = 1;
                    1060                             ; SOURCE LINE # 385
002F D297           1061             SETB    LED1
                    1062     ;       
                    1063     ;       EIE1 |= 0x01;                       // Enable the SMBus interrupt
                    1064                             ; SOURCE LINE # 387
0031 43E601         1065             ORL     EIE1,#01H
                    1066     ;       EA = 1;
                    1067                             ; SOURCE LINE # 388
0034 D2AF           1068             SETB    EA
                    1069     ;       ET0 = 1; // Timer0
                    1070                             ; SOURCE LINE # 389
0036 D2A9           1071             SETB    ET0
                    1072     ;       
                    1073     ;       LcdOutputLine(5);
                    1074                             ; SOURCE LINE # 391
0038 7F05           1075             MOV     R7,#05H
003A 120000   F     1076             LCALL   _LcdOutputLine
                    1077     ;       ResetCounterToOutputBuffer();
                    1078                             ; SOURCE LINE # 392
003D 120000   F     1079             LCALL   ResetCounterToOutputBuffer
                    1080     ; 
                    1081     ; // Увиличение счетчика сброса <HARD_RESET>
                    1082     ;       if (OutputBuffer[0] < 0xFF) OutputBuffer[0]++;
                    1083                             ; SOURCE LINE # 395
0040 E500     F     1084             MOV     A,OutputBuffer
0042 C3             1085             CLR     C
0043 94FF           1086             SUBB    A,#0FFH
0045 5004           1087             JNC     ?C0011
0047 0500     F     1088             INC     OutputBuffer
0049 8028           1089             SJMP    ?C0012
004B                1090     ?C0011:
                    1091     ;       else 
                    1092     ;       { 
                    1093                             ; SOURCE LINE # 397
                    1094     ;               OutputBuffer[0] = 0; 
                    1095                             ; SOURCE LINE # 398
004B E4             1096             CLR     A
004C F500     F     1097             MOV     OutputBuffer,A
                    1098     ;               if (OutputBuffer[1] < 0xFF) OutputBuffer[1]++;
                    1099                             ; SOURCE LINE # 399
004E E500     F     1100             MOV     A,OutputBuffer+01H
0050 C3             1101             CLR     C
0051 94FF           1102             SUBB    A,#0FFH
0053 5004           1103             JNC     ?C0013
0055 0500     F     1104             INC     OutputBuffer+01H
0057 801A           1105             SJMP    ?C0012
0059                1106     ?C0013:
                    1107     ;               else
                    1108     ;               {
                    1109                             ; SOURCE LINE # 401
                    1110     ;                       OutputBuffer[1] = 0;
                    1111                             ; SOURCE LINE # 402
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    18

0059 E4             1112             CLR     A
005A F500     F     1113             MOV     OutputBuffer+01H,A
                    1114     ;                       if (OutputBuffer[2] < 0xFF) OutputBuffer[2]++;
                    1115                             ; SOURCE LINE # 403
005C E500     F     1116             MOV     A,OutputBuffer+02H
005E C3             1117             CLR     C
005F 94FF           1118             SUBB    A,#0FFH
0061 5004           1119             JNC     ?C0015
0063 0500     F     1120             INC     OutputBuffer+02H
0065 800C           1121             SJMP    ?C0012
0067                1122     ?C0015:
                    1123     ;                       else
                    1124     ;                       {
                    1125                             ; SOURCE LINE # 405
                    1126     ;                               OutputBuffer[2] = 0;
                    1127                             ; SOURCE LINE # 406
0067 E4             1128             CLR     A
0068 F500     F     1129             MOV     OutputBuffer+02H,A
                    1130     ;                               if (OutputBuffer[3] < 0xFF) OutputBuffer[3]++;
                    1131                             ; SOURCE LINE # 407
006A E500     F     1132             MOV     A,OutputBuffer+03H
006C C3             1133             CLR     C
006D 94FF           1134             SUBB    A,#0FFH
006F 5002           1135             JNC     ?C0012
0071 0500     F     1136             INC     OutputBuffer+03H
                    1137     ;                       }
                    1138                             ; SOURCE LINE # 408
                    1139     ;               }
                    1140                             ; SOURCE LINE # 409
                    1141     ;       }
                    1142                             ; SOURCE LINE # 410
0073                1143     ?C0012:
                    1144     ;       OutputBufferToResetCounter();
                    1145                             ; SOURCE LINE # 411
0073 120000   F     1146             LCALL   OutputBufferToResetCounter
                    1147     ; 
                    1148     ; //    SoftReset(SOFT_RESET);
                    1149     ; 
                    1150     ;       Counter = 0;
                    1151                             ; SOURCE LINE # 415
0076 E4             1152             CLR     A
0077 F500     F     1153             MOV     Counter+03H,A
0079 F500     F     1154             MOV     Counter+02H,A
007B F500     F     1155             MOV     Counter+01H,A
007D F500     F     1156             MOV     Counter,A
                    1157     ;       Counter = EEPROM_ByteRead(EEPROM_COUNTER_ADDR_HIGH);
                    1158                             ; SOURCE LINE # 416
007F 7F05           1159             MOV     R7,#05H
0081 FE             1160             MOV     R6,A
0082 120000   F     1161             LCALL   _EEPROM_ByteRead
0085 E4             1162             CLR     A
0086 8F00     F     1163             MOV     Counter+03H,R7
0088 F500     F     1164             MOV     Counter+02H,A
008A F500     F     1165             MOV     Counter+01H,A
008C F500     F     1166             MOV     Counter,A
                    1167     ;       Counter = Counter<<8;
                    1168                             ; SOURCE LINE # 417
008E AE00     F     1169             MOV     R6,Counter+02H
0090 AD00     F     1170             MOV     R5,Counter+01H
0092 AC00     F     1171             MOV     R4,Counter
0094 7808           1172             MOV     R0,#08H
0096 120000   F     1173             LCALL   ?C?LSHL
0099 8F00     F     1174             MOV     Counter+03H,R7
009B 8E00     F     1175             MOV     Counter+02H,R6
009D 8D00     F     1176             MOV     Counter+01H,R5
009F 8C00     F     1177             MOV     Counter,R4
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    19

                    1178     ;       Counter |= EEPROM_ByteRead(EEPROM_COUNTER_ADDR_LOW);
                    1179                             ; SOURCE LINE # 418
00A1 7F04           1180             MOV     R7,#04H
00A3 7E00           1181             MOV     R6,#00H
00A5 120000   F     1182             LCALL   _EEPROM_ByteRead
00A8 E500     F     1183             MOV     A,Counter+03H
00AA 4F             1184             ORL     A,R7
00AB F500     F     1185             MOV     Counter+03H,A
00AD E500     F     1186             MOV     A,Counter+02H
00AF F500     F     1187             MOV     Counter+02H,A
00B1 E500     F     1188             MOV     A,Counter+01H
00B3 F500     F     1189             MOV     Counter+01H,A
00B5 E500     F     1190             MOV     A,Counter
00B7 F500     F     1191             MOV     Counter,A
                    1192     ;       
                    1193     ;       Discret = 0;
                    1194                             ; SOURCE LINE # 420
00B9 E4             1195             CLR     A
00BA F500     F     1196             MOV     Discret+03H,A
00BC F500     F     1197             MOV     Discret+02H,A
00BE F500     F     1198             MOV     Discret+01H,A
00C0 F500     F     1199             MOV     Discret,A
                    1200     ;       Discret = EEPROM_ByteRead(EEPROM_DISCRET_ADDR_HIGH);
                    1201                             ; SOURCE LINE # 421
00C2 7F21           1202             MOV     R7,#021H
00C4 FE             1203             MOV     R6,A
00C5 120000   F     1204             LCALL   _EEPROM_ByteRead
00C8 E4             1205             CLR     A
00C9 8F00     F     1206             MOV     Discret+03H,R7
00CB F500     F     1207             MOV     Discret+02H,A
00CD F500     F     1208             MOV     Discret+01H,A
00CF F500     F     1209             MOV     Discret,A
                    1210     ;       Discret = Discret <<8;
                    1211                             ; SOURCE LINE # 422
00D1 AE00     F     1212             MOV     R6,Discret+02H
00D3 AD00     F     1213             MOV     R5,Discret+01H
00D5 AC00     F     1214             MOV     R4,Discret
00D7 7808           1215             MOV     R0,#08H
00D9 120000   F     1216             LCALL   ?C?LSHL
00DC 8F00     F     1217             MOV     Discret+03H,R7
00DE 8E00     F     1218             MOV     Discret+02H,R6
00E0 8D00     F     1219             MOV     Discret+01H,R5
00E2 8C00     F     1220             MOV     Discret,R4
                    1221     ;       Discret |= EEPROM_ByteRead(EEPROM_DISCRET_ADDR_LOW);
                    1222                             ; SOURCE LINE # 423
00E4 7F20           1223             MOV     R7,#020H
00E6 7E00           1224             MOV     R6,#00H
00E8 120000   F     1225             LCALL   _EEPROM_ByteRead
00EB E500     F     1226             MOV     A,Discret+03H
00ED 4F             1227             ORL     A,R7
00EE F500     F     1228             MOV     Discret+03H,A
00F0 E500     F     1229             MOV     A,Discret+02H
00F2 F500     F     1230             MOV     Discret+02H,A
00F4 E500     F     1231             MOV     A,Discret+01H
00F6 F500     F     1232             MOV     Discret+01H,A
00F8 E500     F     1233             MOV     A,Discret
00FA F500     F     1234             MOV     Discret,A
                    1235     ; 
                    1236     ;       LcdMode = EEPROM_ByteRead(EEPROM_LCDMODE_ADDR);
                    1237                             ; SOURCE LINE # 425
00FC 7F10           1238             MOV     R7,#010H
00FE 7E00           1239             MOV     R6,#00H
0100 120000   F     1240             LCALL   _EEPROM_ByteRead
0103 8F00     F     1241             MOV     LcdMode,R7
                    1242     ; 
                    1243     ;       if (LcdMode >1) { LcdMode = 1; LcdOutputLine(1); EEPROM_ByteWrite(EEPROM_LCDMODE_AD
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    20

                             DR,LcdMode); }
                    1244                             ; SOURCE LINE # 427
0105 E500     F     1245             MOV     A,LcdMode
0107 D3             1246             SETB    C
0108 9401           1247             SUBB    A,#01H
010A 400B           1248             JC      ?C0019
010C 750001   F     1249             MOV     LcdMode,#01H
010F 7F01           1250             MOV     R7,#01H
0111 120000   F     1251             LCALL   _LcdOutputLine
0114 120000   F     1252             LCALL   L?0249
0117                1253     ?C0019:
                    1254     ;       while (1) 
                    1255                             ; SOURCE LINE # 428
                    1256     ;       {
                    1257                             ; SOURCE LINE # 429
                    1258     ; //    if (Counter > 39000) Counter = 39000;
                    1259     ; //    EncoderScan5();
                    1260     ;       FlagPoint = 0;
                    1261                             ; SOURCE LINE # 432
0117 C200     F     1262             CLR     FlagPoint
                    1263     ; 
                    1264     ;       switch (LcdMode)
                    1265                             ; SOURCE LINE # 434
0119 E500     F     1266             MOV     A,LcdMode
011B 14             1267             DEC     A
011C 7003           1268             JNZ     $ + 5H
011E 020000   F     1269             LJMP    ?C0031
0121 04             1270             INC     A
0122 6003           1271             JZ      $ + 5H
0124 020000   F     1272             LJMP    ?C0021
                    1273     ;       {
                    1274                             ; SOURCE LINE # 435
                    1275     ;       case 0:
                    1276                             ; SOURCE LINE # 436
0127                1277     ?C0022:
                    1278     ;               {
                    1279                             ; SOURCE LINE # 437
                    1280     ;                       TempCounter = Counter & 0xFFFF;
                    1281                             ; SOURCE LINE # 438
0127 E500     F     1282             MOV     A,Counter+03H
0129 F500     F     1283             MOV     TempCounter+03H,A
012B E500     F     1284             MOV     A,Counter+02H
012D F500     F     1285             MOV     TempCounter+02H,A
012F E4             1286             CLR     A
0130 F500     F     1287             MOV     TempCounter+01H,A
0132 F500     F     1288             MOV     TempCounter,A
                    1289     ;                       if (TempCounter > 9999) 
                    1290                             ; SOURCE LINE # 439
0134 7F0F           1291             MOV     R7,#0FH
0136 7E27           1292             MOV     R6,#027H
0138 FD             1293             MOV     R5,A
0139 FC             1294             MOV     R4,A
013A AB00     F     1295             MOV     R3,TempCounter+03H
013C AA00     F     1296             MOV     R2,TempCounter+02H
013E A900     F     1297             MOV     R1,TempCounter+01H
0140 A800     F     1298             MOV     R0,TempCounter
0142 D3             1299             SETB    C
0143 120000   F     1300             LCALL   ?C?ULCMP
0146 E4             1301             CLR     A
0147 404A           1302             JC      ?C0023
                    1303     ;                       {
                    1304                             ; SOURCE LINE # 440
                    1305     ;                               temp = TempCounter / 10000;
                    1306                             ; SOURCE LINE # 441
0149 7B10           1307             MOV     R3,#010H
014B 7A27           1308             MOV     R2,#027H
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    21

014D F9             1309             MOV     R1,A
014E F8             1310             MOV     R0,A
014F AF00     F     1311             MOV     R7,TempCounter+03H
0151 AE00     F     1312             MOV     R6,TempCounter+02H
0153 AD00     F     1313             MOV     R5,TempCounter+01H
0155 AC00     F     1314             MOV     R4,TempCounter
0157 120000   F     1315             LCALL   ?C?ULDIV
015A 8F00     F     1316             MOV     temp?042+03H,R7
015C 8E00     F     1317             MOV     temp?042+02H,R6
015E 8D00     F     1318             MOV     temp?042+01H,R5
0160 8C00     F     1319             MOV     temp?042,R4
                    1320     ;                               OutputBuffer[0] = temp;
                    1321                             ; SOURCE LINE # 442
0162 8F00     F     1322             MOV     OutputBuffer,R7
                    1323     ;                               TempCounter = TempCounter - temp*10000;
                    1324                             ; SOURCE LINE # 443
0164 E4             1325             CLR     A
0165 7F10           1326             MOV     R7,#010H
0167 7E27           1327             MOV     R6,#027H
0169 FD             1328             MOV     R5,A
016A FC             1329             MOV     R4,A
016B AB00     F     1330             MOV     R3,temp?042+03H
016D AA00     F     1331             MOV     R2,temp?042+02H
016F A900     F     1332             MOV     R1,temp?042+01H
0171 A800     F     1333             MOV     R0,temp?042
0173 120000   F     1334             LCALL   ?C?LMUL
0176 AA06           1335             MOV     R2,AR6
0178 A905           1336             MOV     R1,AR5
017A A804           1337             MOV     R0,AR4
017C C3             1338             CLR     C
017D E500     F     1339             MOV     A,TempCounter+03H
017F 9F             1340             SUBB    A,R7
0180 F500     F     1341             MOV     TempCounter+03H,A
0182 E500     F     1342             MOV     A,TempCounter+02H
0184 9A             1343             SUBB    A,R2
0185 F500     F     1344             MOV     TempCounter+02H,A
0187 E500     F     1345             MOV     A,TempCounter+01H
0189 99             1346             SUBB    A,R1
018A F500     F     1347             MOV     TempCounter+01H,A
018C E500     F     1348             MOV     A,TempCounter
018E 98             1349             SUBB    A,R0
018F F500     F     1350             MOV     TempCounter,A
                    1351     ;                       }
                    1352                             ; SOURCE LINE # 444
0191 8002           1353             SJMP    ?C0024
0193                1354     ?C0023:
                    1355     ;                       else OutputBuffer[0] = 0;
                    1356                             ; SOURCE LINE # 445
0193 F500     F     1357             MOV     OutputBuffer,A
0195                1358     ?C0024:
                    1359     ; 
                    1360     ;                       if (TempCounter > 999) 
                    1361                             ; SOURCE LINE # 447
0195 E4             1362             CLR     A
0196 7FE7           1363             MOV     R7,#0E7H
0198 7E03           1364             MOV     R6,#03H
019A FD             1365             MOV     R5,A
019B FC             1366             MOV     R4,A
019C AB00     F     1367             MOV     R3,TempCounter+03H
019E AA00     F     1368             MOV     R2,TempCounter+02H
01A0 A900     F     1369             MOV     R1,TempCounter+01H
01A2 A800     F     1370             MOV     R0,TempCounter
01A4 D3             1371             SETB    C
01A5 120000   F     1372             LCALL   ?C?ULCMP
01A8 E4             1373             CLR     A
01A9 404A           1374             JC      ?C0025
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    22

                    1375     ;                       {
                    1376                             ; SOURCE LINE # 448
                    1377     ;                               temp = TempCounter / 1000;
                    1378                             ; SOURCE LINE # 449
01AB 7BE8           1379             MOV     R3,#0E8H
01AD 7A03           1380             MOV     R2,#03H
01AF F9             1381             MOV     R1,A
01B0 F8             1382             MOV     R0,A
01B1 AF00     F     1383             MOV     R7,TempCounter+03H
01B3 AE00     F     1384             MOV     R6,TempCounter+02H
01B5 AD00     F     1385             MOV     R5,TempCounter+01H
01B7 AC00     F     1386             MOV     R4,TempCounter
01B9 120000   F     1387             LCALL   ?C?ULDIV
01BC 8F00     F     1388             MOV     temp?042+03H,R7
01BE 8E00     F     1389             MOV     temp?042+02H,R6
01C0 8D00     F     1390             MOV     temp?042+01H,R5
01C2 8C00     F     1391             MOV     temp?042,R4
                    1392     ;                               OutputBuffer[1] = temp;
                    1393                             ; SOURCE LINE # 450
01C4 8F00     F     1394             MOV     OutputBuffer+01H,R7
                    1395     ;                               TempCounter = TempCounter - temp*1000;
                    1396                             ; SOURCE LINE # 451
01C6 E4             1397             CLR     A
01C7 7FE8           1398             MOV     R7,#0E8H
01C9 7E03           1399             MOV     R6,#03H
01CB FD             1400             MOV     R5,A
01CC FC             1401             MOV     R4,A
01CD AB00     F     1402             MOV     R3,temp?042+03H
01CF AA00     F     1403             MOV     R2,temp?042+02H
01D1 A900     F     1404             MOV     R1,temp?042+01H
01D3 A800     F     1405             MOV     R0,temp?042
01D5 120000   F     1406             LCALL   ?C?LMUL
01D8 AA06           1407             MOV     R2,AR6
01DA A905           1408             MOV     R1,AR5
01DC A804           1409             MOV     R0,AR4
01DE C3             1410             CLR     C
01DF E500     F     1411             MOV     A,TempCounter+03H
01E1 9F             1412             SUBB    A,R7
01E2 F500     F     1413             MOV     TempCounter+03H,A
01E4 E500     F     1414             MOV     A,TempCounter+02H
01E6 9A             1415             SUBB    A,R2
01E7 F500     F     1416             MOV     TempCounter+02H,A
01E9 E500     F     1417             MOV     A,TempCounter+01H
01EB 99             1418             SUBB    A,R1
01EC F500     F     1419             MOV     TempCounter+01H,A
01EE E500     F     1420             MOV     A,TempCounter
01F0 98             1421             SUBB    A,R0
01F1 F500     F     1422             MOV     TempCounter,A
                    1423     ;                       } else OutputBuffer[1] = 0;
                    1424                             ; SOURCE LINE # 452
01F3 8002           1425             SJMP    ?C0026
01F5                1426     ?C0025:
01F5 F500     F     1427             MOV     OutputBuffer+01H,A
01F7                1428     ?C0026:
                    1429     ; 
                    1430     ;                       if (TempCounter > 99) 
                    1431                             ; SOURCE LINE # 454
01F7 E4             1432             CLR     A
01F8 7F63           1433             MOV     R7,#063H
01FA FE             1434             MOV     R6,A
01FB FD             1435             MOV     R5,A
01FC FC             1436             MOV     R4,A
01FD AB00     F     1437             MOV     R3,TempCounter+03H
01FF AA00     F     1438             MOV     R2,TempCounter+02H
0201 A900     F     1439             MOV     R1,TempCounter+01H
0203 A800     F     1440             MOV     R0,TempCounter
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    23

0205 D3             1441             SETB    C
0206 120000   F     1442             LCALL   ?C?ULCMP
0209 E4             1443             CLR     A
020A 4048           1444             JC      ?C0027
                    1445     ;                       {
                    1446                             ; SOURCE LINE # 455
                    1447     ;                               temp = TempCounter / 100;
                    1448                             ; SOURCE LINE # 456
020C 7B64           1449             MOV     R3,#064H
020E FA             1450             MOV     R2,A
020F F9             1451             MOV     R1,A
0210 F8             1452             MOV     R0,A
0211 AF00     F     1453             MOV     R7,TempCounter+03H
0213 AE00     F     1454             MOV     R6,TempCounter+02H
0215 AD00     F     1455             MOV     R5,TempCounter+01H
0217 AC00     F     1456             MOV     R4,TempCounter
0219 120000   F     1457             LCALL   ?C?ULDIV
021C 8F00     F     1458             MOV     temp?042+03H,R7
021E 8E00     F     1459             MOV     temp?042+02H,R6
0220 8D00     F     1460             MOV     temp?042+01H,R5
0222 8C00     F     1461             MOV     temp?042,R4
                    1462     ;                               OutputBuffer[2] = temp;
                    1463                             ; SOURCE LINE # 457
0224 8F00     F     1464             MOV     OutputBuffer+02H,R7
                    1465     ;                               TempCounter = TempCounter - temp*100;
                    1466                             ; SOURCE LINE # 458
0226 E4             1467             CLR     A
0227 7F64           1468             MOV     R7,#064H
0229 FE             1469             MOV     R6,A
022A FD             1470             MOV     R5,A
022B FC             1471             MOV     R4,A
022C AB00     F     1472             MOV     R3,temp?042+03H
022E AA00     F     1473             MOV     R2,temp?042+02H
0230 A900     F     1474             MOV     R1,temp?042+01H
0232 A800     F     1475             MOV     R0,temp?042
0234 120000   F     1476             LCALL   ?C?LMUL
0237 AA06           1477             MOV     R2,AR6
0239 A905           1478             MOV     R1,AR5
023B A804           1479             MOV     R0,AR4
023D C3             1480             CLR     C
023E E500     F     1481             MOV     A,TempCounter+03H
0240 9F             1482             SUBB    A,R7
0241 F500     F     1483             MOV     TempCounter+03H,A
0243 E500     F     1484             MOV     A,TempCounter+02H
0245 9A             1485             SUBB    A,R2
0246 F500     F     1486             MOV     TempCounter+02H,A
0248 E500     F     1487             MOV     A,TempCounter+01H
024A 99             1488             SUBB    A,R1
024B F500     F     1489             MOV     TempCounter+01H,A
024D E500     F     1490             MOV     A,TempCounter
024F 98             1491             SUBB    A,R0
0250 F500     F     1492             MOV     TempCounter,A
                    1493     ;                       } else OutputBuffer[2] = 0;
                    1494                             ; SOURCE LINE # 459
0252 8002           1495             SJMP    ?C0028
0254                1496     ?C0027:
0254 F500     F     1497             MOV     OutputBuffer+02H,A
0256                1498     ?C0028:
                    1499     ; 
                    1500     ;                       if (TempCounter > 9) 
                    1501                             ; SOURCE LINE # 461
0256 E4             1502             CLR     A
0257 7F09           1503             MOV     R7,#09H
0259 FE             1504             MOV     R6,A
025A FD             1505             MOV     R5,A
025B FC             1506             MOV     R4,A
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    24

025C AB00     F     1507             MOV     R3,TempCounter+03H
025E AA00     F     1508             MOV     R2,TempCounter+02H
0260 A900     F     1509             MOV     R1,TempCounter+01H
0262 A800     F     1510             MOV     R0,TempCounter
0264 D3             1511             SETB    C
0265 120000   F     1512             LCALL   ?C?ULCMP
0268 E4             1513             CLR     A
0269 4048           1514             JC      ?C0029
                    1515     ;                       {
                    1516                             ; SOURCE LINE # 462
                    1517     ;                               temp = TempCounter / 10;
                    1518                             ; SOURCE LINE # 463
026B 7B0A           1519             MOV     R3,#0AH
026D FA             1520             MOV     R2,A
026E F9             1521             MOV     R1,A
026F F8             1522             MOV     R0,A
0270 AF00     F     1523             MOV     R7,TempCounter+03H
0272 AE00     F     1524             MOV     R6,TempCounter+02H
0274 AD00     F     1525             MOV     R5,TempCounter+01H
0276 AC00     F     1526             MOV     R4,TempCounter
0278 120000   F     1527             LCALL   ?C?ULDIV
027B 8F00     F     1528             MOV     temp?042+03H,R7
027D 8E00     F     1529             MOV     temp?042+02H,R6
027F 8D00     F     1530             MOV     temp?042+01H,R5
0281 8C00     F     1531             MOV     temp?042,R4
                    1532     ;                               OutputBuffer[3] = temp;
                    1533                             ; SOURCE LINE # 464
0283 8F00     F     1534             MOV     OutputBuffer+03H,R7
                    1535     ;                               TempCounter = TempCounter - temp*10;
                    1536                             ; SOURCE LINE # 465
0285 E4             1537             CLR     A
0286 7F0A           1538             MOV     R7,#0AH
0288 FE             1539             MOV     R6,A
0289 FD             1540             MOV     R5,A
028A FC             1541             MOV     R4,A
028B AB00     F     1542             MOV     R3,temp?042+03H
028D AA00     F     1543             MOV     R2,temp?042+02H
028F A900     F     1544             MOV     R1,temp?042+01H
0291 A800     F     1545             MOV     R0,temp?042
0293 120000   F     1546             LCALL   ?C?LMUL
0296 AA06           1547             MOV     R2,AR6
0298 A905           1548             MOV     R1,AR5
029A A804           1549             MOV     R0,AR4
029C C3             1550             CLR     C
029D E500     F     1551             MOV     A,TempCounter+03H
029F 9F             1552             SUBB    A,R7
02A0 F500     F     1553             MOV     TempCounter+03H,A
02A2 E500     F     1554             MOV     A,TempCounter+02H
02A4 9A             1555             SUBB    A,R2
02A5 F500     F     1556             MOV     TempCounter+02H,A
02A7 E500     F     1557             MOV     A,TempCounter+01H
02A9 99             1558             SUBB    A,R1
02AA F500     F     1559             MOV     TempCounter+01H,A
02AC E500     F     1560             MOV     A,TempCounter
02AE 98             1561             SUBB    A,R0
02AF F500     F     1562             MOV     TempCounter,A
                    1563     ;                       } else OutputBuffer[3] = 0;
                    1564                             ; SOURCE LINE # 466
02B1 8002           1565             SJMP    ?C0030
02B3                1566     ?C0029:
02B3 F500     F     1567             MOV     OutputBuffer+03H,A
02B5                1568     ?C0030:
                    1569     ;                       OutputBuffer[4] = TempCounter ;
                    1570                             ; SOURCE LINE # 467
02B5 850000   F     1571             MOV     OutputBuffer+04H,TempCounter+03H
                    1572     ;               } break;
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    25

                    1573                             ; SOURCE LINE # 468
02B8 020000   F     1574             LJMP    ?C0021
                    1575     ;       case 1:
                    1576                             ; SOURCE LINE # 469
02BB                1577     ?C0031:
                    1578     ;               {
                    1579                             ; SOURCE LINE # 470
                    1580     ;                       TempCounter = ((Counter*100) / Discret);
                    1581                             ; SOURCE LINE # 471
02BB E4             1582             CLR     A
02BC 7F64           1583             MOV     R7,#064H
02BE FE             1584             MOV     R6,A
02BF FD             1585             MOV     R5,A
02C0 FC             1586             MOV     R4,A
02C1 AB00     F     1587             MOV     R3,Counter+03H
02C3 AA00     F     1588             MOV     R2,Counter+02H
02C5 A900     F     1589             MOV     R1,Counter+01H
02C7 A800     F     1590             MOV     R0,Counter
02C9 120000   F     1591             LCALL   ?C?LMUL
02CC AB00     F     1592             MOV     R3,Discret+03H
02CE AA00     F     1593             MOV     R2,Discret+02H
02D0 A900     F     1594             MOV     R1,Discret+01H
02D2 A800     F     1595             MOV     R0,Discret
02D4 120000   F     1596             LCALL   ?C?ULDIV
02D7 8F00     F     1597             MOV     TempCounter+03H,R7
02D9 8E00     F     1598             MOV     TempCounter+02H,R6
02DB 8D00     F     1599             MOV     TempCounter+01H,R5
02DD 8C00     F     1600             MOV     TempCounter,R4
                    1601     ;                       OutputBuffer[0] = 0;
                    1602                             ; SOURCE LINE # 472
02DF E4             1603             CLR     A
02E0 F500     F     1604             MOV     OutputBuffer,A
                    1605     ;                       if (TempCounter > 9999) 
                    1606                             ; SOURCE LINE # 473
02E2 7F0F           1607             MOV     R7,#0FH
02E4 7E27           1608             MOV     R6,#027H
02E6 FD             1609             MOV     R5,A
02E7 FC             1610             MOV     R4,A
02E8 AB00     F     1611             MOV     R3,TempCounter+03H
02EA AA00     F     1612             MOV     R2,TempCounter+02H
02EC A900     F     1613             MOV     R1,TempCounter+01H
02EE A800     F     1614             MOV     R0,TempCounter
02F0 D3             1615             SETB    C
02F1 120000   F     1616             LCALL   ?C?ULCMP
02F4 E4             1617             CLR     A
02F5 404A           1618             JC      ?C0032
                    1619     ;                       {
                    1620                             ; SOURCE LINE # 474
                    1621     ;                               temp = TempCounter / 10000;
                    1622                             ; SOURCE LINE # 475
02F7 7B10           1623             MOV     R3,#010H
02F9 7A27           1624             MOV     R2,#027H
02FB F9             1625             MOV     R1,A
02FC F8             1626             MOV     R0,A
02FD AF00     F     1627             MOV     R7,TempCounter+03H
02FF AE00     F     1628             MOV     R6,TempCounter+02H
0301 AD00     F     1629             MOV     R5,TempCounter+01H
0303 AC00     F     1630             MOV     R4,TempCounter
0305 120000   F     1631             LCALL   ?C?ULDIV
0308 8F00     F     1632             MOV     temp?042+03H,R7
030A 8E00     F     1633             MOV     temp?042+02H,R6
030C 8D00     F     1634             MOV     temp?042+01H,R5
030E 8C00     F     1635             MOV     temp?042,R4
                    1636     ;                               OutputBuffer[1] = temp;
                    1637                             ; SOURCE LINE # 476
0310 8F00     F     1638             MOV     OutputBuffer+01H,R7
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    26

                    1639     ;                               TempCounter = TempCounter - temp*10000;
                    1640                             ; SOURCE LINE # 477
0312 E4             1641             CLR     A
0313 7F10           1642             MOV     R7,#010H
0315 7E27           1643             MOV     R6,#027H
0317 FD             1644             MOV     R5,A
0318 FC             1645             MOV     R4,A
0319 AB00     F     1646             MOV     R3,temp?042+03H
031B AA00     F     1647             MOV     R2,temp?042+02H
031D A900     F     1648             MOV     R1,temp?042+01H
031F A800     F     1649             MOV     R0,temp?042
0321 120000   F     1650             LCALL   ?C?LMUL
0324 AA06           1651             MOV     R2,AR6
0326 A905           1652             MOV     R1,AR5
0328 A804           1653             MOV     R0,AR4
032A C3             1654             CLR     C
032B E500     F     1655             MOV     A,TempCounter+03H
032D 9F             1656             SUBB    A,R7
032E F500     F     1657             MOV     TempCounter+03H,A
0330 E500     F     1658             MOV     A,TempCounter+02H
0332 9A             1659             SUBB    A,R2
0333 F500     F     1660             MOV     TempCounter+02H,A
0335 E500     F     1661             MOV     A,TempCounter+01H
0337 99             1662             SUBB    A,R1
0338 F500     F     1663             MOV     TempCounter+01H,A
033A E500     F     1664             MOV     A,TempCounter
033C 98             1665             SUBB    A,R0
033D F500     F     1666             MOV     TempCounter,A
                    1667     ;                       }
                    1668                             ; SOURCE LINE # 478
033F 8002           1669             SJMP    ?C0033
0341                1670     ?C0032:
                    1671     ;                       else OutputBuffer[1] = 0;
                    1672                             ; SOURCE LINE # 479
0341 F500     F     1673             MOV     OutputBuffer+01H,A
0343                1674     ?C0033:
                    1675     ; 
                    1676     ;                       if (TempCounter > 999) 
                    1677                             ; SOURCE LINE # 481
0343 E4             1678             CLR     A
0344 7FE7           1679             MOV     R7,#0E7H
0346 7E03           1680             MOV     R6,#03H
0348 FD             1681             MOV     R5,A
0349 FC             1682             MOV     R4,A
034A AB00     F     1683             MOV     R3,TempCounter+03H
034C AA00     F     1684             MOV     R2,TempCounter+02H
034E A900     F     1685             MOV     R1,TempCounter+01H
0350 A800     F     1686             MOV     R0,TempCounter
0352 D3             1687             SETB    C
0353 120000   F     1688             LCALL   ?C?ULCMP
0356 E4             1689             CLR     A
0357 404A           1690             JC      ?C0034
                    1691     ;                       {
                    1692                             ; SOURCE LINE # 482
                    1693     ;                               temp = TempCounter / 1000;
                    1694                             ; SOURCE LINE # 483
0359 7BE8           1695             MOV     R3,#0E8H
035B 7A03           1696             MOV     R2,#03H
035D F9             1697             MOV     R1,A
035E F8             1698             MOV     R0,A
035F AF00     F     1699             MOV     R7,TempCounter+03H
0361 AE00     F     1700             MOV     R6,TempCounter+02H
0363 AD00     F     1701             MOV     R5,TempCounter+01H
0365 AC00     F     1702             MOV     R4,TempCounter
0367 120000   F     1703             LCALL   ?C?ULDIV
036A 8F00     F     1704             MOV     temp?042+03H,R7
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    27

036C 8E00     F     1705             MOV     temp?042+02H,R6
036E 8D00     F     1706             MOV     temp?042+01H,R5
0370 8C00     F     1707             MOV     temp?042,R4
                    1708     ;                               OutputBuffer[2] = temp;
                    1709                             ; SOURCE LINE # 484
0372 8F00     F     1710             MOV     OutputBuffer+02H,R7
                    1711     ;                               TempCounter = TempCounter - temp*1000;
                    1712                             ; SOURCE LINE # 485
0374 E4             1713             CLR     A
0375 7FE8           1714             MOV     R7,#0E8H
0377 7E03           1715             MOV     R6,#03H
0379 FD             1716             MOV     R5,A
037A FC             1717             MOV     R4,A
037B AB00     F     1718             MOV     R3,temp?042+03H
037D AA00     F     1719             MOV     R2,temp?042+02H
037F A900     F     1720             MOV     R1,temp?042+01H
0381 A800     F     1721             MOV     R0,temp?042
0383 120000   F     1722             LCALL   ?C?LMUL
0386 AA06           1723             MOV     R2,AR6
0388 A905           1724             MOV     R1,AR5
038A A804           1725             MOV     R0,AR4
038C C3             1726             CLR     C
038D E500     F     1727             MOV     A,TempCounter+03H
038F 9F             1728             SUBB    A,R7
0390 F500     F     1729             MOV     TempCounter+03H,A
0392 E500     F     1730             MOV     A,TempCounter+02H
0394 9A             1731             SUBB    A,R2
0395 F500     F     1732             MOV     TempCounter+02H,A
0397 E500     F     1733             MOV     A,TempCounter+01H
0399 99             1734             SUBB    A,R1
039A F500     F     1735             MOV     TempCounter+01H,A
039C E500     F     1736             MOV     A,TempCounter
039E 98             1737             SUBB    A,R0
039F F500     F     1738             MOV     TempCounter,A
                    1739     ;                       } else OutputBuffer[2] = 0;
                    1740                             ; SOURCE LINE # 486
03A1 8002           1741             SJMP    ?C0035
03A3                1742     ?C0034:
03A3 F500     F     1743             MOV     OutputBuffer+02H,A
03A5                1744     ?C0035:
                    1745     ; 
                    1746     ;                       if (TempCounter > 99) 
                    1747                             ; SOURCE LINE # 488
03A5 E4             1748             CLR     A
03A6 7F63           1749             MOV     R7,#063H
03A8 FE             1750             MOV     R6,A
03A9 FD             1751             MOV     R5,A
03AA FC             1752             MOV     R4,A
03AB AB00     F     1753             MOV     R3,TempCounter+03H
03AD AA00     F     1754             MOV     R2,TempCounter+02H
03AF A900     F     1755             MOV     R1,TempCounter+01H
03B1 A800     F     1756             MOV     R0,TempCounter
03B3 D3             1757             SETB    C
03B4 120000   F     1758             LCALL   ?C?ULCMP
03B7 E4             1759             CLR     A
03B8 4048           1760             JC      ?C0036
                    1761     ;                       {
                    1762                             ; SOURCE LINE # 489
                    1763     ;                               temp = TempCounter / 100;
                    1764                             ; SOURCE LINE # 490
03BA 7B64           1765             MOV     R3,#064H
03BC FA             1766             MOV     R2,A
03BD F9             1767             MOV     R1,A
03BE F8             1768             MOV     R0,A
03BF AF00     F     1769             MOV     R7,TempCounter+03H
03C1 AE00     F     1770             MOV     R6,TempCounter+02H
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    28

03C3 AD00     F     1771             MOV     R5,TempCounter+01H
03C5 AC00     F     1772             MOV     R4,TempCounter
03C7 120000   F     1773             LCALL   ?C?ULDIV
03CA 8F00     F     1774             MOV     temp?042+03H,R7
03CC 8E00     F     1775             MOV     temp?042+02H,R6
03CE 8D00     F     1776             MOV     temp?042+01H,R5
03D0 8C00     F     1777             MOV     temp?042,R4
                    1778     ;                               OutputBuffer[3] = temp;
                    1779                             ; SOURCE LINE # 491
03D2 8F00     F     1780             MOV     OutputBuffer+03H,R7
                    1781     ;                               TempCounter = TempCounter - temp*100;
                    1782                             ; SOURCE LINE # 492
03D4 E4             1783             CLR     A
03D5 7F64           1784             MOV     R7,#064H
03D7 FE             1785             MOV     R6,A
03D8 FD             1786             MOV     R5,A
03D9 FC             1787             MOV     R4,A
03DA AB00     F     1788             MOV     R3,temp?042+03H
03DC AA00     F     1789             MOV     R2,temp?042+02H
03DE A900     F     1790             MOV     R1,temp?042+01H
03E0 A800     F     1791             MOV     R0,temp?042
03E2 120000   F     1792             LCALL   ?C?LMUL
03E5 AA06           1793             MOV     R2,AR6
03E7 A905           1794             MOV     R1,AR5
03E9 A804           1795             MOV     R0,AR4
03EB C3             1796             CLR     C
03EC E500     F     1797             MOV     A,TempCounter+03H
03EE 9F             1798             SUBB    A,R7
03EF F500     F     1799             MOV     TempCounter+03H,A
03F1 E500     F     1800             MOV     A,TempCounter+02H
03F3 9A             1801             SUBB    A,R2
03F4 F500     F     1802             MOV     TempCounter+02H,A
03F6 E500     F     1803             MOV     A,TempCounter+01H
03F8 99             1804             SUBB    A,R1
03F9 F500     F     1805             MOV     TempCounter+01H,A
03FB E500     F     1806             MOV     A,TempCounter
03FD 98             1807             SUBB    A,R0
03FE F500     F     1808             MOV     TempCounter,A
                    1809     ;                       } else OutputBuffer[3] = 0;
                    1810                             ; SOURCE LINE # 493
0400 8002           1811             SJMP    ?C0037
0402                1812     ?C0036:
0402 F500     F     1813             MOV     OutputBuffer+03H,A
0404                1814     ?C0037:
                    1815     ;                       if (TempCounter > 9) 
                    1816                             ; SOURCE LINE # 494
0404 E4             1817             CLR     A
0405 7F09           1818             MOV     R7,#09H
0407 FE             1819             MOV     R6,A
0408 FD             1820             MOV     R5,A
0409 FC             1821             MOV     R4,A
040A AB00     F     1822             MOV     R3,TempCounter+03H
040C AA00     F     1823             MOV     R2,TempCounter+02H
040E A900     F     1824             MOV     R1,TempCounter+01H
0410 A800     F     1825             MOV     R0,TempCounter
0412 D3             1826             SETB    C
0413 120000   F     1827             LCALL   ?C?ULCMP
0416 E4             1828             CLR     A
0417 4048           1829             JC      ?C0038
                    1830     ;                       {
                    1831                             ; SOURCE LINE # 495
                    1832     ;                               temp = TempCounter / 10;
                    1833                             ; SOURCE LINE # 496
0419 7B0A           1834             MOV     R3,#0AH
041B FA             1835             MOV     R2,A
041C F9             1836             MOV     R1,A
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    29

041D F8             1837             MOV     R0,A
041E AF00     F     1838             MOV     R7,TempCounter+03H
0420 AE00     F     1839             MOV     R6,TempCounter+02H
0422 AD00     F     1840             MOV     R5,TempCounter+01H
0424 AC00     F     1841             MOV     R4,TempCounter
0426 120000   F     1842             LCALL   ?C?ULDIV
0429 8F00     F     1843             MOV     temp?042+03H,R7
042B 8E00     F     1844             MOV     temp?042+02H,R6
042D 8D00     F     1845             MOV     temp?042+01H,R5
042F 8C00     F     1846             MOV     temp?042,R4
                    1847     ;                               OutputBuffer[4] = temp;
                    1848                             ; SOURCE LINE # 497
0431 8F00     F     1849             MOV     OutputBuffer+04H,R7
                    1850     ;                               TempCounter = TempCounter - temp*10;
                    1851                             ; SOURCE LINE # 498
0433 E4             1852             CLR     A
0434 7F0A           1853             MOV     R7,#0AH
0436 FE             1854             MOV     R6,A
0437 FD             1855             MOV     R5,A
0438 FC             1856             MOV     R4,A
0439 AB00     F     1857             MOV     R3,temp?042+03H
043B AA00     F     1858             MOV     R2,temp?042+02H
043D A900     F     1859             MOV     R1,temp?042+01H
043F A800     F     1860             MOV     R0,temp?042
0441 120000   F     1861             LCALL   ?C?LMUL
0444 AA06           1862             MOV     R2,AR6
0446 A905           1863             MOV     R1,AR5
0448 A804           1864             MOV     R0,AR4
044A C3             1865             CLR     C
044B E500     F     1866             MOV     A,TempCounter+03H
044D 9F             1867             SUBB    A,R7
044E F500     F     1868             MOV     TempCounter+03H,A
0450 E500     F     1869             MOV     A,TempCounter+02H
0452 9A             1870             SUBB    A,R2
0453 F500     F     1871             MOV     TempCounter+02H,A
0455 E500     F     1872             MOV     A,TempCounter+01H
0457 99             1873             SUBB    A,R1
0458 F500     F     1874             MOV     TempCounter+01H,A
045A E500     F     1875             MOV     A,TempCounter
045C 98             1876             SUBB    A,R0
045D F500     F     1877             MOV     TempCounter,A
                    1878     ;                       } else OutputBuffer[4] = 0;
                    1879                             ; SOURCE LINE # 499
045F 8002           1880             SJMP    ?C0039
0461                1881     ?C0038:
0461 F500     F     1882             MOV     OutputBuffer+04H,A
0463                1883     ?C0039:
                    1884     ;                       OutputBuffer[5] = TempCounter ;
                    1885                             ; SOURCE LINE # 500
0463 850000   F     1886             MOV     OutputBuffer+05H,TempCounter+03H
                    1887     ;               } break;
                    1888                             ; SOURCE LINE # 501
                    1889     ;       }
                    1890                             ; SOURCE LINE # 502
0466                1891     ?C0021:
                    1892     ; 
                    1893     ; 
                    1894     ;       if ((KEY1 == 0) & (LongKeyFlag == 0)) 
                    1895                             ; SOURCE LINE # 505
0466 200004   F     1896             JB      LongKeyFlag,?C0041
0469 7F01           1897             MOV     R7,#01H
046B 8002           1898             SJMP    ?C0042
046D                1899     ?C0041:
046D 7F00           1900             MOV     R7,#00H
046F                1901     ?C0042:
046F 208404         1902             JB      KEY1,?C0043
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    30

0472 7E01           1903             MOV     R6,#01H
0474 8002           1904             SJMP    ?C0044
0476                1905     ?C0043:
0476 7E00           1906             MOV     R6,#00H
0478                1907     ?C0044:
0478 EE             1908             MOV     A,R6
0479 5F             1909             ANL     A,R7
047A 6018           1910             JZ      ?C0040
                    1911     ;       {
                    1912                             ; SOURCE LINE # 506
                    1913     ;               LongKeyFlagCounter++;
                    1914                             ; SOURCE LINE # 507
047C 0500     F     1915             INC     LongKeyFlagCounter+01H
047E E500     F     1916             MOV     A,LongKeyFlagCounter+01H
0480 7002           1917             JNZ     ?C0226
0482 0500     F     1918             INC     LongKeyFlagCounter
0484                1919     ?C0226:
                    1920     ;               if (LongKeyFlagCounter > 1000) 
                    1921                             ; SOURCE LINE # 508
0484 D3             1922             SETB    C
0485 94E8           1923             SUBB    A,#0E8H
0487 E500     F     1924             MOV     A,LongKeyFlagCounter
0489 9403           1925             SUBB    A,#03H
048B 4007           1926             JC      ?C0040
                    1927     ;               { 
                    1928                             ; SOURCE LINE # 509
                    1929     ;                       LongKeyFlag = 1;
                    1930                             ; SOURCE LINE # 510
048D D200     F     1931             SETB    LongKeyFlag
                    1932     ;                       LongKeyFlagCounter = 0;
                    1933                             ; SOURCE LINE # 511
048F E4             1934             CLR     A
0490 F500     F     1935             MOV     LongKeyFlagCounter,A
0492 F500     F     1936             MOV     LongKeyFlagCounter+01H,A
                    1937     ;               } 
                    1938                             ; SOURCE LINE # 512
                    1939     ;       }
                    1940                             ; SOURCE LINE # 513
0494                1941     ?C0040:
                    1942     ; 
                    1943     ;       if (KEY2 == 0) 
                    1944                             ; SOURCE LINE # 515
0494 20A52F         1945             JB      KEY2,?C0046
                    1946     ;       {
                    1947                             ; SOURCE LINE # 516
                    1948     ;               if ((KeyFlag1 == 0) | (LongKeyFlag == 1))
                    1949                             ; SOURCE LINE # 517
0497 300004   F     1950             JNB     LongKeyFlag,?C0048
049A 7F01           1951             MOV     R7,#01H
049C 8002           1952             SJMP    ?C0049
049E                1953     ?C0048:
049E 7F00           1954             MOV     R7,#00H
04A0                1955     ?C0049:
04A0 200004   F     1956             JB      KeyFlag1,?C0050
04A3 7E01           1957             MOV     R6,#01H
04A5 8002           1958             SJMP    ?C0051
04A7                1959     ?C0050:
04A7 7E00           1960             MOV     R6,#00H
04A9                1961     ?C0051:
04A9 EE             1962             MOV     A,R6
04AA 4F             1963             ORL     A,R7
04AB 601D           1964             JZ      ?C0052
                    1965     ;               {
                    1966                             ; SOURCE LINE # 518
                    1967     ;                       Counter ++;
                    1968                             ; SOURCE LINE # 519
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    31

04AD E500     F     1969             MOV     A,Counter+03H
04AF 2401           1970             ADD     A,#01H
04B1 F500     F     1971             MOV     Counter+03H,A
04B3 E4             1972             CLR     A
04B4 3500     F     1973             ADDC    A,Counter+02H
04B6 F500     F     1974             MOV     Counter+02H,A
04B8 E4             1975             CLR     A
04B9 3500     F     1976             ADDC    A,Counter+01H
04BB F500     F     1977             MOV     Counter+01H,A
04BD E4             1978             CLR     A
04BE 3500     F     1979             ADDC    A,Counter
04C0 F500     F     1980             MOV     Counter,A
                    1981     ;                       KeyFlag1 = 1; 
                    1982                             ; SOURCE LINE # 520
04C2 D200     F     1983             SETB    KeyFlag1
                    1984     ;               }
                    1985                             ; SOURCE LINE # 521
                    1986     ;       } else { KeyFlag1 = 0; LongKeyFlag = 0; }
                    1987                             ; SOURCE LINE # 522
04C4 8004           1988             SJMP    ?C0052
04C6                1989     ?C0046:
04C6 C200     F     1990             CLR     KeyFlag1
04C8 C200     F     1991             CLR     LongKeyFlag
04CA                1992     ?C0052:
                    1993     ; 
                    1994     ;       if (KEY1 == 0) Counter = 0;
                    1995                             ; SOURCE LINE # 524
04CA 208409         1996             JB      KEY1,?C0053
04CD E4             1997             CLR     A
04CE F500     F     1998             MOV     Counter+03H,A
04D0 F500     F     1999             MOV     Counter+02H,A
04D2 F500     F     2000             MOV     Counter+01H,A
04D4 F500     F     2001             MOV     Counter,A
04D6                2002     ?C0053:
                    2003     ; 
                    2004     ;       if (KEY3 == 0)  // Смена режима вывода на дисплюй (ММ или Счётчик сигналов)
                    2005                             ; SOURCE LINE # 526
04D6 20861B         2006             JB      KEY3,?C0054
                    2007     ;       {
                    2008                             ; SOURCE LINE # 527
                    2009     ;               if (KeyFlag3 == 0)
                    2010                             ; SOURCE LINE # 528
04D9 20001A   F     2011             JB      KeyFlag3,?C0058
                    2012     ;               {
                    2013                             ; SOURCE LINE # 529
                    2014     ;                       if (LcdMode == 0) LcdMode = 1; else LcdMode = 0;
                    2015                             ; SOURCE LINE # 530
04DC E500     F     2016             MOV     A,LcdMode
04DE 7005           2017             JNZ     ?C0056
04E0 750001   F     2018             MOV     LcdMode,#01H
04E3 8003           2019             SJMP    ?C0057
04E5                2020     ?C0056:
04E5 E4             2021             CLR     A
04E6 F500     F     2022             MOV     LcdMode,A
04E8                2023     ?C0057:
                    2024     ;                       LcdOutputLine(2);
                    2025                             ; SOURCE LINE # 531
04E8 7F02           2026             MOV     R7,#02H
04EA 120000   F     2027             LCALL   _LcdOutputLine
                    2028     ;                       EEPROM_ByteWrite(EEPROM_LCDMODE_ADDR,LcdMode);
                    2029                             ; SOURCE LINE # 532
04ED 120000   F     2030             LCALL   L?0249
                    2031     ;                       KeyFlag3 = 1;
                    2032                             ; SOURCE LINE # 533
04F0 D200     F     2033             SETB    KeyFlag3
                    2034     ;               }
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    32

                    2035                             ; SOURCE LINE # 534
                    2036     ;       } else KeyFlag3 = 0;
                    2037                             ; SOURCE LINE # 535
04F2 8002           2038             SJMP    ?C0058
04F4                2039     ?C0054:
04F4 C200     F     2040             CLR     KeyFlag3
04F6                2041     ?C0058:
                    2042     ; 
                    2043     ;       if (KEY4 == 0) // запись в память EEPROM дискретизации (Счётчик/1 ММ)
                    2044                             ; SOURCE LINE # 537
04F6 308503         2045             JNB     KEY4,$ + 6H
04F9 020000   F     2046             LJMP    ?C0019
                    2047     ;       {
                    2048                             ; SOURCE LINE # 538
                    2049     ;               if (KeyFlag4 == 0)
                    2050                             ; SOURCE LINE # 539
04FC 20001C   F     2051             JB      KeyFlag4,?C0060
                    2052     ;               {
                    2053                             ; SOURCE LINE # 540
                    2054     ;                       Discret = Counter;
                    2055                             ; SOURCE LINE # 541
04FF 850000   F     2056             MOV     Discret+03H,Counter+03H
0502 850000   F     2057             MOV     Discret+02H,Counter+02H
0505 850000   F     2058             MOV     Discret+01H,Counter+01H
0508 850000   F     2059             MOV     Discret,Counter
                    2060     ;                       LcdOutputLine(4);
                    2061                             ; SOURCE LINE # 542
050B 7F04           2062             MOV     R7,#04H
050D 120000   F     2063             LCALL   _LcdOutputLine
                    2064     ;                       WriteDiscretToEEprom();
                    2065                             ; SOURCE LINE # 543
0510 120000   F     2066             LCALL   WriteDiscretToEEprom
                    2067     ;                       WriteCounterToEEprom();
                    2068                             ; SOURCE LINE # 544
0513 120000   F     2069             LCALL   WriteCounterToEEprom
                    2070     ;                       KeyFlag4 = 1;
                    2071                             ; SOURCE LINE # 545
0516 D200     F     2072             SETB    KeyFlag4
                    2073     ;               } else KeyFlag4 = 0;
                    2074                             ; SOURCE LINE # 546
0518 020000   F     2075             LJMP    ?C0019
051B                2076     ?C0060:
051B C200     F     2077             CLR     KeyFlag4
                    2078     ;       }
                    2079                             ; SOURCE LINE # 547
                    2080     ; 
                    2081     ;       }
                    2082                             ; SOURCE LINE # 549
051D 020000   F     2083             LJMP    ?C0019
                    2084     ; END OF main
                    2085     
                    2086     ; }
                    2087     ; 
                    2088     ; void EncoderScan2(void)
                    2089     
----                2090             RSEG  ?PR?EncoderScan2?MAIN
0000                2091     EncoderScan2:
                    2092                             ; SOURCE LINE # 552
                    2093     ; {
                    2094                             ; SOURCE LINE # 553
                    2095     ;       EncState = P0 >> 2;
                    2096                             ; SOURCE LINE # 554
0000 E580           2097             MOV     A,P0
0002 13             2098             RRC     A
0003 13             2099             RRC     A
0004 543F           2100             ANL     A,#03FH
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    33

0006 F500     F     2101             MOV     EncState,A
                    2102     ;       EncState = ((OldState<<2) | EncState) & 0x0F;
                    2103                             ; SOURCE LINE # 555
0008 E500     F     2104             MOV     A,OldState
000A 25E0           2105             ADD     A,ACC
000C 25E0           2106             ADD     A,ACC
000E 4500     F     2107             ORL     A,EncState
0010 540F           2108             ANL     A,#0FH
0012 F500     F     2109             MOV     EncState,A
                    2110     ; 
                    2111     ;       switch (EncState)
                    2112                             ; SOURCE LINE # 557
0014 24FE           2113             ADD     A,#0FEH
0016 601C           2114             JZ      ?C0065
0018 24FE           2115             ADD     A,#0FEH
001A 601A           2116             JZ      ?C0067
001C 24FD           2117             ADD     A,#0FDH
001E 6031           2118             JZ      ?C0071
0020 14             2119             DEC     A
0021 602E           2120             JZ      ?C0071
0023 24FD           2121             ADD     A,#0FDH
0025 6013           2122             JZ      ?C0070
0027 24FE           2123             ADD     A,#0FEH
0029 600D           2124             JZ      ?C0068
002B 14             2125             DEC     A
002C 6023           2126             JZ      ?C0071
002E 240D           2127             ADD     A,#0DH
0030 7037           2128             JNZ     ?C0063
                    2129     ;       {
                    2130                             ; SOURCE LINE # 558
                    2131     ;               case 1: Counter--; break;// Case &00000001 
                    2132                             ; SOURCE LINE # 559
0032                2133     ?C0064:
0032 801D           2134             SJMP    ?C0242
                    2135     ;               case 2: Counter++;break;
                    2136                             ; SOURCE LINE # 560
0034                2137     ?C0065:
0034 8004           2138             SJMP    ?C0241
                    2139     ;               case 7: Counter--;break;
                    2140                             ; SOURCE LINE # 561
                    2141     ;               case 4: Counter++;break;
                    2142                             ; SOURCE LINE # 562
0036                2143     ?C0067:
0036                2144     ?C0238:
0036 8002           2145             SJMP    ?C0241
                    2146     ;               case 0x0D:      Counter++;break;
                    2147                             ; SOURCE LINE # 563
0038                2148     ?C0068:
0038                2149     ?C0240:
0038 8000           2150             SJMP    ?C0241
                    2151     ;               case 0x0E:      Counter--;break;
                    2152                             ; SOURCE LINE # 564
                    2153     ;               case 0x0B:      Counter++;break;
                    2154                             ; SOURCE LINE # 565
003A                2155     ?C0070:
003A                2156     ?C0241:
003A E500     F     2157             MOV     A,Counter+03H
003C 2401           2158             ADD     A,#01H
003E F500     F     2159             MOV     Counter+03H,A
0040 E4             2160             CLR     A
0041 3500     F     2161             ADDC    A,Counter+02H
0043 F500     F     2162             MOV     Counter+02H,A
0045 E4             2163             CLR     A
0046 3500     F     2164             ADDC    A,Counter+01H
0048 F500     F     2165             MOV     Counter+01H,A
004A E4             2166             CLR     A
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    34

004B 3500     F     2167             ADDC    A,Counter
004D F500     F     2168             MOV     Counter,A
004F 8018           2169             SJMP    ?C0063
                    2170     ;               case 8:         Counter--; 
                    2171                             ; SOURCE LINE # 566
0051                2172     ?C0071:
0051                2173     ?C0242:
0051 E500     F     2174             MOV     A,Counter+03H
0053 24FF           2175             ADD     A,#0FFH
0055 F500     F     2176             MOV     Counter+03H,A
0057 E500     F     2177             MOV     A,Counter+02H
0059 34FF           2178             ADDC    A,#0FFH
005B F500     F     2179             MOV     Counter+02H,A
005D E500     F     2180             MOV     A,Counter+01H
005F 34FF           2181             ADDC    A,#0FFH
0061 F500     F     2182             MOV     Counter+01H,A
0063 E500     F     2183             MOV     A,Counter
0065 34FF           2184             ADDC    A,#0FFH
0067 F500     F     2185             MOV     Counter,A
                    2186     ;       }
                    2187                             ; SOURCE LINE # 567
0069                2188     ?C0063:
                    2189     ;       OldState = EncState;
                    2190                             ; SOURCE LINE # 568
0069 850000   F     2191             MOV     OldState,EncState
                    2192     ; }
                    2193                             ; SOURCE LINE # 569
006C 22             2194             RET     
                    2195     ; END OF EncoderScan2
                    2196     
                    2197     ; 
                    2198     ; void EncoderScan1(void)
                    2199     
----                2200             RSEG  ?PR?EncoderScan1?MAIN
0000                2201     EncoderScan1:
                    2202             USING   0
                    2203                             ; SOURCE LINE # 571
                    2204     ; {
                    2205                             ; SOURCE LINE # 572
                    2206     ;       unsigned char New;
                    2207     ;  
                    2208     ;       New = (P0 & 0x0C) >> 2; // PINB & 0x03; // Берем текущее значение 
                    2209                             ; SOURCE LINE # 575
0000 E580           2210             MOV     A,P0
0002 540C           2211             ANL     A,#0CH
0004 13             2212             RRC     A
0005 13             2213             RRC     A
0006 543F           2214             ANL     A,#03FH
                    2215     ;---- Variable 'New?243' assigned to Register 'R3' ----
0008 FB             2216             MOV     R3,A
                    2217     ;                       // И сравниваем со старым
                    2218     ;  
                    2219     ; // Смотря в какую сторону оно поменялось -- увеличиваем
                    2220     ; // Или уменьшаем счетный регистр
                    2221     ;  
                    2222     ;       switch(EncState)
                    2223                             ; SOURCE LINE # 581
0009 E500     F     2224             MOV     A,EncState
000B 602A           2225             JZ      ?C0077
000D 14             2226             DEC     A
000E 6046           2227             JZ      ?C0080
0010 24FE           2228             ADD     A,#0FEH
0012 6061           2229             JZ      ?C0083
0014 04             2230             INC     A
0015 6003           2231             JZ      $ + 5H
0017 020000   F     2232             LJMP    ?C0073
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    35

                    2233     ;       {
                    2234                             ; SOURCE LINE # 582
                    2235     ;       case 2:
                    2236                             ; SOURCE LINE # 583
001A                2237     ?C0074:
                    2238     ;               {
                    2239                             ; SOURCE LINE # 584
                    2240     ;               if(New == 3) Counter++;
                    2241                             ; SOURCE LINE # 585
001A BB0315         2242             CJNE    R3,#03H,?C0075
001D E500     F     2243             MOV     A,Counter+03H
001F 2401           2244             ADD     A,#01H
0021 F500     F     2245             MOV     Counter+03H,A
0023 E4             2246             CLR     A
0024 3500     F     2247             ADDC    A,Counter+02H
0026 F500     F     2248             MOV     Counter+02H,A
0028 E4             2249             CLR     A
0029 3500     F     2250             ADDC    A,Counter+01H
002B F500     F     2251             MOV     Counter+01H,A
002D E4             2252             CLR     A
002E 3500     F     2253             ADDC    A,Counter
0030 F500     F     2254             MOV     Counter,A
0032                2255     ?C0075:
                    2256     ;               if(New == 0) Counter--; 
                    2257                             ; SOURCE LINE # 586
0032 EB             2258             MOV     A,R3
0033 7073           2259             JNZ     ?C0073
                    2260     ;               break;
                    2261                             ; SOURCE LINE # 587
0035 8059           2262             SJMP    ?C0245
                    2263     ;               }
                    2264                             ; SOURCE LINE # 588
                    2265     ;  
                    2266     ;       case 0:
                    2267                             ; SOURCE LINE # 590
0037                2268     ?C0077:
                    2269     ;               {
                    2270                             ; SOURCE LINE # 591
                    2271     ;               if(New == 2) Counter++;
                    2272                             ; SOURCE LINE # 592
0037 BB0215         2273             CJNE    R3,#02H,?C0078
003A E500     F     2274             MOV     A,Counter+03H
003C 2401           2275             ADD     A,#01H
003E F500     F     2276             MOV     Counter+03H,A
0040 E4             2277             CLR     A
0041 3500     F     2278             ADDC    A,Counter+02H
0043 F500     F     2279             MOV     Counter+02H,A
0045 E4             2280             CLR     A
0046 3500     F     2281             ADDC    A,Counter+01H
0048 F500     F     2282             MOV     Counter+01H,A
004A E4             2283             CLR     A
004B 3500     F     2284             ADDC    A,Counter
004D F500     F     2285             MOV     Counter,A
004F                2286     ?C0078:
                    2287     ;               if(New == 1) Counter--; 
                    2288                             ; SOURCE LINE # 593
004F EB             2289             MOV     A,R3
0050 6401           2290             XRL     A,#01H
0052 7054           2291             JNZ     ?C0073
0054                2292     ?C0243:
                    2293     ;               break;
                    2294                             ; SOURCE LINE # 594
0054 803A           2295             SJMP    ?C0245
                    2296     ;               }
                    2297                             ; SOURCE LINE # 595
                    2298     ;       case 1:
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    36

                    2299                             ; SOURCE LINE # 596
0056                2300     ?C0080:
                    2301     ;               {
                    2302                             ; SOURCE LINE # 597
                    2303     ;               if(New == 0) Counter++;
                    2304                             ; SOURCE LINE # 598
0056 EB             2305             MOV     A,R3
0057 7015           2306             JNZ     ?C0081
0059 E500     F     2307             MOV     A,Counter+03H
005B 2401           2308             ADD     A,#01H
005D F500     F     2309             MOV     Counter+03H,A
005F E4             2310             CLR     A
0060 3500     F     2311             ADDC    A,Counter+02H
0062 F500     F     2312             MOV     Counter+02H,A
0064 E4             2313             CLR     A
0065 3500     F     2314             ADDC    A,Counter+01H
0067 F500     F     2315             MOV     Counter+01H,A
0069 E4             2316             CLR     A
006A 3500     F     2317             ADDC    A,Counter
006C F500     F     2318             MOV     Counter,A
006E                2319     ?C0081:
                    2320     ;               if(New == 3) Counter--; 
                    2321                             ; SOURCE LINE # 599
006E EB             2322             MOV     A,R3
006F 6403           2323             XRL     A,#03H
0071 7035           2324             JNZ     ?C0073
0073                2325     ?C0244:
                    2326     ;               break;
                    2327                             ; SOURCE LINE # 600
0073 801B           2328             SJMP    ?C0245
                    2329     ;               }
                    2330                             ; SOURCE LINE # 601
                    2331     ;       case 3:
                    2332                             ; SOURCE LINE # 602
0075                2333     ?C0083:
                    2334     ;               {
                    2335                             ; SOURCE LINE # 603
                    2336     ;               if(New == 1) Counter++;
                    2337                             ; SOURCE LINE # 604
0075 BB0115         2338             CJNE    R3,#01H,?C0084
0078 E500     F     2339             MOV     A,Counter+03H
007A 2401           2340             ADD     A,#01H
007C F500     F     2341             MOV     Counter+03H,A
007E E4             2342             CLR     A
007F 3500     F     2343             ADDC    A,Counter+02H
0081 F500     F     2344             MOV     Counter+02H,A
0083 E4             2345             CLR     A
0084 3500     F     2346             ADDC    A,Counter+01H
0086 F500     F     2347             MOV     Counter+01H,A
0088 E4             2348             CLR     A
0089 3500     F     2349             ADDC    A,Counter
008B F500     F     2350             MOV     Counter,A
008D                2351     ?C0084:
                    2352     ;               if(New == 2) Counter--; 
                    2353                             ; SOURCE LINE # 605
008D BB0218         2354             CJNE    R3,#02H,?C0073
0090                2355     ?C0245:
0090 E500     F     2356             MOV     A,Counter+03H
0092 24FF           2357             ADD     A,#0FFH
0094 F500     F     2358             MOV     Counter+03H,A
0096 E500     F     2359             MOV     A,Counter+02H
0098 34FF           2360             ADDC    A,#0FFH
009A F500     F     2361             MOV     Counter+02H,A
009C E500     F     2362             MOV     A,Counter+01H
009E 34FF           2363             ADDC    A,#0FFH
00A0 F500     F     2364             MOV     Counter+01H,A
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    37

00A2 E500     F     2365             MOV     A,Counter
00A4 34FF           2366             ADDC    A,#0FFH
00A6 F500     F     2367             MOV     Counter,A
                    2368     ;               break;
                    2369                             ; SOURCE LINE # 606
                    2370     ;               }
                    2371                             ; SOURCE LINE # 607
                    2372     ;       }
                    2373                             ; SOURCE LINE # 608
00A8                2374     ?C0073:
                    2375     ;  
                    2376     ;       EncState = New;         // Записываем новое значение 
                    2377                             ; SOURCE LINE # 610
00A8 8B00     F     2378             MOV     EncState,R3
                    2379     ;                               // Предыдущего состояния
                    2380     ; }
                    2381                             ; SOURCE LINE # 612
00AA 22             2382             RET     
                    2383     ; END OF EncoderScan1
                    2384     
                    2385     ; 
                    2386     ; void EncoderScan3 (void)
                    2387     
----                2388             RSEG  ?PR?EncoderScan3?MAIN
0000                2389     EncoderScan3:
                    2390             USING   0
                    2391                             ; SOURCE LINE # 614
                    2392     ; {
                    2393                             ; SOURCE LINE # 615
                    2394     ;   EncTemp = EncIN;
                    2395                             ; SOURCE LINE # 616
0000 858000   F     2396             MOV     EncTemp,P0
                    2397     ;   Del(10); // ??????????????? ????????
                    2398                             ; SOURCE LINE # 617
0003 7F0A           2399             MOV     R7,#0AH
0005 7E00           2400             MOV     R6,#00H
0007 120000   F     2401             LCALL   _Del
                    2402     ;   EncTemp |= EncIN;
                    2403                             ; SOURCE LINE # 618
000A E580           2404             MOV     A,P0
000C 4200     F     2405             ORL     EncTemp,A
                    2406     ; #if(EncA < EncB) //????? ???????? ????
                    2407     ;   EncTemp >>= EncA;
                    2408                             ; SOURCE LINE # 620
000E E500     F     2409             MOV     A,EncTemp
0010 13             2410             RRC     A
0011 13             2411             RRC     A
0012 543F           2412             ANL     A,#03FH
0014 F500     F     2413             MOV     EncTemp,A
                    2414     ; #else
                    2415     ;   EncTemp >>= EncB;
                    2416     ; #endif
                    2417     ;   EncTemp &= 0x03; 
                    2418                             ; SOURCE LINE # 624
0016 530003   F     2419             ANL     EncTemp,#03H
                    2420     ;   if (EncN < 4)
                    2421                             ; SOURCE LINE # 625
0019 E500     F     2422             MOV     A,EncN
001B C3             2423             CLR     C
001C 9404           2424             SUBB    A,#04H
001E 5022           2425             JNC     ?C0087
                    2426     ;   {
                    2427                             ; SOURCE LINE # 626
                    2428     ;     if (((EncOld[0] == 0x03)&&(EncTemp != EncOld[EncN - 1]))||
                    2429                             ; SOURCE LINE # 627
0020 E500     F     2430             MOV     A,EncOld
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    38

0022 B40309         2431             CJNE    A,#03H,?C0090
0025 7400     F     2432             MOV     A,#LOW (EncOld+0FFFFH)
0027 2500     F     2433             ADD     A,EncN
0029 F8             2434             MOV     R0,A
002A E6             2435             MOV     A,@R0
002B B5000A   F     2436             CJNE    A,EncTemp,?C0089
002E                2437     ?C0090:
002E E500     F     2438             MOV     A,EncOld
0030 7067           2439             JNZ     ?C0095
0032 E500     F     2440             MOV     A,EncTemp
0034 6403           2441             XRL     A,#03H
0036 7061           2442             JNZ     ?C0095
0038                2443     ?C0089:
                    2444     ;         ((EncOld[0] == 0x00)&&(EncTemp == 0x03))) // проверка последовательности команд о
                             т нкодера
                    2445     ;     {
                    2446                             ; SOURCE LINE # 629
                    2447     ;       EncOld[EncN] = EncTemp;
                    2448                             ; SOURCE LINE # 630
0038 7400     F     2449             MOV     A,#LOW (EncOld)
003A 2500     F     2450             ADD     A,EncN
003C F8             2451             MOV     R0,A
003D A600     F     2452             MOV     @R0,EncTemp
                    2453     ;       EncN ++;
                    2454                             ; SOURCE LINE # 631
003F 0500     F     2455             INC     EncN
                    2456     ;     }
                    2457                             ; SOURCE LINE # 632
                    2458     ;   }
                    2459                             ; SOURCE LINE # 633
0041 22             2460             RET     
0042                2461     ?C0087:
                    2462     ;   else
                    2463     ;   {
                    2464                             ; SOURCE LINE # 635
                    2465     ;       if ((EncOld[1] == 0x01)&&
                    2466                             ; SOURCE LINE # 636
0042 E500     F     2467             MOV     A,EncOld+01H
0044 B40120         2468             CJNE    A,#01H,?C0092
0047 E500     F     2469             MOV     A,EncOld+02H
0049 701C           2470             JNZ     ?C0092
004B E500     F     2471             MOV     A,EncOld+03H
004D B40217         2472             CJNE    A,#02H,?C0092
                    2473     ;           (EncOld[2] == 0x00)&&
                    2474     ;           (EncOld[3] == 0x02)) // проверка совпадения принятых данных с прямой посл-ю
                    2475     ;       {
                    2476                             ; SOURCE LINE # 639
                    2477     ;         Counter++;
                    2478                             ; SOURCE LINE # 640
0050 E500     F     2479             MOV     A,Counter+03H
0052 2401           2480             ADD     A,#01H
0054 F500     F     2481             MOV     Counter+03H,A
0056 E4             2482             CLR     A
0057 3500     F     2483             ADDC    A,Counter+02H
0059 F500     F     2484             MOV     Counter+02H,A
005B E4             2485             CLR     A
005C 3500     F     2486             ADDC    A,Counter+01H
005E F500     F     2487             MOV     Counter+01H,A
0060 E4             2488             CLR     A
0061 3500     F     2489             ADDC    A,Counter
0063 F500     F     2490             MOV     Counter,A
                    2491     ;       }
                    2492                             ; SOURCE LINE # 641
0065 8026           2493             SJMP    ?C0093
0067                2494     ?C0092:
                    2495     ;       else
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    39

                    2496     ;         if ((EncOld[1] == 0x02)&&
                    2497                             ; SOURCE LINE # 643
0067 E500     F     2498             MOV     A,EncOld+01H
0069 B40221         2499             CJNE    A,#02H,?C0093
006C E500     F     2500             MOV     A,EncOld+02H
006E 701D           2501             JNZ     ?C0093
0070 E500     F     2502             MOV     A,EncOld+03H
0072 B40118         2503             CJNE    A,#01H,?C0093
                    2504     ;             (EncOld[2] == 0x00)&&
                    2505     ;             (EncOld[3] == 0x01)) // проверка совпадения принятых данных с обратной посл-ю
                    2506     ;         {
                    2507                             ; SOURCE LINE # 646
                    2508     ;           Counter--;
                    2509                             ; SOURCE LINE # 647
0075 E500     F     2510             MOV     A,Counter+03H
0077 24FF           2511             ADD     A,#0FFH
0079 F500     F     2512             MOV     Counter+03H,A
007B E500     F     2513             MOV     A,Counter+02H
007D 34FF           2514             ADDC    A,#0FFH
007F F500     F     2515             MOV     Counter+02H,A
0081 E500     F     2516             MOV     A,Counter+01H
0083 34FF           2517             ADDC    A,#0FFH
0085 F500     F     2518             MOV     Counter+01H,A
0087 E500     F     2519             MOV     A,Counter
0089 34FF           2520             ADDC    A,#0FFH
008B F500     F     2521             MOV     Counter,A
                    2522     ;         }
                    2523                             ; SOURCE LINE # 648
008D                2524     ?C0093:
                    2525     ;     EncN = 0; // ????????? ??????
                    2526                             ; SOURCE LINE # 649
008D E4             2527             CLR     A
008E F500     F     2528             MOV     EncN,A
                    2529     ;     EncOld[0] = 0x00;
                    2530                             ; SOURCE LINE # 650
0090 F500     F     2531             MOV     EncOld,A
                    2532     ;     EncOld[1] = 0x00;
                    2533                             ; SOURCE LINE # 651
0092 F500     F     2534             MOV     EncOld+01H,A
                    2535     ;     EncOld[2] = 0x01;
                    2536                             ; SOURCE LINE # 652
0094 750001   F     2537             MOV     EncOld+02H,#01H
                    2538     ;     EncOld[3] = 0x00;
                    2539                             ; SOURCE LINE # 653
0097 F500     F     2540             MOV     EncOld+03H,A
                    2541     ;   }
                    2542                             ; SOURCE LINE # 654
                    2543     ; }
                    2544                             ; SOURCE LINE # 655
0099                2545     ?C0095:
0099 22             2546             RET     
                    2547     ; END OF EncoderScan3
                    2548     
                    2549     ; 
                    2550     ; void EncoderScan4(void)
                    2551     
----                2552             RSEG  ?PR?EncoderScan4?MAIN
0000                2553     EncoderScan4:
                    2554                             ; SOURCE LINE # 657
                    2555     ; {
                    2556                             ; SOURCE LINE # 658
                    2557     ;  // запомнить текущее состояние сигналов нкодера.
                    2558     ;       now_a = EXT_INT0; // сигнал на выходе "А" нкодера PB3
                    2559                             ; SOURCE LINE # 660
0000 A282           2560             MOV     C,EXT_INT0
0002 9200     F     2561             MOV     now_a,C
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    40

                    2562     ;       now_b = EXT_INT1; // сигнал на выходе "B" нкодера PB4  
                    2563                             ; SOURCE LINE # 661
0004 A283           2564             MOV     C,EXT_INT1
0006 9200     F     2565             MOV     now_b,C
                    2566     ;  
                    2567     ;       if ((pre_b != now_b)||(pre_a != now_a))  // Если изменился сигнал А или В то  /*  "
                             +" тик (отсчет условно "по часовой") если выполняются 4 условия
                    2568                             ; SOURCE LINE # 663
0008 A200     F     2569             MOV     C,pre_b
000A 300001   F     2570             JNB     now_b,?C0227
000D B3             2571             CPL     C
000E                2572     ?C0227:
000E 4008           2573             JC      ?C0097
0010 A200     F     2574             MOV     C,pre_a
0012 300001   F     2575             JNB     now_a,?C0228
0015 B3             2576             CPL     C
0016                2577     ?C0228:
0016 5059           2578             JNC     ?C0096
0018                2579     ?C0097:
                    2580     ;       { 
                    2581                             ; SOURCE LINE # 664
                    2582     ; 
                    2583     ;               if (!now_b) // 1) В = 0
                    2584                             ; SOURCE LINE # 666
0018 20002B   F     2585             JB      now_b,?C0098
                    2586     ;               {
                    2587                             ; SOURCE LINE # 667
                    2588     ;                       if (now_a) // 2) A = 1
                    2589                             ; SOURCE LINE # 668
001B 300028   F     2590             JNB     now_a,?C0098
                    2591     ;                       {
                    2592                             ; SOURCE LINE # 669
                    2593     ;                               if (now_a != pre_a) // 3) A изменился
                    2594                             ; SOURCE LINE # 670
001E A200     F     2595             MOV     C,now_a
0020 300001   F     2596             JNB     pre_a,?C0229
0023 B3             2597             CPL     C
0024                2598     ?C0229:
0024 5020           2599             JNC     ?C0098
                    2600     ;                               {
                    2601                             ; SOURCE LINE # 671
                    2602     ;                                       if (now_b == pre_b) // 4) B не изменился 
                    2603                             ; SOURCE LINE # 672
0026 A200     F     2604             MOV     C,now_b
0028 300001   F     2605             JNB     pre_b,?C0230
002B B3             2606             CPL     C
002C                2607     ?C0230:
002C 4018           2608             JC      ?C0098
                    2609     ;                                       {
                    2610                             ; SOURCE LINE # 673
                    2611     ;                                       Counter-- ;               // посчитать тик "по часо
                             вой"
                    2612                             ; SOURCE LINE # 674
002E E500     F     2613             MOV     A,Counter+03H
0030 24FF           2614             ADD     A,#0FFH
0032 F500     F     2615             MOV     Counter+03H,A
0034 E500     F     2616             MOV     A,Counter+02H
0036 34FF           2617             ADDC    A,#0FFH
0038 F500     F     2618             MOV     Counter+02H,A
003A E500     F     2619             MOV     A,Counter+01H
003C 34FF           2620             ADDC    A,#0FFH
003E F500     F     2621             MOV     Counter+01H,A
0040 E500     F     2622             MOV     A,Counter
0042 34FF           2623             ADDC    A,#0FFH
0044 F500     F     2624             MOV     Counter,A
                    2625     ;                                       }
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    41

                    2626                             ; SOURCE LINE # 675
                    2627     ;                               }
                    2628                             ; SOURCE LINE # 676
                    2629     ;                       }
                    2630                             ; SOURCE LINE # 677
                    2631     ;               }     // вращение происходит по-часовой
                    2632                             ; SOURCE LINE # 678
0046                2633     ?C0098:
                    2634     ; 
                    2635     ;  /*  "-" тик (отсчет условно "против часовой") если выполняются 4 условия:   */      
                    2636     ;               if (now_b) // 1) В = 1
                    2637                             ; SOURCE LINE # 681
0046 300028   F     2638             JNB     now_b,?C0096
                    2639     ;               {
                    2640                             ; SOURCE LINE # 682
                    2641     ;                       if (!now_a) // 2) A = 0
                    2642                             ; SOURCE LINE # 683
0049 200025   F     2643             JB      now_a,?C0096
                    2644     ;                       {
                    2645                             ; SOURCE LINE # 684
                    2646     ;                               if (now_a == pre_a) // 3) A не изменился
                    2647                             ; SOURCE LINE # 685
004C A200     F     2648             MOV     C,now_a
004E 300001   F     2649             JNB     pre_a,?C0231
0051 B3             2650             CPL     C
0052                2651     ?C0231:
0052 401D           2652             JC      ?C0096
                    2653     ;                               {
                    2654                             ; SOURCE LINE # 686
                    2655     ;                                       if (now_b != pre_b)// 4) B изменился 
                    2656                             ; SOURCE LINE # 687
0054 A200     F     2657             MOV     C,now_b
0056 300001   F     2658             JNB     pre_b,?C0232
0059 B3             2659             CPL     C
005A                2660     ?C0232:
005A 5015           2661             JNC     ?C0096
                    2662     ;                                       {
                    2663                             ; SOURCE LINE # 688
                    2664     ;                                       Counter++ ;               // посчитать тик "против 
                             часовой"
                    2665                             ; SOURCE LINE # 689
005C E500     F     2666             MOV     A,Counter+03H
005E 2401           2667             ADD     A,#01H
0060 F500     F     2668             MOV     Counter+03H,A
0062 E4             2669             CLR     A
0063 3500     F     2670             ADDC    A,Counter+02H
0065 F500     F     2671             MOV     Counter+02H,A
0067 E4             2672             CLR     A
0068 3500     F     2673             ADDC    A,Counter+01H
006A F500     F     2674             MOV     Counter+01H,A
006C E4             2675             CLR     A
006D 3500     F     2676             ADDC    A,Counter
006F F500     F     2677             MOV     Counter,A
                    2678     ;                                       }
                    2679                             ; SOURCE LINE # 690
                    2680     ;                               }
                    2681                             ; SOURCE LINE # 691
                    2682     ;                       }
                    2683                             ; SOURCE LINE # 692
                    2684     ;               } // вращение происходит против-часовой
                    2685                             ; SOURCE LINE # 693
                    2686     ;       }
                    2687                             ; SOURCE LINE # 694
0071                2688     ?C0096:
                    2689     ;       pre_a = now_a; // обновить "прошлые" сигналы нкодера 
                    2690                             ; SOURCE LINE # 695
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    42

0071 A200     F     2691             MOV     C,now_a
0073 9200     F     2692             MOV     pre_a,C
                    2693     ;       pre_b = now_b; // для - interrupt [PCINT0] void pin_change_isr(void)
                    2694                             ; SOURCE LINE # 696
0075 A200     F     2695             MOV     C,now_b
0077 9200     F     2696             MOV     pre_b,C
                    2697     ; }
                    2698                             ; SOURCE LINE # 697
0079 22             2699             RET     
                    2700     ; END OF EncoderScan4
                    2701     
                    2702     ; 
                    2703     ; void EncoderScan5(void)//Функция обработки нкодера
                    2704     
----                2705             RSEG  ?PR?EncoderScan5?MAIN
0000                2706     EncoderScan5:
                    2707             USING   0
                    2708                             ; SOURCE LINE # 699
                    2709     ; {
                    2710                             ; SOURCE LINE # 700
                    2711     ;  
                    2712     ;     New = (P0 & 0x0C) >> 2; // PINB & 0x03;   // Берем текущее значение 
                    2713                             ; SOURCE LINE # 702
0000 E580           2714             MOV     A,P0
0002 540C           2715             ANL     A,#0CH
0004 13             2716             RRC     A
0005 13             2717             RRC     A
0006 543F           2718             ANL     A,#03FH
0008 F500     F     2719             MOV     New,A
                    2720     ;  
                    2721     ;     if(New != EncState)//Если значение изменилось по отношению к прошлому
                    2722                             ; SOURCE LINE # 704
000A 6500     F     2723             XRL     A,EncState
000C 7003           2724             JNZ     $ + 5H
000E 020000   F     2725             LJMP    ?C0124
                    2726     ;     {
                    2727                             ; SOURCE LINE # 705
                    2728     ;         switch(EncState) //Перебор прошлого значения нкодера
                    2729                             ; SOURCE LINE # 706
0011 E500     F     2730             MOV     A,EncState
0013 6019           2731             JZ      ?C0112
0015 14             2732             DEC     A
0016 6027           2733             JZ      ?C0115
0018 24FE           2734             ADD     A,#0FEH
001A 6032           2735             JZ      ?C0118
001C 04             2736             INC     A
001D 703D           2737             JNZ     ?C0108
                    2738     ;           {
                    2739                             ; SOURCE LINE # 707
                    2740     ;           case 2:if(New == 3) EncPlus++;//В зависимости от значения увеличиваем
                    2741                             ; SOURCE LINE # 708
001F                2742     ?C0109:
001F E500     F     2743             MOV     A,New
0021 B40302         2744             CJNE    A,#03H,?C0110
0024 0500     F     2745             INC     EncPlus
0026                2746     ?C0110:
                    2747     ;                            if(New == 0) EncMinus++;//Или уменьшаем  
                    2748                             ; SOURCE LINE # 709
0026 E500     F     2749             MOV     A,New
0028 7032           2750             JNZ     ?C0108
002A 0500     F     2751             INC     EncMinus
                    2752     ;                      break;
                    2753                             ; SOURCE LINE # 710
002C 802E           2754             SJMP    ?C0108
                    2755     ;           case 0:if(New == 2) EncPlus++;
                    2756                             ; SOURCE LINE # 711
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    43

002E                2757     ?C0112:
002E E500     F     2758             MOV     A,New
0030 B40202         2759             CJNE    A,#02H,?C0113
0033 0500     F     2760             INC     EncPlus
0035                2761     ?C0113:
                    2762     ;                            if(New == 1) EncMinus++; 
                    2763                             ; SOURCE LINE # 712
0035 E500     F     2764             MOV     A,New
0037 6401           2765             XRL     A,#01H
0039 7021           2766             JNZ     ?C0108
003B 0500     F     2767             INC     EncMinus
                    2768     ;                      break;
                    2769                             ; SOURCE LINE # 713
003D 801D           2770             SJMP    ?C0108
                    2771     ;           case 1:if(New == 0) EncPlus++;
                    2772                             ; SOURCE LINE # 714
003F                2773     ?C0115:
003F E500     F     2774             MOV     A,New
0041 7002           2775             JNZ     ?C0116
0043 0500     F     2776             INC     EncPlus
0045                2777     ?C0116:
                    2778     ;                            if(New == 3) EncMinus++; 
                    2779                             ; SOURCE LINE # 715
0045 E500     F     2780             MOV     A,New
0047 B40312         2781             CJNE    A,#03H,?C0108
004A 0500     F     2782             INC     EncMinus
                    2783     ;                      break;
                    2784                             ; SOURCE LINE # 716
004C 800E           2785             SJMP    ?C0108
                    2786     ;           case 3:if(New == 1) EncPlus++;
                    2787                             ; SOURCE LINE # 717
004E                2788     ?C0118:
004E E500     F     2789             MOV     A,New
0050 B40102         2790             CJNE    A,#01H,?C0119
0053 0500     F     2791             INC     EncPlus
0055                2792     ?C0119:
                    2793     ;                            if(New == 2) EncMinus++; 
                    2794                             ; SOURCE LINE # 718
0055 E500     F     2795             MOV     A,New
0057 B40202         2796             CJNE    A,#02H,?C0108
005A 0500     F     2797             INC     EncMinus
                    2798     ;                      break;
                    2799                             ; SOURCE LINE # 719
                    2800     ;         default:break;
                    2801                             ; SOURCE LINE # 720
                    2802     ;           }
                    2803                             ; SOURCE LINE # 721
005C                2804     ?C0108:
                    2805     ;               
                    2806     ;               if(EncPlus == 4) //если прошёл один "щелчок"
                    2807                             ; SOURCE LINE # 723
005C E500     F     2808             MOV     A,EncPlus
005E B40418         2809             CJNE    A,#04H,?C0122
                    2810     ;               {
                    2811                             ; SOURCE LINE # 724
                    2812     ;                       Counter++;
                    2813                             ; SOURCE LINE # 725
0061 E500     F     2814             MOV     A,Counter+03H
0063 2401           2815             ADD     A,#01H
0065 F500     F     2816             MOV     Counter+03H,A
0067 E4             2817             CLR     A
0068 3500     F     2818             ADDC    A,Counter+02H
006A F500     F     2819             MOV     Counter+02H,A
006C E4             2820             CLR     A
006D 3500     F     2821             ADDC    A,Counter+01H
006F F500     F     2822             MOV     Counter+01H,A
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    44

0071 E4             2823             CLR     A
0072 3500     F     2824             ADDC    A,Counter
0074 F500     F     2825             MOV     Counter,A
                    2826     ;                       EncPlus = 0;
                    2827                             ; SOURCE LINE # 726
0076 E4             2828             CLR     A
0077 F500     F     2829             MOV     EncPlus,A
                    2830     ;               }
                    2831                             ; SOURCE LINE # 727
0079                2832     ?C0122:
                    2833     ;               
                    2834     ;               if(EncMinus == 4) //если прошёл один "щелчок"
                    2835                             ; SOURCE LINE # 729
0079 E500     F     2836             MOV     A,EncMinus
007B B4041B         2837             CJNE    A,#04H,?C0123
                    2838     ;               {
                    2839                             ; SOURCE LINE # 730
                    2840     ;                   Counter--;
                    2841                             ; SOURCE LINE # 731
007E E500     F     2842             MOV     A,Counter+03H
0080 24FF           2843             ADD     A,#0FFH
0082 F500     F     2844             MOV     Counter+03H,A
0084 E500     F     2845             MOV     A,Counter+02H
0086 34FF           2846             ADDC    A,#0FFH
0088 F500     F     2847             MOV     Counter+02H,A
008A E500     F     2848             MOV     A,Counter+01H
008C 34FF           2849             ADDC    A,#0FFH
008E F500     F     2850             MOV     Counter+01H,A
0090 E500     F     2851             MOV     A,Counter
0092 34FF           2852             ADDC    A,#0FFH
0094 F500     F     2853             MOV     Counter,A
                    2854     ;                       EncMinus = 0;
                    2855                             ; SOURCE LINE # 732
0096 E4             2856             CLR     A
0097 F500     F     2857             MOV     EncMinus,A
                    2858     ;               }
                    2859                             ; SOURCE LINE # 733
0099                2860     ?C0123:
                    2861     ;         EncState = New;       // Записываем новое значение предыдущего состояния
                    2862                             ; SOURCE LINE # 734
0099 850000   F     2863             MOV     EncState,New
                    2864     ;       }
                    2865                             ; SOURCE LINE # 735
                    2866     ; }
                    2867                             ; SOURCE LINE # 736
009C                2868     ?C0124:
009C 22             2869             RET     
                    2870     ; END OF EncoderScan5
                    2871     
                    2872     ; 
                    2873     ; void LcdOutputLine(unsigned char delay)
                    2874     
----                2875             RSEG  ?PR?_LcdOutputLine?MAIN
0000                2876     _LcdOutputLine:
                    2877             USING   0
                    2878                             ; SOURCE LINE # 738
0000 8F00     F     2879             MOV     delay?644,R7
                    2880     ; {
                    2881                             ; SOURCE LINE # 739
                    2882     ;       unsigned char i,y;
                    2883     ;       TCON &= ~0x10;
                    2884                             ; SOURCE LINE # 741
0002 5388EF         2885             ANL     TCON,#0EFH
                    2886     ;       ET0 = 0;
                    2887                             ; SOURCE LINE # 742
0005 C2A9           2888             CLR     ET0
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    45

                    2889     ;       
                    2890     ;       LedsSwitchOff();
                    2891                             ; SOURCE LINE # 744
0007 120000   F     2892             LCALL   LedsSwitchOff
                    2893     ;       SEGMENT_G = 1;
                    2894                             ; SOURCE LINE # 745
000A D295           2895             SETB    SEGMENT_G
                    2896     ;       
                    2897     ;       for (i=0;i<6;i++)
                    2898                             ; SOURCE LINE # 747
                    2899     ;---- Variable 'i?645' assigned to Register 'R7' ----
000C E4             2900             CLR     A
000D FF             2901             MOV     R7,A
000E                2902     ?C0125:
                    2903     ;       {
                    2904                             ; SOURCE LINE # 748
                    2905     ;               for (y=0;y<delay;y++) //{ Del_500mks(); Del_500mks(); Del_500mks(); Del_500
                             mks(); }
                    2906                             ; SOURCE LINE # 749
                    2907     ;---- Variable 'y?646' assigned to Register 'R6' ----
000E E4             2908             CLR     A
000F FE             2909             MOV     R6,A
0010                2910     ?C0128:
0010 EE             2911             MOV     A,R6
0011 C3             2912             CLR     C
0012 9500     F     2913             SUBB    A,delay?644
0014 502D           2914             JNC     ?C0127
                    2915     ;               switch (i)
                    2916                             ; SOURCE LINE # 750
0016 EF             2917             MOV     A,R7
0017 14             2918             DEC     A
0018 6014           2919             JZ      ?C0133
001A 14             2920             DEC     A
001B 6015           2921             JZ      ?C0134
001D 14             2922             DEC     A
001E 6016           2923             JZ      ?C0135
0020 14             2924             DEC     A
0021 6017           2925             JZ      ?C0136
0023 14             2926             DEC     A
0024 6018           2927             JZ      ?C0137
0026 2405           2928             ADD     A,#05H
0028 7016           2929             JNZ     ?C0130
                    2930     ;               {
                    2931                             ; SOURCE LINE # 751
                    2932     ;                       case 0: LED1 = 0; break;
                    2933                             ; SOURCE LINE # 752
002A                2934     ?C0132:
002A C297           2935             CLR     LED1
002C 8012           2936             SJMP    ?C0130
                    2937     ;                       case 1: LED2 = 0; break;
                    2938                             ; SOURCE LINE # 753
002E                2939     ?C0133:
002E C2A0           2940             CLR     LED2
0030 800E           2941             SJMP    ?C0130
                    2942     ;                       case 2: LED3 = 0; break;
                    2943                             ; SOURCE LINE # 754
0032                2944     ?C0134:
0032 C2A1           2945             CLR     LED3
0034 800A           2946             SJMP    ?C0130
                    2947     ;                       case 3: LED4 = 0; break;
                    2948                             ; SOURCE LINE # 755
0036                2949     ?C0135:
0036 C2A2           2950             CLR     LED4
0038 8006           2951             SJMP    ?C0130
                    2952     ;                       case 4: LED5 = 0; break;
                    2953                             ; SOURCE LINE # 756
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    46

003A                2954     ?C0136:
003A C2A3           2955             CLR     LED5
003C 8002           2956             SJMP    ?C0130
                    2957     ;                       case 5: LED6 = 0; break;
                    2958                             ; SOURCE LINE # 757
003E                2959     ?C0137:
003E C2A4           2960             CLR     LED6
                    2961     ;               }       
                    2962                             ; SOURCE LINE # 758
0040                2963     ?C0130:
0040 0E             2964             INC     R6
0041 80CD           2965             SJMP    ?C0128
                    2966     ;       }
                    2967                             ; SOURCE LINE # 759
0043                2968     ?C0127:
0043 0F             2969             INC     R7
0044 BF06C7         2970             CJNE    R7,#06H,?C0125
0047                2971     ?C0126:
                    2972     ;       ET0 = 1;
                    2973                             ; SOURCE LINE # 760
0047 D2A9           2974             SETB    ET0
                    2975     ;       TCON |= 0x10;
                    2976                             ; SOURCE LINE # 761
0049 438810         2977             ORL     TCON,#010H
                    2978     ; }
                    2979                             ; SOURCE LINE # 762
004C 22             2980             RET     
                    2981     ; END OF _LcdOutputLine
                    2982     
                    2983     ; 
                    2984     ; void WriteCounterToEEprom(void)
                    2985     
----                2986             RSEG  ?PR?WriteCounterToEEprom?MAIN
0000                2987     WriteCounterToEEprom:
                    2988             USING   0
                    2989                             ; SOURCE LINE # 764
                    2990     ; {
                    2991                             ; SOURCE LINE # 765
                    2992     ;       unsigned char temp_byte;
                    2993     ;       temp_byte = Counter;
                    2994                             ; SOURCE LINE # 767
                    2995     ;---- Variable 'temp_byte?747' assigned to Register 'R5' ----
0000 AD00     F     2996             MOV     R5,Counter+03H
                    2997     ;       EEPROM_ByteWrite(EEPROM_COUNTER_ADDR_LOW, temp_byte);
                    2998                             ; SOURCE LINE # 768
0002 7F04           2999             MOV     R7,#04H
0004 7E00           3000             MOV     R6,#00H
0006 120000   F     3001             LCALL   _EEPROM_ByteWrite
                    3002     ;       temp_byte = Counter>>8;
                    3003                             ; SOURCE LINE # 769
0009 AF00     F     3004             MOV     R7,Counter+03H
000B AE00     F     3005             MOV     R6,Counter+02H
000D AD00     F     3006             MOV     R5,Counter+01H
000F AC00     F     3007             MOV     R4,Counter
0011 7808           3008             MOV     R0,#08H
0013 120000   F     3009             LCALL   ?C?ULSHR
0016 AD07           3010             MOV     R5,AR7
                    3011     ;       EEPROM_ByteWrite(EEPROM_COUNTER_ADDR_HIGH,temp_byte);
                    3012                             ; SOURCE LINE # 770
0018 7F05           3013             MOV     R7,#05H
001A 7E00           3014             MOV     R6,#00H
001C 120000   F     3015             LCALL   _EEPROM_ByteWrite
                    3016     ; 
                    3017     ;       LedsSwitchOff();
                    3018                             ; SOURCE LINE # 772
001F 120000   F     3019             LCALL   LedsSwitchOff
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    47

                    3020     ;       LcdOutputLine(2);
                    3021                             ; SOURCE LINE # 773
0022 7F02           3022             MOV     R7,#02H
0024 020000   F     3023             LJMP    _LcdOutputLine
                    3024     ; END OF WriteCounterToEEprom
                    3025     
                    3026     ; }
                    3027     ; 
                    3028     ; void WriteDiscretToEEprom(void)
                    3029     
----                3030             RSEG  ?PR?WriteDiscretToEEprom?MAIN
0000                3031     WriteDiscretToEEprom:
                    3032             USING   0
                    3033                             ; SOURCE LINE # 776
                    3034     ; {
                    3035                             ; SOURCE LINE # 777
                    3036     ;       unsigned char temp_byte;
                    3037     ;       
                    3038     ;       if (Discret == 0) Discret = DEFAULT_DISCRET;
                    3039                             ; SOURCE LINE # 780
0000 E4             3040             CLR     A
0001 FF             3041             MOV     R7,A
0002 FE             3042             MOV     R6,A
0003 FD             3043             MOV     R5,A
0004 FC             3044             MOV     R4,A
0005 AB00     F     3045             MOV     R3,Discret+03H
0007 AA00     F     3046             MOV     R2,Discret+02H
0009 A900     F     3047             MOV     R1,Discret+01H
000B A800     F     3048             MOV     R0,Discret
000D C3             3049             CLR     C
000E 120000   F     3050             LCALL   ?C?ULCMP
0011 7009           3051             JNZ     ?C0140
0013 750064   F     3052             MOV     Discret+03H,#064H
0016 F500     F     3053             MOV     Discret+02H,A
0018 F500     F     3054             MOV     Discret+01H,A
001A F500     F     3055             MOV     Discret,A
001C                3056     ?C0140:
                    3057     ;       temp_byte = Discret;
                    3058                             ; SOURCE LINE # 781
                    3059     ;---- Variable 'temp_byte?848' assigned to Register 'R5' ----
001C AD00     F     3060             MOV     R5,Discret+03H
                    3061     ;       EEPROM_ByteWrite(EEPROM_DISCRET_ADDR_LOW, temp_byte);
                    3062                             ; SOURCE LINE # 782
001E 7F20           3063             MOV     R7,#020H
0020 7E00           3064             MOV     R6,#00H
0022 120000   F     3065             LCALL   _EEPROM_ByteWrite
                    3066     ;       temp_byte = Discret>>8;
                    3067                             ; SOURCE LINE # 783
0025 AF00     F     3068             MOV     R7,Discret+03H
0027 AE00     F     3069             MOV     R6,Discret+02H
0029 AD00     F     3070             MOV     R5,Discret+01H
002B AC00     F     3071             MOV     R4,Discret
002D 7808           3072             MOV     R0,#08H
002F 120000   F     3073             LCALL   ?C?ULSHR
0032 AD07           3074             MOV     R5,AR7
                    3075     ;       EEPROM_ByteWrite(EEPROM_DISCRET_ADDR_HIGH,temp_byte);
                    3076                             ; SOURCE LINE # 784
0034 7F21           3077             MOV     R7,#021H
0036 7E00           3078             MOV     R6,#00H
0038 120000   F     3079             LCALL   _EEPROM_ByteWrite
                    3080     ; 
                    3081     ;       LedsSwitchOff();
                    3082                             ; SOURCE LINE # 786
003B 120000   F     3083             LCALL   LedsSwitchOff
                    3084     ;       LcdOutputLine(2);
                    3085                             ; SOURCE LINE # 787
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    48

003E 7F02           3086             MOV     R7,#02H
0040 020000   F     3087             LJMP    _LcdOutputLine
                    3088     ; END OF WriteDiscretToEEprom
                    3089     
                    3090     ; }
                    3091     ; 
                    3092     ; void ResetCounterToOutputBuffer(void)
                    3093     
----                3094             RSEG  ?PR?ResetCounterToOutputBuffer?MAIN
0000                3095     ResetCounterToOutputBuffer:
                    3096             USING   0
                    3097                             ; SOURCE LINE # 790
                    3098     ; {
                    3099                             ; SOURCE LINE # 791
                    3100     ;       OutputBuffer[0] = EEPROM_ByteRead(EEPROM_RESET_COUNTER_ADDR);
                    3101                             ; SOURCE LINE # 792
0000 7F03           3102             MOV     R7,#03H
0002 7E00           3103             MOV     R6,#00H
0004 120000   F     3104             LCALL   _EEPROM_ByteRead
0007 8F00     F     3105             MOV     OutputBuffer,R7
                    3106     ;       OutputBuffer[1] = EEPROM_ByteRead(EEPROM_RESET_COUNTER_ADDR+1);
                    3107                             ; SOURCE LINE # 793
0009 7F04           3108             MOV     R7,#04H
000B 7E00           3109             MOV     R6,#00H
000D 120000   F     3110             LCALL   _EEPROM_ByteRead
0010 8F00     F     3111             MOV     OutputBuffer+01H,R7
                    3112     ;       OutputBuffer[2] = EEPROM_ByteRead(EEPROM_RESET_COUNTER_ADDR+2);
                    3113                             ; SOURCE LINE # 794
0012 7F05           3114             MOV     R7,#05H
0014 7E00           3115             MOV     R6,#00H
0016 120000   F     3116             LCALL   _EEPROM_ByteRead
0019 8F00     F     3117             MOV     OutputBuffer+02H,R7
                    3118     ;       OutputBuffer[3] = EEPROM_ByteRead(EEPROM_RESET_COUNTER_ADDR+3);
                    3119                             ; SOURCE LINE # 795
001B 7F06           3120             MOV     R7,#06H
001D 7E00           3121             MOV     R6,#00H
001F 120000   F     3122             LCALL   _EEPROM_ByteRead
0022 8F00     F     3123             MOV     OutputBuffer+03H,R7
                    3124     ; }
                    3125                             ; SOURCE LINE # 796
0024 22             3126             RET     
                    3127     ; END OF ResetCounterToOutputBuffer
                    3128     
                    3129     ; 
                    3130     ; void OutputBufferToResetCounter(void)
                    3131     
----                3132             RSEG  ?PR?OutputBufferToResetCounter?MAIN
0000                3133     OutputBufferToResetCounter:
                    3134             USING   0
                    3135                             ; SOURCE LINE # 798
                    3136     ; {
                    3137                             ; SOURCE LINE # 799
                    3138     ;               EEPROM_ByteWrite(EEPROM_RESET_COUNTER_ADDR, OutputBuffer[0]);
                    3139                             ; SOURCE LINE # 800
0000 AD00     F     3140             MOV     R5,OutputBuffer
0002 7F03           3141             MOV     R7,#03H
0004 7E00           3142             MOV     R6,#00H
0006 120000   F     3143             LCALL   _EEPROM_ByteWrite
                    3144     ;               EEPROM_ByteWrite(EEPROM_RESET_COUNTER_ADDR+1, OutputBuffer[1]);
                    3145                             ; SOURCE LINE # 801
0009 AD00     F     3146             MOV     R5,OutputBuffer+01H
000B 7F04           3147             MOV     R7,#04H
000D 7E00           3148             MOV     R6,#00H
000F 120000   F     3149             LCALL   _EEPROM_ByteWrite
                    3150     ;               EEPROM_ByteWrite(EEPROM_RESET_COUNTER_ADDR+2, OutputBuffer[2]);
                    3151                             ; SOURCE LINE # 802
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    49

0012 AD00     F     3152             MOV     R5,OutputBuffer+02H
0014 7F05           3153             MOV     R7,#05H
0016 7E00           3154             MOV     R6,#00H
0018 120000   F     3155             LCALL   _EEPROM_ByteWrite
                    3156     ;               EEPROM_ByteWrite(EEPROM_RESET_COUNTER_ADDR+3, OutputBuffer[3]);
                    3157                             ; SOURCE LINE # 803
001B AD00     F     3158             MOV     R5,OutputBuffer+03H
001D 7F06           3159             MOV     R7,#06H
001F 7E00           3160             MOV     R6,#00H
0021 020000   F     3161             LJMP    _EEPROM_ByteWrite
                    3162     ; END OF OutputBufferToResetCounter
                    3163     
                    3164     ; }
                    3165     ; 
                    3166     ; void OutSymbol(unsigned char LedNumber, unsigned char SymbolCode)
                    3167     
----                3168             RSEG  ?PR?_OutSymbol?MAIN
0000                3169     _OutSymbol:
                    3170             USING   0
                    3171                             ; SOURCE LINE # 806
0000 8F00     F     3172             MOV     LedNumber?1149,R7
0002 8D00     F     3173             MOV     SymbolCode?1150,R5
                    3174     ; {
                    3175                             ; SOURCE LINE # 807
                    3176     ;       LedsSwitchOff();
                    3177                             ; SOURCE LINE # 808
0004 120000   F     3178             LCALL   LedsSwitchOff
                    3179     ; 
                    3180     ;       switch (SymbolCode)
                    3181                             ; SOURCE LINE # 810
0007 E500     F     3182             MOV     A,SymbolCode?1150
0009 24D3           3183             ADD     A,#0D3H
000B B40D00         3184             CJNE    A,#0DH,?C0233
000E                3185     ?C0233:
000E 4003           3186             JC      $ + 5H
0010 020000   F     3187             LJMP    ?C0144
0013 900000   F     3188             MOV     DPTR,#?C0234
0016 75F003         3189             MOV     B,#03H
0019 A4             3190             MUL     AB
001A C583           3191             XCH     A,DPH
001C 25F0           3192             ADD     A,B
001E C583           3193             XCH     A,DPH
0020 73             3194             JMP     @A+DPTR
0021                3195     ?C0234:
0021 020000   F     3196             LJMP    ?C0145
0024 020000   F     3197             LJMP    ?C0144
0027 020000   F     3198             LJMP    ?C0144
002A 020000   F     3199             LJMP    ?C0146
002D 020000   F     3200             LJMP    ?C0147
0030 020000   F     3201             LJMP    ?C0148
0033 020000   F     3202             LJMP    ?C0149
0036 020000   F     3203             LJMP    ?C0150
0039 020000   F     3204             LJMP    ?C0151
003C 020000   F     3205             LJMP    ?C0152
003F 020000   F     3206             LJMP    ?C0153
0042 020000   F     3207             LJMP    ?C0154
0045 020000   F     3208             LJMP    ?C0155
                    3209     ;       {
                    3210                             ; SOURCE LINE # 811
                    3211     ;               case 0x2D:
                    3212                             ; SOURCE LINE # 812
0048                3213     ?C0145:
                    3214     ;               {
                    3215                             ; SOURCE LINE # 813
                    3216     ;                       SEGMENT_G = 1;
                    3217                             ; SOURCE LINE # 814
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    50

0048 D295           3218             SETB    SEGMENT_G
                    3219     ;               } break;
                    3220                             ; SOURCE LINE # 815
004A 8068           3221             SJMP    ?C0144
                    3222     ;               case 0x30:
                    3223                             ; SOURCE LINE # 816
004C                3224     ?C0146:
                    3225     ;               {
                    3226                             ; SOURCE LINE # 817
                    3227     ;                       SEGMENT_A = 1;
                    3228                             ; SOURCE LINE # 818
004C D290           3229             SETB    SEGMENT_A
                    3230     ;                       SEGMENT_B = 1;
                    3231                             ; SOURCE LINE # 819
004E D291           3232             SETB    SEGMENT_B
                    3233     ;                       SEGMENT_C = 1;
                    3234                             ; SOURCE LINE # 820
0050 D292           3235             SETB    SEGMENT_C
                    3236     ;                       SEGMENT_D = 1;
                    3237                             ; SOURCE LINE # 821
0052 D293           3238             SETB    SEGMENT_D
                    3239     ;                       SEGMENT_E = 1;
                    3240                             ; SOURCE LINE # 822
0054 D294           3241             SETB    SEGMENT_E
                    3242     ;                       SEGMENT_F = 1;
                    3243                             ; SOURCE LINE # 823
0056 D296           3244             SETB    SEGMENT_F
                    3245     ;               } break;
                    3246                             ; SOURCE LINE # 824
0058 805A           3247             SJMP    ?C0144
                    3248     ;               case 0x31:
                    3249                             ; SOURCE LINE # 825
005A                3250     ?C0147:
                    3251     ;               {
                    3252                             ; SOURCE LINE # 826
                    3253     ;                       SEGMENT_B = 1;
                    3254                             ; SOURCE LINE # 827
                    3255     ;                       SEGMENT_C = 1;
                    3256                             ; SOURCE LINE # 828
                    3257     ;               } break;
                    3258                             ; SOURCE LINE # 829
005A 803A           3259             SJMP    ?C0246
                    3260     ;               case 0x32:
                    3261                             ; SOURCE LINE # 830
005C                3262     ?C0148:
                    3263     ;               {
                    3264                             ; SOURCE LINE # 831
                    3265     ;                       SEGMENT_A = 1;
                    3266                             ; SOURCE LINE # 832
005C D290           3267             SETB    SEGMENT_A
                    3268     ;                       SEGMENT_B = 1;
                    3269                             ; SOURCE LINE # 833
005E D291           3270             SETB    SEGMENT_B
                    3271     ;                       SEGMENT_G = 1;
                    3272                             ; SOURCE LINE # 834
0060 D295           3273             SETB    SEGMENT_G
                    3274     ;                       SEGMENT_E = 1;
                    3275                             ; SOURCE LINE # 835
0062 D294           3276             SETB    SEGMENT_E
                    3277     ;                       SEGMENT_D = 1;
                    3278                             ; SOURCE LINE # 836
0064 D293           3279             SETB    SEGMENT_D
                    3280     ;               } break;
                    3281                             ; SOURCE LINE # 837
0066 804C           3282             SJMP    ?C0144
                    3283     ;               case 0x33:
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    51

                    3284                             ; SOURCE LINE # 838
0068                3285     ?C0149:
                    3286     ;               {
                    3287                             ; SOURCE LINE # 839
                    3288     ;                       SEGMENT_A = 1;
                    3289                             ; SOURCE LINE # 840
0068 D290           3290             SETB    SEGMENT_A
                    3291     ;                       SEGMENT_B = 1;
                    3292                             ; SOURCE LINE # 841
006A D291           3293             SETB    SEGMENT_B
                    3294     ;                       SEGMENT_C = 1;
                    3295                             ; SOURCE LINE # 842
006C D292           3296             SETB    SEGMENT_C
                    3297     ;                       SEGMENT_D = 1;
                    3298                             ; SOURCE LINE # 843
006E D293           3299             SETB    SEGMENT_D
                    3300     ;                       SEGMENT_G = 1;
                    3301                             ; SOURCE LINE # 844
0070 D295           3302             SETB    SEGMENT_G
                    3303     ;               } break;
                    3304                             ; SOURCE LINE # 845
0072 8040           3305             SJMP    ?C0144
                    3306     ;               case 0x34:
                    3307                             ; SOURCE LINE # 846
0074                3308     ?C0150:
                    3309     ;               {
                    3310                             ; SOURCE LINE # 847
                    3311     ;                       SEGMENT_B = 1;
                    3312                             ; SOURCE LINE # 848
0074 D291           3313             SETB    SEGMENT_B
                    3314     ;                       SEGMENT_C = 1;
                    3315                             ; SOURCE LINE # 849
0076 D292           3316             SETB    SEGMENT_C
                    3317     ;                       SEGMENT_F = 1;
                    3318                             ; SOURCE LINE # 850
                    3319     ;                       SEGMENT_G = 1;
                    3320                             ; SOURCE LINE # 851
                    3321     ;               } break;
                    3322                             ; SOURCE LINE # 852
0078 8036           3323             SJMP    ?C0248
                    3324     ;               case 0x35:
                    3325                             ; SOURCE LINE # 853
007A                3326     ?C0151:
                    3327     ;               {
                    3328                             ; SOURCE LINE # 854
                    3329     ;                       SEGMENT_A = 1;
                    3330                             ; SOURCE LINE # 855
007A D290           3331             SETB    SEGMENT_A
                    3332     ;                       SEGMENT_F = 1;
                    3333                             ; SOURCE LINE # 856
007C D296           3334             SETB    SEGMENT_F
                    3335     ;                       SEGMENT_G = 1;
                    3336                             ; SOURCE LINE # 857
007E D295           3337             SETB    SEGMENT_G
                    3338     ;                       SEGMENT_C = 1;
                    3339                             ; SOURCE LINE # 858
0080 D292           3340             SETB    SEGMENT_C
                    3341     ;                       SEGMENT_D = 1;
                    3342                             ; SOURCE LINE # 859
0082 D293           3343             SETB    SEGMENT_D
                    3344     ;               } break;
                    3345                             ; SOURCE LINE # 860
0084 802E           3346             SJMP    ?C0144
                    3347     ;               case 0x36:
                    3348                             ; SOURCE LINE # 861
0086                3349     ?C0152:
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    52

                    3350     ;               {
                    3351                             ; SOURCE LINE # 862
                    3352     ;                       SEGMENT_A = 1;
                    3353                             ; SOURCE LINE # 863
0086 D290           3354             SETB    SEGMENT_A
                    3355     ;                       SEGMENT_F = 1;
                    3356                             ; SOURCE LINE # 864
0088 D296           3357             SETB    SEGMENT_F
                    3358     ;                       SEGMENT_G = 1;
                    3359                             ; SOURCE LINE # 865
008A D295           3360             SETB    SEGMENT_G
                    3361     ;                       SEGMENT_E = 1;
                    3362                             ; SOURCE LINE # 866
008C D294           3363             SETB    SEGMENT_E
                    3364     ;                       SEGMENT_D = 1;
                    3365                             ; SOURCE LINE # 867
008E D293           3366             SETB    SEGMENT_D
                    3367     ;                       SEGMENT_C = 1;
                    3368                             ; SOURCE LINE # 868
0090 D292           3369             SETB    SEGMENT_C
                    3370     ;               } break;
                    3371                             ; SOURCE LINE # 869
0092 8020           3372             SJMP    ?C0144
                    3373     ;               case 0x37:
                    3374                             ; SOURCE LINE # 870
0094                3375     ?C0153:
                    3376     ;               {
                    3377                             ; SOURCE LINE # 871
                    3378     ;                       SEGMENT_A = 1;
                    3379                             ; SOURCE LINE # 872
0094 D290           3380             SETB    SEGMENT_A
                    3381     ;                       SEGMENT_B = 1;
                    3382                             ; SOURCE LINE # 873
0096                3383     ?C0246:
0096 D291           3384             SETB    SEGMENT_B
                    3385     ;                       SEGMENT_C = 1;
                    3386                             ; SOURCE LINE # 874
0098 D292           3387             SETB    SEGMENT_C
                    3388     ;               } break;
                    3389                             ; SOURCE LINE # 875
009A 8018           3390             SJMP    ?C0144
                    3391     ;               case 0x38:
                    3392                             ; SOURCE LINE # 876
009C                3393     ?C0154:
                    3394     ;               {
                    3395                             ; SOURCE LINE # 877
                    3396     ;                       SEGMENT_A = 1;
                    3397                             ; SOURCE LINE # 878
009C D290           3398             SETB    SEGMENT_A
                    3399     ;                       SEGMENT_B = 1;
                    3400                             ; SOURCE LINE # 879
009E D291           3401             SETB    SEGMENT_B
                    3402     ;                       SEGMENT_C = 1;
                    3403                             ; SOURCE LINE # 880
00A0 D292           3404             SETB    SEGMENT_C
                    3405     ;                       SEGMENT_D = 1;
                    3406                             ; SOURCE LINE # 881
00A2 D293           3407             SETB    SEGMENT_D
                    3408     ;                       SEGMENT_E = 1;
                    3409                             ; SOURCE LINE # 882
00A4 D294           3410             SETB    SEGMENT_E
                    3411     ;                       SEGMENT_F = 1;
                    3412                             ; SOURCE LINE # 883
00A6                3413     ?C0247:
                    3414     ;                       SEGMENT_G = 1;
                    3415                             ; SOURCE LINE # 884
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    53

                    3416     ;               } break;
                    3417                             ; SOURCE LINE # 885
00A6 8008           3418             SJMP    ?C0248
                    3419     ;               case 0x39:
                    3420                             ; SOURCE LINE # 886
00A8                3421     ?C0155:
                    3422     ;               {
                    3423                             ; SOURCE LINE # 887
                    3424     ;                       SEGMENT_A = 1;
                    3425                             ; SOURCE LINE # 888
00A8 D290           3426             SETB    SEGMENT_A
                    3427     ;                       SEGMENT_B = 1;
                    3428                             ; SOURCE LINE # 889
00AA D291           3429             SETB    SEGMENT_B
                    3430     ;                       SEGMENT_C = 1;
                    3431                             ; SOURCE LINE # 890
00AC D292           3432             SETB    SEGMENT_C
                    3433     ;                       SEGMENT_D = 1;
                    3434                             ; SOURCE LINE # 891
00AE D293           3435             SETB    SEGMENT_D
                    3436     ;                       SEGMENT_F = 1;
                    3437                             ; SOURCE LINE # 892
00B0                3438     ?C0248:
00B0 D296           3439             SETB    SEGMENT_F
                    3440     ;                       SEGMENT_G = 1;
                    3441                             ; SOURCE LINE # 893
00B2 D295           3442             SETB    SEGMENT_G
                    3443     ;               } break;
                    3444                             ; SOURCE LINE # 894
                    3445     ;       }
                    3446                             ; SOURCE LINE # 895
00B4                3447     ?C0144:
                    3448     ; 
                    3449     ;       if (FlagPoint == 1) SEGMENT_POINT = 1;
                    3450                             ; SOURCE LINE # 897
00B4 300002   F     3451             JNB     FlagPoint,?C0156
00B7 D287           3452             SETB    SEGMENT_POINT
00B9                3453     ?C0156:
                    3454     ;       switch (LedNumber)
                    3455                             ; SOURCE LINE # 898
00B9 E500     F     3456             MOV     A,LedNumber?1149
00BB 24FE           3457             ADD     A,#0FEH
00BD 6013           3458             JZ      ?C0159
00BF 14             3459             DEC     A
00C0 6013           3460             JZ      ?C0160
00C2 14             3461             DEC     A
00C3 6013           3462             JZ      ?C0161
00C5 14             3463             DEC     A
00C6 6013           3464             JZ      ?C0162
00C8 14             3465             DEC     A
00C9 6013           3466             JZ      ?C0163
00CB 2405           3467             ADD     A,#05H
00CD 7011           3468             JNZ     ?C0164
                    3469     ;       {
                    3470                             ; SOURCE LINE # 899
                    3471     ;               case 1: LED1 = 0; break;
                    3472                             ; SOURCE LINE # 900
00CF                3473     ?C0158:
00CF C297           3474             CLR     LED1
00D1 22             3475             RET     
                    3476     ;               case 2: LED2 = 0; break;
                    3477                             ; SOURCE LINE # 901
00D2                3478     ?C0159:
00D2 C2A0           3479             CLR     LED2
00D4 22             3480             RET     
                    3481     ;               case 3: LED3 = 0; break;
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    54

                    3482                             ; SOURCE LINE # 902
00D5                3483     ?C0160:
00D5 C2A1           3484             CLR     LED3
00D7 22             3485             RET     
                    3486     ;               case 4: LED4 = 0; break;
                    3487                             ; SOURCE LINE # 903
00D8                3488     ?C0161:
00D8 C2A2           3489             CLR     LED4
00DA 22             3490             RET     
                    3491     ;               case 5: LED5 = 0; break;
                    3492                             ; SOURCE LINE # 904
00DB                3493     ?C0162:
00DB C2A3           3494             CLR     LED5
00DD 22             3495             RET     
                    3496     ;               case 6: LED6 = 0; break;
                    3497                             ; SOURCE LINE # 905
00DE                3498     ?C0163:
00DE C2A4           3499             CLR     LED6
                    3500     ;       }       
                    3501                             ; SOURCE LINE # 906
                    3502     ; }
                    3503                             ; SOURCE LINE # 907
00E0                3504     ?C0164:
00E0 22             3505             RET     
                    3506     ; END OF _OutSymbol
                    3507     
                    3508     ; 
                    3509     ; void LedsSwitchOff(void)
                    3510     
----                3511             RSEG  ?PR?LedsSwitchOff?MAIN
0000                3512     LedsSwitchOff:
                    3513                             ; SOURCE LINE # 909
                    3514     ; {
                    3515                             ; SOURCE LINE # 910
                    3516     ;       LED1 = 1;
                    3517                             ; SOURCE LINE # 911
0000 D297           3518             SETB    LED1
                    3519     ;       LED2 = 1;
                    3520                             ; SOURCE LINE # 912
0002 D2A0           3521             SETB    LED2
                    3522     ;       LED3 = 1;
                    3523                             ; SOURCE LINE # 913
0004 D2A1           3524             SETB    LED3
                    3525     ;       LED4 = 1;
                    3526                             ; SOURCE LINE # 914
0006 D2A2           3527             SETB    LED4
                    3528     ;       LED5 = 1;
                    3529                             ; SOURCE LINE # 915
0008 D2A3           3530             SETB    LED5
                    3531     ;       LED6 = 1;
                    3532                             ; SOURCE LINE # 916
000A D2A4           3533             SETB    LED6
                    3534     ; 
                    3535     ;       SEGMENT_A = 0;
                    3536                             ; SOURCE LINE # 918
000C C290           3537             CLR     SEGMENT_A
                    3538     ;       SEGMENT_B = 0;
                    3539                             ; SOURCE LINE # 919
000E C291           3540             CLR     SEGMENT_B
                    3541     ;       SEGMENT_C = 0;
                    3542                             ; SOURCE LINE # 920
0010 C292           3543             CLR     SEGMENT_C
                    3544     ;       SEGMENT_D = 0;
                    3545                             ; SOURCE LINE # 921
0012 C293           3546             CLR     SEGMENT_D
                    3547     ;       SEGMENT_E = 0;
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    55

                    3548                             ; SOURCE LINE # 922
0014 C294           3549             CLR     SEGMENT_E
                    3550     ;       SEGMENT_F = 0;
                    3551                             ; SOURCE LINE # 923
0016 C296           3552             CLR     SEGMENT_F
                    3553     ;       SEGMENT_G = 0;
                    3554                             ; SOURCE LINE # 924
0018 C295           3555             CLR     SEGMENT_G
                    3556     ;       SEGMENT_POINT = 0;
                    3557                             ; SOURCE LINE # 925
001A C287           3558             CLR     SEGMENT_POINT
                    3559     ; }
                    3560                             ; SOURCE LINE # 926
001C 22             3561             RET     
                    3562     ; END OF LedsSwitchOff
                    3563     
                    3564     ; 
                    3565     ; //-------------------------
                    3566     ; // Initialize
                    3567     ; //-------------------------
                    3568     ; // Called when a DEV_CONFIGURED interrupt is received.
                    3569     ; // - Enables all peripherals needed for the application
                    3570     ; //
                    3571     ; void Initialize(void)
                    3572     
----                3573             RSEG  ?PR?Initialize?MAIN
0000                3574     Initialize:
                    3575             USING   0
                    3576                             ; SOURCE LINE # 934
                    3577     ; {
                    3578                             ; SOURCE LINE # 935
                    3579     ;       Port_Init();                           // Initialize crossbar and GPIO
                    3580                             ; SOURCE LINE # 936
0000 120000   F     3581             LCALL   Port_Init
                    3582     ;       OSCILLATOR_Init ();
                    3583                             ; SOURCE LINE # 937
0003 120000   F     3584             LCALL   OSCILLATOR_Init
                    3585     ; //    OSCICN |= 0x83;                                                 // задаём частоту
                    3586     ;       Timer0_Init();                          // Initialize timer2
                    3587                             ; SOURCE LINE # 939
0006 120000   F     3588             LCALL   Timer0_Init
                    3589     ;       Timer1_Init(); // smbus SCL
                    3590                             ; SOURCE LINE # 940
0009 120000   F     3591             LCALL   Timer1_Init
                    3592     ;       Timer3_Init(); // smbus
                    3593                             ; SOURCE LINE # 941
000C 120000   F     3594             LCALL   Timer3_Init
                    3595     ;       SMBus_Init ();
                    3596                             ; SOURCE LINE # 942
000F 120000   F     3597             LCALL   SMBus_Init
                    3598     ;       Ext_Interrupt_Init();
                    3599                             ; SOURCE LINE # 943
0012 020000   F     3600             LJMP    Ext_Interrupt_Init
                    3601     ; END OF Initialize
                    3602     
                    3603     ; }
                    3604     ; 
                    3605     ; void OSCILLATOR_Init (void)
                    3606     
----                3607             RSEG  ?PR?OSCILLATOR_Init?MAIN
0000                3608     OSCILLATOR_Init:
                    3609                             ; SOURCE LINE # 946
                    3610     ; {
                    3611                             ; SOURCE LINE # 947
                    3612     ; #ifdef EXTERNAL_CRYSTAL
                    3613     ;       int i;
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    56

                    3614     ;     OSCXCN    = 0x67;
                    3615     ;     for (i = 0; i < 256; i++);  // Wait 1ms for initialization
                    3616     ;     while (!(OSCXCN & 0x80));           // Wait for crystal osc. to settle
                    3617     ;       RSTSRC = 0x06;                          // Enable missing clock detector and
                    3618     ;                                               // VDD Monitor reset
                    3619     ; 
                    3620     ; //    CLKMUL = 0x00;
                    3621     ;       CLKSEL = 0x01;                          // Select external oscillator as system
                    3622     ;                                                       // clock source
                    3623     ; //    CLKMUL |= 0x80;
                    3624     ; //    for (i = 0; i < 256; i++);  // Wait 1ms for initialization
                    3625     ; //    CLKMUL |= 0xC0;
                    3626     ; //    while (!(CLKMUL & 0x20));           // 
                    3627     ;       
                    3628     ;       OSCICN = 0x03;                          // Disable the internal oscillator.
                    3629     ; #else
                    3630     ;       OSCICN = 0x83;                                                  // задаём частоту
                    3631                             ; SOURCE LINE # 966
0000 75B283         3632             MOV     OSCICN,#083H
                    3633     ;       RSTSRC |= 0x04;                         // Enable missing clock detector and
                    3634                             ; SOURCE LINE # 967
0003 43EF04         3635             ORL     RSTSRC,#04H
                    3636     ; #endif
                    3637     ; }
                    3638                             ; SOURCE LINE # 969
0006 22             3639             RET     
                    3640     ; END OF OSCILLATOR_Init
                    3641     
                    3642     ; 
                    3643     ; //-------------------------
                    3644     ; // Timer_Init
                    3645     ; //-------------------------
                    3646     ; // Timer initialization
                    3647     ; // - 1 mhz timer 2 reload, used to check if switch pressed on overflow and
                    3648     ; // used for ADC continuous conversion
                    3649     ; //
                    3650     ; void Timer0_Init(void)
                    3651     
----                3652             RSEG  ?PR?Timer0_Init?MAIN
0000                3653     Timer0_Init:
                    3654                             ; SOURCE LINE # 978
                    3655     ; {
                    3656                             ; SOURCE LINE # 979
                    3657     ;       TL0 = 0;
                    3658                             ; SOURCE LINE # 980
0000 E4             3659             CLR     A
0001 F58A           3660             MOV     TL0,A
                    3661     ;       TH0 = 1;
                    3662                             ; SOURCE LINE # 981
0003 758C01         3663             MOV     TH0,#01H
                    3664     ; 
                    3665     ;       TMOD = 0x02;    //      00 - 13bit, 01 - 16bit, 02 - 8 bit;;
                    3666                             ; SOURCE LINE # 983
0006 758902         3667             MOV     TMOD,#02H
                    3668     ;                                       //      T0M1=0; // 16-РАЗРЯДНЫЙ ТАЙМЕР
                    3669     ; 
                    3670     ; #ifdef EXTERNAL_CRYSTAL
                    3671     ;       CKCON = 0x03; 
                    3672     ; #else
                    3673     ;       CKCON = 0x00; // делитель на 12 (01 - на 4, 10 - на 48, на 8  - EXT CLK)
                    3674                             ; SOURCE LINE # 989
0009 F58E           3675             MOV     CKCON,A
                    3676     ; #endif
                    3677     ;       TCON = 0x10;                        // Timer0 ON
                    3678                             ; SOURCE LINE # 991
000B 758810         3679             MOV     TCON,#010H
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    57

                    3680     ; }
                    3681                             ; SOURCE LINE # 992
000E 22             3682             RET     
                    3683     ; END OF Timer0_Init
                    3684     
                    3685     ; 
                    3686     ; void Timer1_Init (void)
                    3687     
----                3688             RSEG  ?PR?Timer1_Init?MAIN
0000                3689     Timer1_Init:
                    3690                             ; SOURCE LINE # 994
                    3691     ; {
                    3692                             ; SOURCE LINE # 995
                    3693     ; #if ((SYSCLK/SMB_FREQUENCY/3) < 255)
                    3694     ;    #define SCALE 1
                    3695     ;       CKCON |= 0x08;                   // Timer1 clock source = SYSCLK
                    3696                             ; SOURCE LINE # 998
0000 438E08         3697             ORL     CKCON,#08H
                    3698     ; #elif ((SYSCLK/SMB_FREQUENCY/4/3) < 255)
                    3699     ;    #define SCALE 4
                    3700     ;       CKCON |= 0x01;
                    3701     ;       CKCON &= ~0x0A;                  // Timer1 clock source = SYSCLK / 4
                    3702     ; #endif
                    3703     ; 
                    3704     ;    TMOD |= 0x20;                        // Timer1 in 8-bit auto-reload mode
                    3705                             ; SOURCE LINE # 1005
0003 438920         3706             ORL     TMOD,#020H
                    3707     ; 
                    3708     ;    TH1 = -(SYSCLK/SMB_FREQUENCY/12/3); // Timer1 configured to overflow at 1/3
                    3709                             ; SOURCE LINE # 1007
0006 758DF8         3710             MOV     TH1,#0F8H
                    3711     ;                                        // the rate defined by SMB_FREQUENCY
                    3712     ; 
                    3713     ;    TL1 = TH1;                          // Init Timer1
                    3714                             ; SOURCE LINE # 1010
0009 858D8B         3715             MOV     TL1,TH1
                    3716     ; 
                    3717     ;    TR1 = 1;                            // Timer1 enabled
                    3718                             ; SOURCE LINE # 1012
000C D28E           3719             SETB    TR1
                    3720     ; }
                    3721                             ; SOURCE LINE # 1013
000E 22             3722             RET     
                    3723     ; END OF Timer1_Init
                    3724     
                    3725     ; 
                    3726     ; 
                    3727     ; void Timer3_Init (void)
                    3728     
----                3729             RSEG  ?PR?Timer3_Init?MAIN
0000                3730     Timer3_Init:
                    3731                             ; SOURCE LINE # 1016
                    3732     ; {
                    3733                             ; SOURCE LINE # 1017
                    3734     ;    TMR3CN = 0x00;                      // Timer3 configured for 16-bit auto-
                    3735                             ; SOURCE LINE # 1018
0000 E4             3736             CLR     A
0001 F591           3737             MOV     TMR3CN,A
                    3738     ;                                        // reload, low-byte interrupt disabled
                    3739     ; 
                    3740     ;    CKCON &= ~0x40;                     // Timer3 uses SYSCLK/12
                    3741                             ; SOURCE LINE # 1021
0003 538EBF         3742             ANL     CKCON,#0BFH
                    3743     ;    TMR3RL = -(SYSCLK/12/40);           // Timer3 configured to overflow after
                    3744                             ; SOURCE LINE # 1022
0006 75939E         3745             MOV     TMR3RL+01H,#09EH
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    58

0009 759258         3746             MOV     TMR3RL,#058H
                    3747     ;    TMR3 = TMR3RL;                      // ~25ms (for SMBus low timeout detect)
                    3748                             ; SOURCE LINE # 1023
000C 859395         3749             MOV     TMR3+01H,TMR3RL+01H
000F 859294         3750             MOV     TMR3,TMR3RL
                    3751     ; 
                    3752     ;    EIE1 |= 0x80;                       // Timer3 interrupt enable
                    3753                             ; SOURCE LINE # 1025
0012 43E680         3754             ORL     EIE1,#080H
                    3755     ;    TMR3CN |= 0x04;                     // Start Timer3
                    3756                             ; SOURCE LINE # 1026
0015 439104         3757             ORL     TMR3CN,#04H
                    3758     ; }
                    3759                             ; SOURCE LINE # 1027
0018 22             3760             RET     
                    3761     ; END OF Timer3_Init
                    3762     
                    3763     ; 
                    3764     ; void Port_Init(void)
                    3765     
----                3766             RSEG  ?PR?Port_Init?MAIN
0000                3767     Port_Init:
                    3768                             ; SOURCE LINE # 1029
                    3769     ; {
                    3770                             ; SOURCE LINE # 1030
                    3771     ; #ifdef EXTERNAL_CRYSTAL
                    3772     ;       P0MDIN &= ~0x0C;                    // P0.2, P0.3 are analog 
                    3773     ; #endif
                    3774     ; 
                    3775     ; #ifdef EXTERNAL_CRYSTAL
                    3776     ;       P0SKIP  |= 0x0C;
                    3777     ; #endif
                    3778     ; 
                    3779     ;       P0MDOUT = 0xFF; // все на выход
                    3780                             ; SOURCE LINE # 1039
0000 75A4FF         3781             MOV     P0MDOUT,#0FFH
                    3782     ;       P0MDOUT &= ~0x7F; // bit6,5,4,3 - клавиатура, bit2 вход /INT0, /INT1, bit0,1 - I2C 
                             EEprom
                    3783                             ; SOURCE LINE # 1040
0003 53A480         3784             ANL     P0MDOUT,#080H
                    3785     ; 
                    3786     ;       P1MDOUT = 0xFF;  // все на выход
                    3787                             ; SOURCE LINE # 1042
0006 75A5FF         3788             MOV     P1MDOUT,#0FFH
                    3789     ; 
                    3790     ;       P2MDOUT = 0xFF;  // все на выход
                    3791                             ; SOURCE LINE # 1044
0009 75A6FF         3792             MOV     P2MDOUT,#0FFH
                    3793     ;       P2MDOUT &= ~0x20; // Int0 дополнение - вход
                    3794                             ; SOURCE LINE # 1045
000C 53A6DF         3795             ANL     P2MDOUT,#0DFH
                    3796     ; 
                    3797     ; //    P2MDOUT &= ~0xE0; // bit 5,6,7 input
                    3798     ; 
                    3799     ;       P0 |= 0x78; // p0.7, p0.6, p0.5 - клавиатура
                    3800                             ; SOURCE LINE # 1049
000F 438078         3801             ORL     P0,#078H
                    3802     ;       P0 |= 0x0C; // p0.2  - вход /INT0
                    3803                             ; SOURCE LINE # 1050
0012 43800C         3804             ORL     P0,#0CH
                    3805     ;       P0 &= ~0x03; // p0.0 , p0.1 - TX / RX I2C
                    3806                             ; SOURCE LINE # 1051
0015 5380FC         3807             ANL     P0,#0FCH
                    3808     ; 
                    3809     ;       P2 |= 0xE0; 
                    3810                             ; SOURCE LINE # 1053
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    59

0018 43A0E0         3811             ORL     P2,#0E0H
                    3812     ; 
                    3813     ;       XBR0    = 0x04;                                         // SMBUS enabled
                    3814                             ; SOURCE LINE # 1055
001B 75E104         3815             MOV     XBR0,#04H
                    3816     ;       XBR1    = 0x40;                     // Enable Crossbar and weak pull-ups
                    3817                             ; SOURCE LINE # 1056
001E 75E240         3818             MOV     XBR1,#040H
                    3819     ; }
                    3820                             ; SOURCE LINE # 1057
0021 22             3821             RET     
                    3822     ; END OF Port_Init
                    3823     
                    3824     ; 
                    3825     ; //
                    3826     ; // SMBUS INIT
                    3827     ; //
                    3828     ; //
                    3829     ; void SMBus_Init (void)
                    3830     
----                3831             RSEG  ?PR?SMBus_Init?MAIN
0000                3832     SMBus_Init:
                    3833                             ; SOURCE LINE # 1063
                    3834     ; {
                    3835                             ; SOURCE LINE # 1064
                    3836     ;       SMB0CF = 0x5D;                      // Use Timer1 overflows as SMBus clock
                    3837                             ; SOURCE LINE # 1065
0000 75C15D         3838             MOV     SMB0CF,#05DH
                    3839     ;                                        // source;
                    3840     ;                                        // Disable slave mode;
                    3841     ;                                        // Enable setup & hold time extensions;
                    3842     ;                                        // Enable SMBus Free timeout detect;
                    3843     ;                                        // Enable SCL low timeout detect;
                    3844     ; 
                    3845     ;       SMB0CF |= 0x80;                     // Enable SMBus;
                    3846                             ; SOURCE LINE # 1072
0003 43C180         3847             ORL     SMB0CF,#080H
                    3848     ; }
                    3849                             ; SOURCE LINE # 1073
0006 22             3850             RET     
                    3851     ; END OF SMBus_Init
                    3852     
                    3853     ; 
                    3854     ; void Ext_Interrupt_Init (void)
                    3855     
----                3856             RSEG  ?PR?Ext_Interrupt_Init?MAIN
0000                3857     Ext_Interrupt_Init:
                    3858                             ; SOURCE LINE # 1075
                    3859     ; {
                    3860                             ; SOURCE LINE # 1076
                    3861     ;       IP = 0x05;// int1, int0 высокий приоритет
                    3862                             ; SOURCE LINE # 1077
0000 75B805         3863             MOV     IP,#05H
                    3864     ; 
                    3865     ; //    if (KEY1 == 0) TCON &= ~0x01;                        // /INT 0 если активен (bit = 
                             1 если фронтом)
                    3866     ; //    else TCON |= 0x01; // фронтом
                    3867     ;       TCON |= 0x05; // фронтом
                    3868                             ; SOURCE LINE # 1081
0003 438805         3869             ORL     TCON,#05H
                    3870     ;       IT01CF &= ~0x0A;        // полярность /INT0 ( 0 - низкий активный уровень)1
                    3871                             ; SOURCE LINE # 1082
0006 53E4F5         3872             ANL     IT01CF,#0F5H
                    3873     ; // выбор активности или HIGH или LOW
                    3874     ; //    if (KEY2 == 1) IT01CF &= ~0x08; // полярность /INT0 ( 0 - низкий активный уровень)1
                    3875     ; //    else IT01CF |= 0x08; // 1 - высокий
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    60

                    3876     ; 
                    3877     ; //    if (KEY3 == 0) TCON &= ~0x04;                        // /INT 1 если активен (bit = 
                             1 если фронтом)
                    3878     ; //    else TCON |= 0x04; // фронтом
                    3879     ; 
                    3880     ; // выбор активности или HIGH или LOW
                    3881     ; //    if (KEY4 == 0) IT01CF &= ~0x80; // полярность /INT1 ( 0 - низкий активный уровень)
                    3882     ; //    else IT01CF |= 0x80; // 1 - высокий
                    3883     ; 
                    3884     ;       IT01CF |= 0x02; // 
                    3885                             ; SOURCE LINE # 1094
0009 43E402         3886             ORL     IT01CF,#02H
                    3887     ;       IT01CF &= ~0x05; // выбор порта P0.2 для /INT0
                    3888                             ; SOURCE LINE # 1095
000C 53E4FA         3889             ANL     IT01CF,#0FAH
                    3890     ; 
                    3891     ;       IT01CF |= 0x30; // 
                    3892                             ; SOURCE LINE # 1097
000F 43E430         3893             ORL     IT01CF,#030H
                    3894     ;       IT01CF &= ~0x40; // выбор порта P0.3 для /INT1
                    3895                             ; SOURCE LINE # 1098
0012 53E4BF         3896             ANL     IT01CF,#0BFH
                    3897     ; 
                    3898     ;       EX0 = 1;                            // Enable /INT0 interrupts
                    3899                             ; SOURCE LINE # 1100
0015 D2A8           3900             SETB    EX0
                    3901     ;       EX1 = 1;                            // Enable /INT1 interrupts
                    3902                             ; SOURCE LINE # 1101
0017 D2AA           3903             SETB    EX1
                    3904     ; }
                    3905                             ; SOURCE LINE # 1102
0019 22             3906             RET     
                    3907     ; END OF Ext_Interrupt_Init
                    3908     
                    3909     ; 
                    3910     ; 
                    3911     ; //-----------------------------------------------------------------------------
                    3912     ; // EEPROM_ByteWrite ()
                    3913     ; //-----------------------------------------------------------------------------
                    3914     ; //
                    3915     ; // Return Value : None
                    3916     ; // Parameters   :
                    3917     ; //   1) unsigned char addr - address to write in the EEPROM
                    3918     ; //                        range is full range of character: 0 to 255
                    3919     ; //
                    3920     ; //   2) unsigned char dat - data to write to the address <addr> in the EEPROM
                    3921     ; //                        range is full range of character: 0 to 255
                    3922     ; //
                    3923     ; // This function writes the value in <dat> to location <addr> in the EEPROM
                    3924     ; // then polls the EEPROM until the write is complete.
                    3925     ; //
                    3926     ; void EEPROM_ByteWrite(U16 addr, unsigned char dat)
                    3927     
----                3928             RSEG  ?PR?_EEPROM_ByteWrite?MAIN
0000                3929     L?0249:
                    3930             USING   0
0000 AD00     F     3931             MOV     R5,LcdMode
0002 7F10           3932             MOV     R7,#010H
0004 7E00           3933             MOV     R6,#00H
0006                3934     _EEPROM_ByteWrite:
                    3935             USING   0
                    3936                             ; SOURCE LINE # 1120
                    3937     ;---- Variable 'addr?2151' assigned to Register 'R2/R3' ----
0006 AB07           3938             MOV     R3,AR7
0008 AA06           3939             MOV     R2,AR6
                    3940     ;---- Variable 'dat?2152' assigned to Register 'R5' ----
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    61

                    3941     ; {
                    3942                             ; SOURCE LINE # 1121
000A                3943     ?C0174:
                    3944     ;    while (SMB_BUSY);                   // Wait for SMBus to be free.
                    3945                             ; SOURCE LINE # 1122
000A 2000FD   F     3946             JB      SMB_BUSY,?C0174
000D                3947     ?C0175:
                    3948     ;    SMB_BUSY = 1;                       // Claim SMBus (set to busy)
                    3949                             ; SOURCE LINE # 1123
000D D200     F     3950             SETB    SMB_BUSY
                    3951     ; 
                    3952     ;       WORD_ADDR_HIGH = addr >> 8;                   // Set the target address in the
                    3953                             ; SOURCE LINE # 1125
000F 8A00     F     3954             MOV     WORD_ADDR_HIGH,R2
                    3955     ;       WORD_ADDR_LOW = addr & 0xFF;
                    3956                             ; SOURCE LINE # 1126
0011 EB             3957             MOV     A,R3
0012 F500     F     3958             MOV     WORD_ADDR_LOW,A
                    3959     ; 
                    3960     ;    // Set SMBus ISR parameters
                    3961     ; #ifdef EEPROM_24C128
                    3962     ;       SMB_SENDWORDADDR_HIGH = 1;
                    3963                             ; SOURCE LINE # 1130
0014 D200     F     3964             SETB    SMB_SENDWORDADDR_HIGH
                    3965     ; #endif
                    3966     ; #ifdef EEPROM_24C16
                    3967     ;       SMB_SENDWORDADDR_HIGH = 0;
                    3968     ; #endif
                    3969     ;       SMB_RW = WRITE;                     // Mark next transfer as a write
                    3970                             ; SOURCE LINE # 1135
0016 C200     F     3971             CLR     SMB_RW
                    3972     ;       SMB_SENDWORDADDR_LOW = 1;               // Send Word Address after Slave Address
                    3973                             ; SOURCE LINE # 1136
0018 D200     F     3974             SETB    SMB_SENDWORDADDR_LOW
                    3975     ; 
                    3976     ;       SMB_RANDOMREAD = 0;                 // Do not send a START signal after
                    3977                             ; SOURCE LINE # 1138
001A C200     F     3978             CLR     SMB_RANDOMREAD
                    3979     ;                                        // the word address
                    3980     ;       SMB_ACKPOLL = 1;                    // Enable Acknowledge Polling (The ISR
                    3981                             ; SOURCE LINE # 1140
001C D200     F     3982             SETB    SMB_ACKPOLL
                    3983     ;                                        // will automatically restart the
                    3984     ;                                        // transfer if the slave does not
                    3985     ;                                        // acknoledge its address.
                    3986     ; 
                    3987     ;    // Specify the Outgoing Data
                    3988     ;       SMB_SINGLEBYTE_OUT = dat;           // Store <dat> (local variable) in a
                    3989                             ; SOURCE LINE # 1146
001E 8D00     F     3990             MOV     SMB_SINGLEBYTE_OUT,R5
                    3991     ;                                        // global variable so the ISR can read
                    3992     ;                                        // it after this function exits
                    3993     ; 
                    3994     ;    // The outgoing data pointer points to the <dat> variable
                    3995     ;       pSMB_DATA_OUT = &SMB_SINGLEBYTE_OUT;
                    3996                             ; SOURCE LINE # 1151
0020 750000   F     3997             MOV     pSMB_DATA_OUT,#00H
0023 750000   F     3998             MOV     pSMB_DATA_OUT+01H,#HIGH (SMB_SINGLEBYTE_OUT)
0026 750000   F     3999             MOV     pSMB_DATA_OUT+02H,#LOW (SMB_SINGLEBYTE_OUT)
                    4000     ; 
                    4001     ; //    SMB_DATA_LEN = 1;                   // Specify to ISR that the next transfer
                    4002     ;                                        // will contain one data byte
                    4003     ; 
                    4004     ;    // Initiate SMBus Transfer
                    4005     ;       STA = 1;
                    4006                             ; SOURCE LINE # 1157
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    62

0029 D2C5           4007             SETB    STA
                    4008     ; }
                    4009                             ; SOURCE LINE # 1158
002B 22             4010             RET     
                    4011     ; END OF _EEPROM_ByteWrite
                    4012     
                    4013     ; 
                    4014     ; 
                    4015     ; //-----------------------------------------------------------------------------
                    4016     ; // EEPROM_ByteRead ()
                    4017     ; //-----------------------------------------------------------------------------
                    4018     ; //
                    4019     ; // Return Value :
                    4020     ; //   1) unsigned char data - data read from address <addr> in the EEPROM
                    4021     ; //                        range is full range of character: 0 to 255
                    4022     ; //
                    4023     ; // Parameters   :
                    4024     ; //   1) unsigned char addr - address to read data from the EEPROM
                    4025     ; //                        range is full range of character: 0 to 255
                    4026     ; //
                    4027     ; // This function returns a single byte from location <addr> in the EEPROM then
                    4028     ; // polls the <SMB_BUSY> flag until the read is complete.
                    4029     ; //
                    4030     ; unsigned char EEPROM_ByteRead(U16 addr)
                    4031     
----                4032             RSEG  ?PR?_EEPROM_ByteRead?MAIN
0000                4033     _EEPROM_ByteRead:
                    4034             USING   0
                    4035                             ; SOURCE LINE # 1176
                    4036     ;---- Variable 'addr?2253' assigned to Register 'R4/R5' ----
0000 AD07           4037             MOV     R5,AR7
0002 AC06           4038             MOV     R4,AR6
                    4039     ; {
                    4040                             ; SOURCE LINE # 1177
0004                4041     ?C0177:
                    4042     ;    unsigned char retval;               // Holds the return value
                    4043     ; 
                    4044     ;    
                    4045     ;    while (SMB_BUSY);                   // Wait for SMBus to be free.
                    4046                             ; SOURCE LINE # 1181
0004 2000FD   F     4047             JB      SMB_BUSY,?C0177
0007                4048     ?C0178:
                    4049     ;    SMB_BUSY = 1;                       // Claim SMBus (set to busy)
                    4050                             ; SOURCE LINE # 1182
0007 D200     F     4051             SETB    SMB_BUSY
                    4052     ; 
                    4053     ; 
                    4054     ;       WORD_ADDR_HIGH = addr >> 8;                   // Set the target address in the
                    4055                             ; SOURCE LINE # 1185
0009 8C00     F     4056             MOV     WORD_ADDR_HIGH,R4
                    4057     ;       WORD_ADDR_LOW = addr & 0xFF; 
                    4058                             ; SOURCE LINE # 1186
000B ED             4059             MOV     A,R5
000C F500     F     4060             MOV     WORD_ADDR_LOW,A
                    4061     ; 
                    4062     ;    // Set SMBus ISR parameters
                    4063     ; #ifdef EEPROM_24C128
                    4064     ;       SMB_SENDWORDADDR_HIGH = 1;
                    4065                             ; SOURCE LINE # 1190
000E D200     F     4066             SETB    SMB_SENDWORDADDR_HIGH
                    4067     ; #endif
                    4068     ; #ifdef EEPROM_24C16
                    4069     ;       SMB_SENDWORDADDR_HIGH = 0;
                    4070     ; #endif
                    4071     ; 
                    4072     ;    SMB_SENDWORDADDR_LOW = 1;               // Send Word Address after Slave Address
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    63

                    4073                             ; SOURCE LINE # 1196
0010 D200     F     4074             SETB    SMB_SENDWORDADDR_LOW
                    4075     ;    SMB_RW = WRITE;                     // A random read starts as a write
                    4076                             ; SOURCE LINE # 1197
0012 C200     F     4077             CLR     SMB_RW
                    4078     ;                                        // then changes to a read after
                    4079     ;                                        // the repeated start is sent. The
                    4080     ;                                        // ISR handles this switchover if
                    4081     ;                                        // the <SMB_RANDOMREAD> bit is set.
                    4082     ;    SMB_RANDOMREAD = 1;                 // Send a START after the word address
                    4083                             ; SOURCE LINE # 1202
0014 D200     F     4084             SETB    SMB_RANDOMREAD
                    4085     ;    SMB_ACKPOLL = 1;                    // Enable Acknowledge Polling
                    4086                             ; SOURCE LINE # 1203
0016 D200     F     4087             SETB    SMB_ACKPOLL
                    4088     ; 
                    4089     ; 
                    4090     ;    // Specify the Incoming Data
                    4091     ;    pSMB_DATA_IN = &retval;             // The incoming data pointer points to
                    4092                             ; SOURCE LINE # 1207
0018 750000   F     4093             MOV     pSMB_DATA_IN,#00H
001B 750000   F     4094             MOV     pSMB_DATA_IN+01H,#HIGH (retval?2254)
001E 750000   F     4095             MOV     pSMB_DATA_IN+02H,#LOW (retval?2254)
                    4096     ;                                        // the <retval> variable.
                    4097     ; 
                    4098     ; //   SMB_DATA_LEN = 1;                   // Specify to ISR that the next transfer
                    4099     ;                                        // will contain one data byte
                    4100     ; 
                    4101     ;    // Initiate SMBus Transfer
                    4102     ;    STA = 1;
                    4103                             ; SOURCE LINE # 1214
0021 D2C5           4104             SETB    STA
0023                4105     ?C0179:
                    4106     ;    while(SMB_BUSY);                    // Wait until data is read
                    4107                             ; SOURCE LINE # 1215
0023 2000FD   F     4108             JB      SMB_BUSY,?C0179
0026                4109     ?C0180:
                    4110     ; 
                    4111     ;    return retval;
                    4112                             ; SOURCE LINE # 1217
0026 AF00     F     4113             MOV     R7,retval?2254
                    4114     ; 
                    4115     ; }
                    4116                             ; SOURCE LINE # 1219
0028                4117     ?C0181:
0028 22             4118             RET     
                    4119     ; END OF _EEPROM_ByteRead
                    4120     
                    4121     ; 
                    4122     ; void Suspend_Device(void)
                    4123     
----                4124             RSEG  ?PR?Suspend_Device?MAIN
0000                4125     Suspend_Device:
                    4126             USING   0
                    4127                             ; SOURCE LINE # 1221
                    4128     ; {
                    4129                             ; SOURCE LINE # 1222
                    4130     ;    // Disable peripherals before calling USB_Suspend()
                    4131     ; //    P0MDIN = 0x0;                       // Port 0 configured as analog input
                    4132     ; //    P1MDIN = 0x00;                       // Port 1 configured as analog input
                    4133     ; //    P2MDIN = 0x0;
                    4134     ; //    ADC0CN &= ~0x80;                     // Disable ADC0
                    4135     ; //    ET0 = 0;
                    4136     ; //    ET2 = 0;                             // Disable Timer 2 Interrupts
                    4137     ; 
                    4138     ;       USB_Suspend();                       // Put the device in suspend state
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    64

                    4139                             ; SOURCE LINE # 1231
0000 020000   F     4140             LJMP    USB_Suspend
                    4141     ; END OF Suspend_Device
                    4142     
----                4143     CSEG    AT      00003H
0003 020000   F     4144             LJMP    INT0_ISR
                    4145     
                    4146     ;                                                                               // Once exe
                             cution returns from USB_Suspend(), device leaves suspend state.
                    4147     ;                                                                               // Reenable
                              peripherals
                    4148     ; //    ADC0CN |= 0x80;                      // Enable ADC0
                    4149     ; //    P0MDIN = 0xFF;
                    4150     ; //    P1MDIN = 0xFF;                       // Port 1 pin 7 set as analog input
                    4151     ; //    P2MDIN = 0xFF;
                    4152     ; //    ET0 = 1;
                    4153     ; //    ET2 = 1;                                                        // Enable Timer 2 I
                             nterrupts
                    4154     ; }
                    4155     ; 
                    4156     ; //
                    4157     ; //  IIII  SS  RRR                                   
                    4158     ; //   II  S  S R  R                                  
                    4159     ; //   II  SS   R  R                                  
                    4160     ; //   II   SS  RRR                                   
                    4161     ; //   II    SS R  R                                  
                    4162     ; //   II  S  S R  R                                  
                    4163     ; //  IIII  SS  R  R                                  
                    4164     ; //
                    4165     ; //
                    4166     ; //
                    4167     ; //-----------------------------------------------------------------------------
                    4168     ; // /INT0 ISR
                    4169     ; //-----------------------------------------------------------------------------
                    4170     ; //
                    4171     ; // Whenever a negative edge appears on P0.0, LED1 is toggled.
                    4172     ; // The interrupt pending flag is automatically cleared by vectoring to the ISR
                    4173     ; //
                    4174     ; //-----------------------------------------------------------------------------
                    4175     ; void INT0_ISR (void) interrupt 0
                    4176     
----                4177             RSEG  ?PR?INT0_ISR?MAIN
                    4178             USING   0
0000                4179     INT0_ISR:
0000 C0E0           4180             PUSH    ACC
0002 C0D0           4181             PUSH    PSW
                    4182                             ; SOURCE LINE # 1261
                    4183     ; {
                    4184     ;       Counter++;
                    4185                             ; SOURCE LINE # 1263
0004 E500     F     4186             MOV     A,Counter+03H
0006 2401           4187             ADD     A,#01H
0008 F500     F     4188             MOV     Counter+03H,A
000A E4             4189             CLR     A
000B 3500     F     4190             ADDC    A,Counter+02H
000D F500     F     4191             MOV     Counter+02H,A
000F E4             4192             CLR     A
0010 3500     F     4193             ADDC    A,Counter+01H
0012 F500     F     4194             MOV     Counter+01H,A
0014 E4             4195             CLR     A
0015 3500     F     4196             ADDC    A,Counter
0017 F500     F     4197             MOV     Counter,A
                    4198     ; }
                    4199                             ; SOURCE LINE # 1264
0019 D0D0           4200             POP     PSW
001B D0E0           4201             POP     ACC
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    65

001D 32             4202             RETI    
                    4203     ; END OF INT0_ISR
                    4204     
----                4205     CSEG    AT      00013H
0013 020000   F     4206             LJMP    INT1_ISR
                    4207     
                    4208     ; void INT1_ISR (void) interrupt 2
                    4209     
----                4210             RSEG  ?PR?INT1_ISR?MAIN
                    4211             USING   0
0000                4212     INT1_ISR:
0000 C0E0           4213             PUSH    ACC
0002 C0D0           4214             PUSH    PSW
                    4215                             ; SOURCE LINE # 1265
                    4216     ; {
                    4217     ;       Counter--;
                    4218                             ; SOURCE LINE # 1267
0004 E500     F     4219             MOV     A,Counter+03H
0006 24FF           4220             ADD     A,#0FFH
0008 F500     F     4221             MOV     Counter+03H,A
000A E500     F     4222             MOV     A,Counter+02H
000C 34FF           4223             ADDC    A,#0FFH
000E F500     F     4224             MOV     Counter+02H,A
0010 E500     F     4225             MOV     A,Counter+01H
0012 34FF           4226             ADDC    A,#0FFH
0014 F500     F     4227             MOV     Counter+01H,A
0016 E500     F     4228             MOV     A,Counter
0018 34FF           4229             ADDC    A,#0FFH
001A F500     F     4230             MOV     Counter,A
                    4231     ; }
                    4232                             ; SOURCE LINE # 1268
001C D0D0           4233             POP     PSW
001E D0E0           4234             POP     ACC
0020 32             4235             RETI    
                    4236     ; END OF INT1_ISR
                    4237     
----                4238     CSEG    AT      0003BH
003B 020000   F     4239             LJMP    SMBus_ISR
                    4240     
                    4241     ; 
                    4242     ; //-----------------------------------------------------------------------------
                    4243     ; // SMBus Interrupt Service Routine (ISR)
                    4244     ; //-----------------------------------------------------------------------------
                    4245     ; //
                    4246     ; void SMBus_ISR (void) interrupt 7
                    4247     
----                4248             RSEG  ?PR?SMBus_ISR?MAIN
                    4249             USING   0
0000                4250     SMBus_ISR:
0000 C0E0           4251             PUSH    ACC
0002 C083           4252             PUSH    DPH
0004 C082           4253             PUSH    DPL
0006 C0D0           4254             PUSH    PSW
0008 75D000         4255             MOV     PSW,#00H
000B C001           4256             PUSH    AR1
000D C002           4257             PUSH    AR2
000F C003           4258             PUSH    AR3
                    4259             USING   0
                    4260                             ; SOURCE LINE # 1274
                    4261     ; {
                    4262     ;    bit FAIL = 0;                       // Used by the ISR to flag failed
                    4263                             ; SOURCE LINE # 1276
0011 C200     F     4264             CLR     FAIL?2655
                    4265     ;                                        // transfers
                    4266     ; 
                    4267     ;    static char i;                      // Used by the ISR to count the
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    66

                    4268     ;                                        // number of data bytes sent or
                    4269     ;                                        // received
                    4270     ; 
                    4271     ;    static bit SEND_START = 0;          // Send a start
                    4272     ; 
                    4273     ;    switch (SMB0CN & 0xF0)              // Status vector
                    4274                             ; SOURCE LINE # 1285
0013 E5C0           4275             MOV     A,SMB0CN
0015 54F0           4276             ANL     A,#0F0H
0017 2480           4277             ADD     A,#080H
0019 7003           4278             JNZ     $ + 5H
001B 020000   F     4279             LJMP    ?C0200
001E 24C0           4280             ADD     A,#0C0H
0020 601B           4281             JZ      ?C0187
0022 24E0           4282             ADD     A,#0E0H
0024 6003           4283             JZ      $ + 5H
0026 020000   F     4284             LJMP    ?C0203
                    4285     ;    {
                    4286                             ; SOURCE LINE # 1286
                    4287     ;       // Master Transmitter/Receiver: START condition transmitted.
                    4288     ;       case SMB_MTSTA:
                    4289                             ; SOURCE LINE # 1288
0029                4290     ?C0186:
                    4291     ;          SMB0DAT = TARGET;             // Load address of the target slave
                    4292                             ; SOURCE LINE # 1289
0029 75C2A0         4293             MOV     SMB0DAT,#0A0H
                    4294     ;          SMB0DAT &= 0xFE;              // Clear the LSB of the address for the
                    4295                             ; SOURCE LINE # 1290
002C 53C2FE         4296             ANL     SMB0DAT,#0FEH
                    4297     ;                                        // R/W bit
                    4298     ;          SMB0DAT |= SMB_RW;            // Load R/W bit
                    4299                             ; SOURCE LINE # 1292
002F A200     F     4300             MOV     C,SMB_RW
0031 E4             4301             CLR     A
0032 33             4302             RLC     A
0033 42C2           4303             ORL     SMB0DAT,A
                    4304     ; 
                    4305     ; #ifdef EEPROM_24C16
                    4306     ;               SMB0DAT = SMB0DAT | ((WORD_ADDR_HIGH & 0x07)<<1);
                    4307     ; #endif
                    4308     ; 
                    4309     ;          STA = 0;                      // Manually clear START bit
                    4310                             ; SOURCE LINE # 1298
0035 C2C5           4311             CLR     STA
                    4312     ;          i = 0;                        // Reset data byte counter
                    4313                             ; SOURCE LINE # 1299
0037 750000   F     4314             MOV     i?2656,#00H
                    4315     ;          break;
                    4316                             ; SOURCE LINE # 1300
003A 020000   F     4317             LJMP    ?C0185
                    4318     ; 
                    4319     ;       // Master Transmitter: Data byte (or Slave Address) transmitted
                    4320     ;       case SMB_MTDB:
                    4321                             ; SOURCE LINE # 1303
003D                4322     ?C0187:
                    4323     ;          if (ACK)                      // Slave Address or Data Byte
                    4324                             ; SOURCE LINE # 1304
003D 30C151         4325             JNB     ACK,?C0188
                    4326     ;          {                             // Acknowledged?
                    4327                             ; SOURCE LINE # 1305
                    4328     ;             if (SEND_START)
                    4329                             ; SOURCE LINE # 1306
0040 300007   F     4330             JNB     SEND_START?2657,?C0189
                    4331     ;             {
                    4332                             ; SOURCE LINE # 1307
                    4333     ;                STA = 1;
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    67

                    4334                             ; SOURCE LINE # 1308
0043 D2C5           4335             SETB    STA
                    4336     ;                SEND_START = 0;
                    4337                             ; SOURCE LINE # 1309
0045 C200     F     4338             CLR     SEND_START?2657
                    4339     ;                break;
                    4340                             ; SOURCE LINE # 1310
0047 020000   F     4341             LJMP    ?C0185
                    4342     ;             }
                    4343                             ; SOURCE LINE # 1311
004A                4344     ?C0189:
                    4345     ; 
                    4346     ;             if(SMB_SENDWORDADDR_HIGH)       // Are we sending the word address?
                    4347                             ; SOURCE LINE # 1313
004A 300007   F     4348             JNB     SMB_SENDWORDADDR_HIGH,?C0190
                    4349     ;             {
                    4350                             ; SOURCE LINE # 1314
                    4351     ;                SMB_SENDWORDADDR_HIGH = 0;   // Clear flag
                    4352                             ; SOURCE LINE # 1315
004D C200     F     4353             CLR     SMB_SENDWORDADDR_HIGH
                    4354     ;                SMB0DAT = WORD_ADDR_HIGH;    // Send word address
                    4355                             ; SOURCE LINE # 1316
004F 8500C2   F     4356             MOV     SMB0DAT,WORD_ADDR_HIGH
                    4357     ;                break;
                    4358                             ; SOURCE LINE # 1317
0052 807A           4359             SJMP    ?C0185
                    4360     ;             }
                    4361                             ; SOURCE LINE # 1318
0054                4362     ?C0190:
                    4363     ; 
                    4364     ;             if(SMB_SENDWORDADDR_LOW)       // Are we sending the word address?
                    4365                             ; SOURCE LINE # 1320
0054 30000E   F     4366             JNB     SMB_SENDWORDADDR_LOW,?C0191
                    4367     ;             {
                    4368                             ; SOURCE LINE # 1321
                    4369     ;                SMB_SENDWORDADDR_LOW = 0;   // Clear flag
                    4370                             ; SOURCE LINE # 1322
0057 C200     F     4371             CLR     SMB_SENDWORDADDR_LOW
                    4372     ;                SMB0DAT = WORD_ADDR_LOW;    // Send word address
                    4373                             ; SOURCE LINE # 1323
0059 8500C2   F     4374             MOV     SMB0DAT,WORD_ADDR_LOW
                    4375     ; 
                    4376     ;                if (SMB_RANDOMREAD)
                    4377                             ; SOURCE LINE # 1325
005C 30006F   F     4378             JNB     SMB_RANDOMREAD,?C0185
                    4379     ;                {
                    4380                             ; SOURCE LINE # 1326
                    4381     ;                   SEND_START = 1;      // Send a START after the next ACK cycle
                    4382                             ; SOURCE LINE # 1327
005F D200     F     4383             SETB    SEND_START?2657
                    4384     ;                   SMB_RW = READ;
                    4385                             ; SOURCE LINE # 1328
0061 D200     F     4386             SETB    SMB_RW
                    4387     ;                }
                    4388                             ; SOURCE LINE # 1329
                    4389     ; 
                    4390     ;                break;
                    4391                             ; SOURCE LINE # 1331
0063 8069           4392             SJMP    ?C0185
                    4393     ;             }
                    4394                             ; SOURCE LINE # 1332
0065                4395     ?C0191:
                    4396     ; 
                    4397     ;             if (SMB_RW==WRITE)         // Is this transfer a WRITE?
                    4398                             ; SOURCE LINE # 1334
0065 200066   F     4399             JB      SMB_RW,?C0185
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    68

                    4400     ;             {
                    4401                             ; SOURCE LINE # 1335
                    4402     ; 
                    4403     ;                if (i < 1)   // Is there data to send?
                    4404                             ; SOURCE LINE # 1337
0068 C3             4405             CLR     C
0069 E500     F     4406             MOV     A,i?2656
006B 6480           4407             XRL     A,#080H
006D 9481           4408             SUBB    A,#081H
006F 501A           4409             JNC     ?C0194
                    4410     ;                {
                    4411                             ; SOURCE LINE # 1338
                    4412     ; //                  // send data byte
                    4413     ;                   SMB0DAT = *pSMB_DATA_OUT;
                    4414                             ; SOURCE LINE # 1340
0071 AB00     F     4415             MOV     R3,pSMB_DATA_OUT
0073 AA00     F     4416             MOV     R2,pSMB_DATA_OUT+01H
0075 A900     F     4417             MOV     R1,pSMB_DATA_OUT+02H
0077 120000   F     4418             LCALL   ?C?CLDPTR
007A F5C2           4419             MOV     SMB0DAT,A
                    4420     ; //
                    4421     ;                   // increment data out pointer
                    4422     ;                   pSMB_DATA_OUT++;
                    4423                             ; SOURCE LINE # 1343
007C 7401           4424             MOV     A,#01H
007E 2500     F     4425             ADD     A,pSMB_DATA_OUT+02H
0080 F500     F     4426             MOV     pSMB_DATA_OUT+02H,A
0082 E4             4427             CLR     A
0083 3500     F     4428             ADDC    A,pSMB_DATA_OUT+01H
0085 F500     F     4429             MOV     pSMB_DATA_OUT+01H,A
                    4430     ; 
                    4431     ;                   // increment number of bytes sent
                    4432     ;                   i++;
                    4433                             ; SOURCE LINE # 1346
0087 0500     F     4434             INC     i?2656
                    4435     ;                }
                    4436                             ; SOURCE LINE # 1347
0089 8043           4437             SJMP    ?C0185
008B                4438     ?C0194:
                    4439     ;                else
                    4440     ;                {
                    4441                             ; SOURCE LINE # 1349
                    4442     ;                  STO = 1;              // Set STO to terminte transfer
                    4443                             ; SOURCE LINE # 1350
008B D2C4           4444             SETB    STO
                    4445     ;                  SMB_BUSY = 0;         // Clear software busy flag
                    4446                             ; SOURCE LINE # 1351
008D C200     F     4447             CLR     SMB_BUSY
                    4448     ;                }
                    4449                             ; SOURCE LINE # 1352
                    4450     ;             }
                    4451                             ; SOURCE LINE # 1353
008F 803D           4452             SJMP    ?C0185
                    4453     ;             else {}                    // If this transfer is a READ,
                    4454                             ; SOURCE LINE # 1354
                    4455     ;                                        // then take no action. Slave
                    4456     ;                                        // address was transmitted. A
                    4457     ;                                        // separate 'case' is defined
                    4458     ;                                        // for data byte recieved.
                    4459     ;          }
                    4460                             ; SOURCE LINE # 1359
0091                4461     ?C0188:
                    4462     ;          else                          // If slave NACK,
                    4463     ;          {
                    4464                             ; SOURCE LINE # 1361
                    4465     ;             if(SMB_ACKPOLL)
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    69

                    4466                             ; SOURCE LINE # 1362
0091 300004   F     4467             JNB     SMB_ACKPOLL,?C0198
                    4468     ;             {
                    4469                             ; SOURCE LINE # 1363
                    4470     ;                STA = 1;                // Restart transfer
                    4471                             ; SOURCE LINE # 1364
0094 D2C5           4472             SETB    STA
                    4473     ;             }
                    4474                             ; SOURCE LINE # 1365
0096 8036           4475             SJMP    ?C0185
0098                4476     ?C0198:
                    4477     ;             else
                    4478     ;             {
                    4479                             ; SOURCE LINE # 1367
                    4480     ;                FAIL = 1;               // Indicate failed transfer
                    4481                             ; SOURCE LINE # 1368
0098 D200     F     4482             SETB    FAIL?2655
                    4483     ;             }                          // and handle at end of ISR
                    4484                             ; SOURCE LINE # 1369
                    4485     ;          }
                    4486                             ; SOURCE LINE # 1370
                    4487     ;          break;
                    4488                             ; SOURCE LINE # 1371
009A 8032           4489             SJMP    ?C0185
                    4490     ; 
                    4491     ;       // Master Receiver: byte received
                    4492     ;       case SMB_MRDB:
                    4493                             ; SOURCE LINE # 1374
009C                4494     ?C0200:
                    4495     ;          if ( i < 1 )       // Is there any data remaining?
                    4496                             ; SOURCE LINE # 1375
009C C3             4497             CLR     C
009D E500     F     4498             MOV     A,i?2656
009F 6480           4499             XRL     A,#080H
00A1 9481           4500             SUBB    A,#081H
00A3 501A           4501             JNC     ?C0201
                    4502     ;          {
                    4503                             ; SOURCE LINE # 1376
                    4504     ;             *pSMB_DATA_IN = SMB0DAT;   // Store received byte
                    4505                             ; SOURCE LINE # 1377
00A5 AB00     F     4506             MOV     R3,pSMB_DATA_IN
00A7 AA00     F     4507             MOV     R2,pSMB_DATA_IN+01H
00A9 A900     F     4508             MOV     R1,pSMB_DATA_IN+02H
00AB E5C2           4509             MOV     A,SMB0DAT
00AD 120000   F     4510             LCALL   ?C?CSTPTR
                    4511     ;             pSMB_DATA_IN++;            // Increment data in pointer
                    4512                             ; SOURCE LINE # 1378
00B0 7401           4513             MOV     A,#01H
00B2 2500     F     4514             ADD     A,pSMB_DATA_IN+02H
00B4 F500     F     4515             MOV     pSMB_DATA_IN+02H,A
00B6 E4             4516             CLR     A
00B7 3500     F     4517             ADDC    A,pSMB_DATA_IN+01H
00B9 F500     F     4518             MOV     pSMB_DATA_IN+01H,A
                    4519     ;             i++;                       // Increment number of bytes received
                    4520                             ; SOURCE LINE # 1379
00BB 0500     F     4521             INC     i?2656
                    4522     ;             ACK = 1;                   // Set ACK bit (may be cleared later
                    4523                             ; SOURCE LINE # 1380
00BD D2C1           4524             SETB    ACK
                    4525     ;                                        // in the code)
                    4526     ; 
                    4527     ;          }
                    4528                             ; SOURCE LINE # 1383
00BF                4529     ?C0201:
                    4530     ; 
                    4531     ;          if (i == 1)        // This is the last byte
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    70

                    4532                             ; SOURCE LINE # 1385
00BF E500     F     4533             MOV     A,i?2656
00C1 B4010A         4534             CJNE    A,#01H,?C0185
                    4535     ;          {
                    4536                             ; SOURCE LINE # 1386
                    4537     ;             SMB_BUSY = 0;              // Free SMBus interface
                    4538                             ; SOURCE LINE # 1387
00C4 C200     F     4539             CLR     SMB_BUSY
                    4540     ;             ACK = 0;                   // Send NACK to indicate last byte
                    4541                             ; SOURCE LINE # 1388
00C6 C2C1           4542             CLR     ACK
                    4543     ;                                        // of this transfer
                    4544     ;             STO = 1;                   // Send STOP to terminate transfer
                    4545                             ; SOURCE LINE # 1390
00C8 D2C4           4546             SETB    STO
                    4547     ;          }
                    4548                             ; SOURCE LINE # 1391
                    4549     ; 
                    4550     ;          break;
                    4551                             ; SOURCE LINE # 1393
00CA 8002           4552             SJMP    ?C0185
                    4553     ; 
                    4554     ;       default:
                    4555                             ; SOURCE LINE # 1395
00CC                4556     ?C0203:
                    4557     ;          FAIL = 1;                     // Indicate failed transfer
                    4558                             ; SOURCE LINE # 1396
00CC D200     F     4559             SETB    FAIL?2655
                    4560     ;                                        // and handle at end of ISR
                    4561     ;          break;
                    4562                             ; SOURCE LINE # 1398
                    4563     ;    }
                    4564                             ; SOURCE LINE # 1399
00CE                4565     ?C0185:
                    4566     ; 
                    4567     ;    if (FAIL)                           // If the transfer failed,
                    4568                             ; SOURCE LINE # 1401
00CE 300010   F     4569             JNB     FAIL?2655,?C0204
                    4570     ;    {
                    4571                             ; SOURCE LINE # 1402
                    4572     ;       SMB0CF &= ~0x80;                 // Reset communication
                    4573                             ; SOURCE LINE # 1403
00D1 53C17F         4574             ANL     SMB0CF,#07FH
                    4575     ;       SMB0CF |= 0x80;
                    4576                             ; SOURCE LINE # 1404
00D4 43C180         4577             ORL     SMB0CF,#080H
                    4578     ;       STA = 0;
                    4579                             ; SOURCE LINE # 1405
00D7 C2C5           4580             CLR     STA
                    4581     ;       STO = 0;
                    4582                             ; SOURCE LINE # 1406
00D9 C2C4           4583             CLR     STO
                    4584     ;       ACK = 0;
                    4585                             ; SOURCE LINE # 1407
00DB C2C1           4586             CLR     ACK
                    4587     ; 
                    4588     ;       SMB_BUSY = 0;                    // Free SMBus
                    4589                             ; SOURCE LINE # 1409
00DD C200     F     4590             CLR     SMB_BUSY
                    4591     ; 
                    4592     ;       FAIL = 0;
                    4593                             ; SOURCE LINE # 1411
00DF C200     F     4594             CLR     FAIL?2655
                    4595     ;    }
                    4596                             ; SOURCE LINE # 1412
00E1                4597     ?C0204:
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    71

                    4598     ; 
                    4599     ;    SI = 0;                             // Clear interrupt flag
                    4600                             ; SOURCE LINE # 1414
00E1 C2C0           4601             CLR     SI
                    4602     ; 
                    4603     ; }
                    4604                             ; SOURCE LINE # 1416
00E3 D003           4605             POP     AR3
00E5 D002           4606             POP     AR2
00E7 D001           4607             POP     AR1
00E9 D0D0           4608             POP     PSW
00EB D082           4609             POP     DPL
00ED D083           4610             POP     DPH
00EF D0E0           4611             POP     ACC
00F1 32             4612             RETI    
                    4613     ; END OF SMBus_ISR
                    4614     
----                4615     CSEG    AT      0000BH
000B 020000   F     4616             LJMP    Timer0_ISR
                    4617     
                    4618     ; 
                    4619     ; //-------------------------
                    4620     ; // Timer0_ISR
                    4621     ; //-------------------------
                    4622     ; // Called when timer 2 overflows, check to see if switch is pressed,
                    4623     ; // then watch for release.
                    4624     ; //
                    4625     ; INTERRUPT(Timer0_ISR, INTERRUPT_TIMER0)
                    4626     
----                4627             RSEG  ?PR?Timer0_ISR?MAIN
                    4628             USING   0
0000                4629     Timer0_ISR:
0000 C0E0           4630             PUSH    ACC
0002 C0F0           4631             PUSH    B
0004 C083           4632             PUSH    DPH
0006 C082           4633             PUSH    DPL
0008 C0D0           4634             PUSH    PSW
000A 75D000         4635             MOV     PSW,#00H
000D C000           4636             PUSH    AR0
000F C001           4637             PUSH    AR1
0011 C002           4638             PUSH    AR2
0013 C003           4639             PUSH    AR3
0015 C004           4640             PUSH    AR4
0017 C005           4641             PUSH    AR5
0019 C006           4642             PUSH    AR6
001B C007           4643             PUSH    AR7
                    4644             USING   0
                    4645                             ; SOURCE LINE # 1424
                    4646     ; {
                    4647     ;       unsigned char i;
                    4648     ;       static int low_counter=0;  // Define counter variable
                    4649     ; 
                    4650     ;       TL0 = TIMER0_RELOAD_LOW;            // Reinit Timer0 Low register
                    4651                             ; SOURCE LINE # 1429
001D 758AF8         4652             MOV     TL0,#0F8H
                    4653     ; 
                    4654     ; //    if ((low_counter2++) == Timer0_RateEncoder )
                    4655     ; //    {
                    4656     ; //            EncoderScan5();
                    4657     ; //            low_counter2 = 0;
                    4658     ; //    }
                    4659     ;       if ((low_counter++) == Timer0_Rate)
                    4660                             ; SOURCE LINE # 1436
0020 0500     F     4661             INC     low_counter?2759+01H
0022 E500     F     4662             MOV     A,low_counter?2759+01H
0024 AE00     F     4663             MOV     R6,low_counter?2759
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    72

0026 7002           4664             JNZ     ?C0235
0028 0500     F     4665             INC     low_counter?2759
002A                4666     ?C0235:
002A 14             4667             DEC     A
002B 640A           4668             XRL     A,#0AH
002D 4E             4669             ORL     A,R6
002E 7049           4670             JNZ     ?C0213
                    4671     ;       {
                    4672                             ; SOURCE LINE # 1437
                    4673     ; //            if (LcdMode = 0) j = 5; else j = 6;
                    4674     ;               for (i=0;i<(5 + LcdMode);i++) 
                    4675                             ; SOURCE LINE # 1439
0030 F500     F     4676             MOV     i?2758,A
0032                4677     ?C0207:
0032 E500     F     4678             MOV     A,LcdMode
0034 2405           4679             ADD     A,#05H
0036 FF             4680             MOV     R7,A
0037 E4             4681             CLR     A
0038 33             4682             RLC     A
0039 FE             4683             MOV     R6,A
003A C3             4684             CLR     C
003B E500     F     4685             MOV     A,i?2758
003D 9F             4686             SUBB    A,R7
003E EE             4687             MOV     A,R6
003F 6480           4688             XRL     A,#080H
0041 F8             4689             MOV     R0,A
0042 7480           4690             MOV     A,#080H
0044 98             4691             SUBB    A,R0
0045 502C           4692             JNC     ?C0208
                    4693     ;               {
                    4694                             ; SOURCE LINE # 1440
                    4695     ;                       if (i == 4) FlagPoint = 1; else FlagPoint = 0;
                    4696                             ; SOURCE LINE # 1441
0047 E500     F     4697             MOV     A,i?2758
0049 B40404         4698             CJNE    A,#04H,?C0210
004C D200     F     4699             SETB    FlagPoint
004E 8002           4700             SJMP    ?C0211
0050                4701     ?C0210:
0050 C200     F     4702             CLR     FlagPoint
0052                4703     ?C0211:
                    4704     ;                       if (LcdMode == 0) FlagPoint = 1;
                    4705                             ; SOURCE LINE # 1442
0052 E500     F     4706             MOV     A,LcdMode
0054 7002           4707             JNZ     ?C0212
0056 D200     F     4708             SETB    FlagPoint
0058                4709     ?C0212:
                    4710     ;                       OutSymbol(i+1,0x30 | OutputBuffer[i]);
                    4711                             ; SOURCE LINE # 1443
0058 E500     F     4712             MOV     A,i?2758
005A 04             4713             INC     A
005B FF             4714             MOV     R7,A
005C 7400     F     4715             MOV     A,#LOW (OutputBuffer)
005E 2500     F     4716             ADD     A,i?2758
0060 F8             4717             MOV     R0,A
0061 E6             4718             MOV     A,@R0
0062 4430           4719             ORL     A,#030H
0064 FD             4720             MOV     R5,A
0065 120000   F     4721             LCALL   _OutSymbol
                    4722     ;                       Del     (200);
                    4723                             ; SOURCE LINE # 1444
0068 7FC8           4724             MOV     R7,#0C8H
006A 7E00           4725             MOV     R6,#00H
006C 120000   F     4726             LCALL   _Del
                    4727     ;               }
                    4728                             ; SOURCE LINE # 1445
006F 0500     F     4729             INC     i?2758
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    73

0071 80BF           4730             SJMP    ?C0207
0073                4731     ?C0208:
                    4732     ;               low_counter = 0;
                    4733                             ; SOURCE LINE # 1446
0073 750000   F     4734             MOV     low_counter?2759,#00H
0076 750000   F     4735             MOV     low_counter?2759+01H,#00H
                    4736     ;       }
                    4737                             ; SOURCE LINE # 1447
                    4738     ; }
                    4739                             ; SOURCE LINE # 1448
0079                4740     ?C0213:
0079 D007           4741             POP     AR7
007B D006           4742             POP     AR6
007D D005           4743             POP     AR5
007F D004           4744             POP     AR4
0081 D003           4745             POP     AR3
0083 D002           4746             POP     AR2
0085 D001           4747             POP     AR1
0087 D000           4748             POP     AR0
0089 D0D0           4749             POP     PSW
008B D082           4750             POP     DPL
008D D083           4751             POP     DPH
008F D0F0           4752             POP     B
0091 D0E0           4753             POP     ACC
0093 32             4754             RETI    
                    4755     ; END OF Timer0_ISR
                    4756     
----                4757     CSEG    AT      0002BH
002B 020000   F     4758             LJMP    Timer2_ISR
                    4759     
                    4760     ; //-------------------------
                    4761     ; // Timer2_ISR
                    4762     ; //-------------------------
                    4763     ; // Called when timer 2 overflows, check to see if switch is pressed,
                    4764     ; // then watch for release.
                    4765     ; //
                    4766     ; INTERRUPT(Timer2_ISR, INTERRUPT_TIMER2)
                    4767     
----                4768             RSEG  ?PR?Timer2_ISR?MAIN
                    4769             USING   0
0000                4770     Timer2_ISR:
                    4771                             ; SOURCE LINE # 1455
                    4772     ; {
                    4773     ;       TF2H = 0;                              // Clear Timer2 interrupt flag
                    4774                             ; SOURCE LINE # 1457
0000 C2CF           4775             CLR     TF2H
                    4776     ;       ET2=1;
                    4777                             ; SOURCE LINE # 1458
0002 D2AD           4778             SETB    ET2
                    4779     ; }
                    4780                             ; SOURCE LINE # 1459
0004 32             4781             RETI    
                    4782     ; END OF Timer2_ISR
                    4783     
----                4784     CSEG    AT      00073H
0073 020000   F     4785             LJMP    Timer3_ISR
                    4786     
                    4787     ; 
                    4788     ; //-----------------------------------------------------------------------------
                    4789     ; // Timer3 Interrupt Service Routine (ISR)
                    4790     ; //-----------------------------------------------------------------------------
                    4791     ; //
                    4792     ; // A Timer3 interrupt indicates an SMBus SCL low timeout.
                    4793     ; // The SMBus is disabled and re-enabled if a timeout occurs.
                    4794     ; //
                    4795     ; void Timer3_ISR (void) interrupt 14
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    74

                    4796     
----                4797             RSEG  ?PR?Timer3_ISR?MAIN
                    4798             USING   0
0000                4799     Timer3_ISR:
                    4800                             ; SOURCE LINE # 1468
                    4801     ; {
                    4802     ;    SMB0CF &= ~0x80;                    // Disable SMBus
                    4803                             ; SOURCE LINE # 1470
0000 53C17F         4804             ANL     SMB0CF,#07FH
                    4805     ;    SMB0CF |= 0x80;                     // Re-enable SMBus
                    4806                             ; SOURCE LINE # 1471
0003 43C180         4807             ORL     SMB0CF,#080H
                    4808     ;    TMR3CN &= ~0x80;                    // Clear Timer3 interrupt-pending flag
                    4809                             ; SOURCE LINE # 1472
0006 53917F         4810             ANL     TMR3CN,#07FH
                    4811     ;    SMB_BUSY = 0;                       // Free bus
                    4812                             ; SOURCE LINE # 1473
0009 C200     F     4813             CLR     SMB_BUSY
                    4814     ; }
                    4815                             ; SOURCE LINE # 1474
000B 32             4816             RETI    
                    4817     ; END OF Timer3_ISR
                    4818     
----                4819     CSEG    AT      0008BH
008B 020000   F     4820             LJMP    USB_API_TEST_ISR
                    4821     
                    4822     ; 
                    4823     ; INTERRUPT(USB_API_TEST_ISR, INTERRUPT_USBXpress)
                    4824     
----                4825             RSEG  ?PR?USB_API_TEST_ISR?MAIN
                    4826             USING   0
0000                4827     USB_API_TEST_ISR:
0000 C0E0           4828             PUSH    ACC
0002 C0F0           4829             PUSH    B
0004 C083           4830             PUSH    DPH
0006 C082           4831             PUSH    DPL
0008 C0D0           4832             PUSH    PSW
000A 75D000         4833             MOV     PSW,#00H
000D C000           4834             PUSH    AR0
000F C001           4835             PUSH    AR1
0011 C002           4836             PUSH    AR2
0013 C003           4837             PUSH    AR3
0015 C004           4838             PUSH    AR4
0017 C005           4839             PUSH    AR5
0019 C006           4840             PUSH    AR6
001B C007           4841             PUSH    AR7
                    4842             USING   0
                    4843                             ; SOURCE LINE # 1476
                    4844     ; {
                    4845     ;       unsigned char INTVAL = Get_Interrupt_Source();
                    4846                             ; SOURCE LINE # 1478
001D 120000   F     4847             LCALL   Get_Interrupt_Source
0020 8F00     F     4848             MOV     INTVAL?3060,R7
                    4849     ; 
                    4850     ;    if (INTVAL & RX_COMPLETE)
                    4851                             ; SOURCE LINE # 1480
0022 E500     F     4852             MOV     A,INTVAL?3060
0024 30E20B         4853             JNB     ACC.2,?C0216
                    4854     ;    {
                    4855                             ; SOURCE LINE # 1481
                    4856     ;               Block_Read(In_Packet, sizeof(In_Packet));
                    4857                             ; SOURCE LINE # 1482
0027 7B00           4858             MOV     R3,#00H
0029 7A00     F     4859             MOV     R2,#HIGH (In_Packet)
002B 7900     F     4860             MOV     R1,#LOW (In_Packet)
002D 7D0A           4861             MOV     R5,#0AH
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    75

002F 120000   F     4862             LCALL   _Block_Read
                    4863     ; 
                    4864     ;               switch (In_Packet[0])
                    4865                             ; SOURCE LINE # 1484
                    4866     ;               {
                    4867                             ; SOURCE LINE # 1485
                    4868     ;               default:;
                    4869                             ; SOURCE LINE # 1486
                    4870     ;               }
                    4871                             ; SOURCE LINE # 1487
                    4872     ;       }
                    4873                             ; SOURCE LINE # 1488
0032                4874     ?C0216:
                    4875     ; 
                    4876     ;    if (INTVAL & DEV_SUSPEND)
                    4877                             ; SOURCE LINE # 1490
0032 E500     F     4878             MOV     A,INTVAL?3060
0034 30E703         4879             JNB     ACC.7,?C0219
                    4880     ;    {
                    4881                             ; SOURCE LINE # 1491
                    4882     ;         Suspend_Device();
                    4883                             ; SOURCE LINE # 1492
0037 120000   F     4884             LCALL   Suspend_Device
                    4885     ;    }
                    4886                             ; SOURCE LINE # 1493
003A                4887     ?C0219:
                    4888     ; 
                    4889     ;    if (INTVAL & DEV_CONFIGURED)
                    4890                             ; SOURCE LINE # 1495
                    4891     ;    {
                    4892                             ; SOURCE LINE # 1496
                    4893     ; //      Initialize();
                    4894     ;    }
                    4895                             ; SOURCE LINE # 1498
                    4896     ; }
                    4897                             ; SOURCE LINE # 1499
003A                4898     ?C0221:
003A D007           4899             POP     AR7
003C D006           4900             POP     AR6
003E D005           4901             POP     AR5
0040 D004           4902             POP     AR4
0042 D003           4903             POP     AR3
0044 D002           4904             POP     AR2
0046 D001           4905             POP     AR1
0048 D000           4906             POP     AR0
004A D0D0           4907             POP     PSW
004C D082           4908             POP     DPL
004E D083           4909             POP     DPH
0050 D0F0           4910             POP     B
0052 D0E0           4911             POP     ACC
0054 32             4912             RETI    
                    4913     ; END OF USB_API_TEST_ISR
                    4914     
                    4915     ; 
                    4916     ; //
                    4917     ; //
                    4918     ; //
                    4919     ; //
                    4920     ; 
                    4921     ; //;======================================================================================
                             =======
                    4922     ; //; ВРЕМЕННЫЕ ЗАДЕРЖКИ
                    4923     ; //;
                    4924     ; // 1 мкс = 24 такта
                    4925     ; //; Формула: 8+(2+((R0-1)*3)+2)+(2+(((R2-1)*3)+2))+9
                    4926     ; //; Данные:  R0 = 140, R0=79
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    76

                    4927     ; //;          R1 = 253
                    4928     ; //; Итого:   8+(2+((140-1)*3)+2)+(2+(((253-1)*3)+2)+(2+(((79-1)*3)+2))+2+9 = 1440
                    4929     ; //;--------------------------------------------------------------------------------------
                             -------
                    4930     ; /*
                    4931     ; void Del_10mks(void)
                    4932     ; {
                    4933     ;       #pragma asm
                    4934     ;       push    00h                                                     ; 2 такта          
                                | 6 тактов
                    4935     ;       mov   R0,#75                                            ; 2 такта             |
                    4936     ;       djnz  R0,$                                                      ; (74*3)+2=224 такт
                             а  | 227 тактов
                    4937     ;       nop                                                                     ; 1 такт   
                                        |
                    4938     ;       
                    4939     ;       pop     00h                                                     ; 2 такта          
                                | 7 тактов
                    4940     ;       ret                                                                     ; Возврат 5
                              тактов    |
                    4941     ;       #pragma endasm
                    4942     ; }
                    4943     ; 
                    4944     ; void Del_500mks(void)
                    4945     ; {
                    4946     ;       #pragma asm
                    4947     ;       push    00h                                                     ; 2 такта          
                                |
                    4948     ;       push    01h                                                     ; 2 такта          
                                |
                    4949     ;       push    02h                                                     ; 2 такта          
                                | 12 тактов
                    4950     ;                                                                                       ;  
                                                |
                    4951     ;       mov   R1,#20                                            ; 2 такта             |
                    4952     ;               
                    4953     ;       mov   R0,#195                                           ; 2 такта             | (58
                             9*20)-1=
                    4954     ;       djnz  R0,$                                                      ; (194*3)+2=584 так
                             та | 11779 тактов
                    4955     ;       djnz    R1,$-4                                          ; 3 такта             |
                    4956     ; 
                    4957     ;       mov   R2,#65                                            ; 2 такта             |
                    4958     ;       djnz  R2,$                                                      ; (64*3)+2=194 такт
                             ов | 198 тактов
                    4959     ;       nop                                                                     ; 1 такт   
                                        |
                    4960     ;       nop                                                                     ; 1 такт   
                                        |
                    4961     ;                                               
                    4962     ;       pop     02h                                                     ; 2 такта          
                                |
                    4963     ;       pop     01h                                                     ; 2 такта          
                                | 11 тактов
                    4964     ;       pop     00h                                                     ; 2 такта          
                                |
                    4965     ;       ret                                                                     ; Возврат 5
                              тактов    |
                    4966     ;       #pragma endasm
                    4967     ; }
                    4968     ; 
                    4969     ; void Del_10ms(void)
                    4970     ; {
                    4971     ;       #pragma asm
                    4972     ;       push    00h                                                     ; 2 такта          
                                |
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    77

                    4973     ;       push    01h                                                     ; 2 такта          
                                |
                    4974     ;       push    02h                                                     ; 2 такта          
                                | 14 тактов
                    4975     ;       push    03h                                                     ; 2 такта          
                                |
                    4976     ;                                                                                          
                                                                  ;                     |
                    4977     ;       mov   R2,#6                                                     ; 2 такта          
                                |                                 
                    4978     ;                                                                       
                    4979     ;       mov   R1,#168   ;              | 2 такта +           |
                    4980     ;       mov   R0,#78    ; 2 такта +    |                     | (39988*6)-1=
                    4981     ;       djnz    R0,$            ; (77*3)+2=233 | (((235+3)*168)-1)=  | 239927 тактов
                    4982     ;       djnz  R1,$-4    ;              |    55249 тактов     |   
                    4983     ;       djnz    R2,$-8  ;              | + 3 такта           |
                    4984     ; 
                    4985     ;       mov   R3,#15                                            ; 2 такта             |
                    4986     ;       djnz  R3,$                                                      ; (14*3)+2=44 такто
                             в  | 46 тактов
                    4987     ;                                               
                    4988     ;       pop     03h                                                     ; 2 такта          
                                |
                    4989     ;       pop     02h                                                     ; 2 такта          
                                |
                    4990     ;       pop     01h                                                     ; 2 такта          
                                | 13 тактов
                    4991     ;       pop     00h                                                     ; 2 такта          
                                |
                    4992     ;       ret                                                                     ; Возврат 5
                              тактов    |
                    4993     ;       #pragma endasm
                    4994     ; }
                    4995     ; 
                    4996     ; void Del_25ms(void)
                    4997     ; {
                    4998     ;       #pragma asm
                    4999     ;       push    00h                                                     ; 2 такта          
                                |
                    5000     ;       push    01h                                                     ; 2 такта          
                                |
                    5001     ;       push    02h                                                     ; 2 такта          
                                | 14 тактов
                    5002     ;       push    03h                                                     ; 2 такта          
                                |
                    5003     ;                                                                                          
                                                                  ;                     |
                    5004     ;       mov   R2,#15                                            ; 2 такта             |    
                                                          
                    5005     ;                                       
                    5006     ;       mov   R1,#168   ;              | 2 такта +           |
                    5007     ;       mov   R0,#78    ; 2 такта +    |                     | (39988*15)-1=
                    5008     ;       djnz    R0,$            ; (77*3)+2=233 | (((235+3)*168)-1)=  | 599819 тактов
                    5009     ;       djnz  R1,$-4    ;              |    55249 тактов     |   
                    5010     ;       djnz    R2,$-8  ;              | + 3 такта           |
                    5011     ; 
                    5012     ;       mov   R3,#51                                            ; 2 такта             |
                    5013     ;       djnz  R3,$                                                      ; (50*3)+2=152 такт
                             ов | 154 тактов
                    5014     ;                                               
                    5015     ;       pop     03h                                                     ; 2 такта          
                                |
                    5016     ;       pop     02h                                                     ; 2 такта          
                                |
                    5017     ;       pop     01h                                                     ; 2 такта          
                                | 13 тактов
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    78

                    5018     ;       pop     00h                                                     ; 2 такта          
                                |
                    5019     ;       ret                                                                     ; Возврат 5
                              тактов    |
                    5020     ;       #pragma endasm
                    5021     ; }
                    5022     ; 
                    5023     ; void Del_100ms(void)
                    5024     ; {
                    5025     ;       #pragma asm
                    5026     ;       push    00h                                                     ; 2 такта          
                                |
                    5027     ;       push    01h                                                     ; 2 такта          
                                |
                    5028     ;       push    02h                                                     ; 2 такта          
                                | 14 тактов
                    5029     ;       push    03h                                                     ; 2 такта          
                                |
                    5030     ;                                                                                       ;  
                                                |
                    5031     ;       mov   R2,#60                                            ; 2 такта             |    
                                                          
                    5032     ;                                                               
                    5033     ;       mov   R1,#168   ;              | 2 такта +           |
                    5034     ;       mov   R0,#78    ; 2 такта +    |                     | (39988*60)-1=
                    5035     ;       djnz    R0,$            ; (77*3)+2=233 | (((235+3)*168)-1)=  | 2399279 тактов
                    5036     ;       djnz  R1,$-4    ;              |    55249 тактов     |   
                    5037     ;       djnz    R2,$-8  ;              | + 3 такта           |
                    5038     ; 
                    5039     ;       mov   R3,#231                                           ; 2 такта             |
                    5040     ;       djnz  R3,$                                                      ; (230*3)+2=692 так
                             тов| 694 тактов
                    5041     ;       
                    5042     ;       pop     03h                                                     ; 2 такта          
                                |
                    5043     ;       pop     02h                                                     ; 2 такта          
                                |
                    5044     ;       pop     01h                                                     ; 2 такта          
                                | 13 тактов
                    5045     ;       pop     00h                                                     ; 2 такта          
                                |
                    5046     ;       ret                                                                     ; Возврат 5
                              тактов    |
                    5047     ;       #pragma endasm
                    5048     ; }
                    5049     ; */
                    5050     ; 
                    5051     ; void Del(int a)
                    5052     
----                5053             RSEG  ?PR?_Del?MAIN
0000                5054     _Del:
                    5055             USING   0
                    5056                             ; SOURCE LINE # 1636
                    5057     ;---- Variable 'a?3161' assigned to Register 'R6/R7' ----
                    5058     ; {
                    5059                             ; SOURCE LINE # 1637
                    5060     ;       int i;
                    5061     ;       for (i=0;i<a;i++)
                    5062                             ; SOURCE LINE # 1639
                    5063     ;---- Variable 'i?3162' assigned to Register 'R4/R5' ----
0000 E4             5064             CLR     A
0001 FD             5065             MOV     R5,A
0002 FC             5066             MOV     R4,A
0003                5067     ?C0222:
0003 C3             5068             CLR     C
0004 ED             5069             MOV     A,R5
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    79

0005 9F             5070             SUBB    A,R7
0006 EE             5071             MOV     A,R6
0007 6480           5072             XRL     A,#080H
0009 F8             5073             MOV     R0,A
000A EC             5074             MOV     A,R4
000B 6480           5075             XRL     A,#080H
000D 98             5076             SUBB    A,R0
000E 5007           5077             JNC     ?C0225
                    5078     ;       {
                    5079                             ; SOURCE LINE # 1640
                    5080     ;       }
                    5081                             ; SOURCE LINE # 1641
0010 0D             5082             INC     R5
0011 BD0001         5083             CJNE    R5,#00H,?C0236
0014 0C             5084             INC     R4
0015                5085     ?C0236:
0015 80EC           5086             SJMP    ?C0222
                    5087     ; }
                    5088                             ; SOURCE LINE # 1642
0017                5089     ?C0225:
0017 22             5090             RET     
                    5091     ; END OF _Del
                    5092     
                    5093             END
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    80

XREF SYMBOL TABLE LISTING
---- ------ ----- -------


N A M E                              T Y P E  V A L U E   ATTRIBUTES / REFERENCES

?BI?MAIN. . . . . . . . . . . . . .  B SEG    0013H       REL=UNIT   279# 452
?BI?MAIN?MAIN . . . . . . . . . . .  B SEG    0001H       REL=UNIT   248# 402
?BI?SMBUS_ISR?MAIN. . . . . . . . .  B SEG    0001H       REL=UNIT   280# 394
?C0001. . . . . . . . . . . . . . .  C ADDR   000FH   R   SEG=?PR?MAIN?MAIN   1005# 1054
?C0002. . . . . . . . . . . . . . .  C ADDR   002DH   R   SEG=?PR?MAIN?MAIN   1009 1055#
?C0003. . . . . . . . . . . . . . .  C ADDR   0019H   R   SEG=?PR?MAIN?MAIN   1026# 1028
?C0004. . . . . . . . . . . . . . .  C ADDR   001DH   R   SEG=?PR?MAIN?MAIN   1029#
?C0006. . . . . . . . . . . . . . .  C ADDR   001FH   R   SEG=?PR?MAIN?MAIN   1033# 1036
?C0007. . . . . . . . . . . . . . .  C ADDR   0022H   R   SEG=?PR?MAIN?MAIN   1037#
?C0008. . . . . . . . . . . . . . .  C ADDR   0024H   R   SEG=?PR?MAIN?MAIN   1043# 1045
?C0009. . . . . . . . . . . . . . .  C ADDR   0028H   R   SEG=?PR?MAIN?MAIN   1046#
?C0011. . . . . . . . . . . . . . .  C ADDR   004BH   R   SEG=?PR?MAIN?MAIN   1087 1090#
?C0012. . . . . . . . . . . . . . .  C ADDR   0073H   R   SEG=?PR?MAIN?MAIN   1089 1105 1121 1135 1143#
?C0013. . . . . . . . . . . . . . .  C ADDR   0059H   R   SEG=?PR?MAIN?MAIN   1103 1106#
?C0015. . . . . . . . . . . . . . .  C ADDR   0067H   R   SEG=?PR?MAIN?MAIN   1119 1122#
?C0019. . . . . . . . . . . . . . .  C ADDR   0117H   R   SEG=?PR?MAIN?MAIN   1248 1253# 2046 2075 2083
?C0021. . . . . . . . . . . . . . .  C ADDR   0466H   R   SEG=?PR?MAIN?MAIN   1272 1574 1891#
?C0022. . . . . . . . . . . . . . .  C ADDR   0127H   R   SEG=?PR?MAIN?MAIN   1277#
?C0023. . . . . . . . . . . . . . .  C ADDR   0193H   R   SEG=?PR?MAIN?MAIN   1302 1354#
?C0024. . . . . . . . . . . . . . .  C ADDR   0195H   R   SEG=?PR?MAIN?MAIN   1353 1358#
?C0025. . . . . . . . . . . . . . .  C ADDR   01F5H   R   SEG=?PR?MAIN?MAIN   1374 1426#
?C0026. . . . . . . . . . . . . . .  C ADDR   01F7H   R   SEG=?PR?MAIN?MAIN   1425 1428#
?C0027. . . . . . . . . . . . . . .  C ADDR   0254H   R   SEG=?PR?MAIN?MAIN   1444 1496#
?C0028. . . . . . . . . . . . . . .  C ADDR   0256H   R   SEG=?PR?MAIN?MAIN   1495 1498#
?C0029. . . . . . . . . . . . . . .  C ADDR   02B3H   R   SEG=?PR?MAIN?MAIN   1514 1566#
?C0030. . . . . . . . . . . . . . .  C ADDR   02B5H   R   SEG=?PR?MAIN?MAIN   1565 1568#
?C0031. . . . . . . . . . . . . . .  C ADDR   02BBH   R   SEG=?PR?MAIN?MAIN   1269 1577#
?C0032. . . . . . . . . . . . . . .  C ADDR   0341H   R   SEG=?PR?MAIN?MAIN   1618 1670#
?C0033. . . . . . . . . . . . . . .  C ADDR   0343H   R   SEG=?PR?MAIN?MAIN   1669 1674#
?C0034. . . . . . . . . . . . . . .  C ADDR   03A3H   R   SEG=?PR?MAIN?MAIN   1690 1742#
?C0035. . . . . . . . . . . . . . .  C ADDR   03A5H   R   SEG=?PR?MAIN?MAIN   1741 1744#
?C0036. . . . . . . . . . . . . . .  C ADDR   0402H   R   SEG=?PR?MAIN?MAIN   1760 1812#
?C0037. . . . . . . . . . . . . . .  C ADDR   0404H   R   SEG=?PR?MAIN?MAIN   1811 1814#
?C0038. . . . . . . . . . . . . . .  C ADDR   0461H   R   SEG=?PR?MAIN?MAIN   1829 1881#
?C0039. . . . . . . . . . . . . . .  C ADDR   0463H   R   SEG=?PR?MAIN?MAIN   1880 1883#
?C0040. . . . . . . . . . . . . . .  C ADDR   0494H   R   SEG=?PR?MAIN?MAIN   1910 1926 1941#
?C0041. . . . . . . . . . . . . . .  C ADDR   046DH   R   SEG=?PR?MAIN?MAIN   1896 1899#
?C0042. . . . . . . . . . . . . . .  C ADDR   046FH   R   SEG=?PR?MAIN?MAIN   1898 1901#
?C0043. . . . . . . . . . . . . . .  C ADDR   0476H   R   SEG=?PR?MAIN?MAIN   1902 1905#
?C0044. . . . . . . . . . . . . . .  C ADDR   0478H   R   SEG=?PR?MAIN?MAIN   1904 1907#
?C0046. . . . . . . . . . . . . . .  C ADDR   04C6H   R   SEG=?PR?MAIN?MAIN   1945 1989#
?C0048. . . . . . . . . . . . . . .  C ADDR   049EH   R   SEG=?PR?MAIN?MAIN   1950 1953#
?C0049. . . . . . . . . . . . . . .  C ADDR   04A0H   R   SEG=?PR?MAIN?MAIN   1952 1955#
?C0050. . . . . . . . . . . . . . .  C ADDR   04A7H   R   SEG=?PR?MAIN?MAIN   1956 1959#
?C0051. . . . . . . . . . . . . . .  C ADDR   04A9H   R   SEG=?PR?MAIN?MAIN   1958 1961#
?C0052. . . . . . . . . . . . . . .  C ADDR   04CAH   R   SEG=?PR?MAIN?MAIN   1964 1988 1992#
?C0053. . . . . . . . . . . . . . .  C ADDR   04D6H   R   SEG=?PR?MAIN?MAIN   1996 2002#
?C0054. . . . . . . . . . . . . . .  C ADDR   04F4H   R   SEG=?PR?MAIN?MAIN   2006 2039#
?C0056. . . . . . . . . . . . . . .  C ADDR   04E5H   R   SEG=?PR?MAIN?MAIN   2017 2020#
?C0057. . . . . . . . . . . . . . .  C ADDR   04E8H   R   SEG=?PR?MAIN?MAIN   2019 2023#
?C0058. . . . . . . . . . . . . . .  C ADDR   04F6H   R   SEG=?PR?MAIN?MAIN   2011 2038 2041#
?C0060. . . . . . . . . . . . . . .  C ADDR   051BH   R   SEG=?PR?MAIN?MAIN   2051 2076#
?C0063. . . . . . . . . . . . . . .  C ADDR   0069H   R   SEG=?PR?ENCODERSCAN2?MAIN   2128 2169 2188#
?C0064. . . . . . . . . . . . . . .  C ADDR   0032H   R   SEG=?PR?ENCODERSCAN2?MAIN   2133#
?C0065. . . . . . . . . . . . . . .  C ADDR   0034H   R   SEG=?PR?ENCODERSCAN2?MAIN   2114 2137#
?C0067. . . . . . . . . . . . . . .  C ADDR   0036H   R   SEG=?PR?ENCODERSCAN2?MAIN   2116 2143#
?C0068. . . . . . . . . . . . . . .  C ADDR   0038H   R   SEG=?PR?ENCODERSCAN2?MAIN   2124 2148#
?C0070. . . . . . . . . . . . . . .  C ADDR   003AH   R   SEG=?PR?ENCODERSCAN2?MAIN   2122 2155#
?C0071. . . . . . . . . . . . . . .  C ADDR   0051H   R   SEG=?PR?ENCODERSCAN2?MAIN   2118 2120 2126 2172#
?C0073. . . . . . . . . . . . . . .  C ADDR   00A8H   R   SEG=?PR?ENCODERSCAN1?MAIN   2232 2259 2291 2324 2354 2374#
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    81

?C0074. . . . . . . . . . . . . . .  C ADDR   001AH   R   SEG=?PR?ENCODERSCAN1?MAIN   2237#
?C0075. . . . . . . . . . . . . . .  C ADDR   0032H   R   SEG=?PR?ENCODERSCAN1?MAIN   2242 2255#
?C0077. . . . . . . . . . . . . . .  C ADDR   0037H   R   SEG=?PR?ENCODERSCAN1?MAIN   2225 2268#
?C0078. . . . . . . . . . . . . . .  C ADDR   004FH   R   SEG=?PR?ENCODERSCAN1?MAIN   2273 2286#
?C0080. . . . . . . . . . . . . . .  C ADDR   0056H   R   SEG=?PR?ENCODERSCAN1?MAIN   2227 2300#
?C0081. . . . . . . . . . . . . . .  C ADDR   006EH   R   SEG=?PR?ENCODERSCAN1?MAIN   2306 2319#
?C0083. . . . . . . . . . . . . . .  C ADDR   0075H   R   SEG=?PR?ENCODERSCAN1?MAIN   2229 2333#
?C0084. . . . . . . . . . . . . . .  C ADDR   008DH   R   SEG=?PR?ENCODERSCAN1?MAIN   2338 2351#
?C0087. . . . . . . . . . . . . . .  C ADDR   0042H   R   SEG=?PR?ENCODERSCAN3?MAIN   2425 2461#
?C0089. . . . . . . . . . . . . . .  C ADDR   0038H   R   SEG=?PR?ENCODERSCAN3?MAIN   2436 2443#
?C0090. . . . . . . . . . . . . . .  C ADDR   002EH   R   SEG=?PR?ENCODERSCAN3?MAIN   2431 2437#
?C0092. . . . . . . . . . . . . . .  C ADDR   0067H   R   SEG=?PR?ENCODERSCAN3?MAIN   2468 2470 2472 2494#
?C0093. . . . . . . . . . . . . . .  C ADDR   008DH   R   SEG=?PR?ENCODERSCAN3?MAIN   2493 2499 2501 2503 2524#
?C0095. . . . . . . . . . . . . . .  C ADDR   0099H   R   SEG=?PR?ENCODERSCAN3?MAIN   2439 2442 2545#
?C0096. . . . . . . . . . . . . . .  C ADDR   0071H   R   SEG=?PR?ENCODERSCAN4?MAIN   2578 2638 2643 2652 2661 2688#
?C0097. . . . . . . . . . . . . . .  C ADDR   0018H   R   SEG=?PR?ENCODERSCAN4?MAIN   2573 2579#
?C0098. . . . . . . . . . . . . . .  C ADDR   0046H   R   SEG=?PR?ENCODERSCAN4?MAIN   2585 2590 2599 2608 2633#
?C0108. . . . . . . . . . . . . . .  C ADDR   005CH   R   SEG=?PR?ENCODERSCAN5?MAIN   2737 2750 2754 2766 2770 2781
                                                            2785 2796 2804#
?C0109. . . . . . . . . . . . . . .  C ADDR   001FH   R   SEG=?PR?ENCODERSCAN5?MAIN   2742#
?C0110. . . . . . . . . . . . . . .  C ADDR   0026H   R   SEG=?PR?ENCODERSCAN5?MAIN   2744 2746#
?C0112. . . . . . . . . . . . . . .  C ADDR   002EH   R   SEG=?PR?ENCODERSCAN5?MAIN   2731 2757#
?C0113. . . . . . . . . . . . . . .  C ADDR   0035H   R   SEG=?PR?ENCODERSCAN5?MAIN   2759 2761#
?C0115. . . . . . . . . . . . . . .  C ADDR   003FH   R   SEG=?PR?ENCODERSCAN5?MAIN   2733 2773#
?C0116. . . . . . . . . . . . . . .  C ADDR   0045H   R   SEG=?PR?ENCODERSCAN5?MAIN   2775 2777#
?C0118. . . . . . . . . . . . . . .  C ADDR   004EH   R   SEG=?PR?ENCODERSCAN5?MAIN   2735 2788#
?C0119. . . . . . . . . . . . . . .  C ADDR   0055H   R   SEG=?PR?ENCODERSCAN5?MAIN   2790 2792#
?C0122. . . . . . . . . . . . . . .  C ADDR   0079H   R   SEG=?PR?ENCODERSCAN5?MAIN   2809 2832#
?C0123. . . . . . . . . . . . . . .  C ADDR   0099H   R   SEG=?PR?ENCODERSCAN5?MAIN   2837 2860#
?C0124. . . . . . . . . . . . . . .  C ADDR   009CH   R   SEG=?PR?ENCODERSCAN5?MAIN   2725 2868#
?C0125. . . . . . . . . . . . . . .  C ADDR   000EH   R   SEG=?PR?_LCDOUTPUTLINE?MAIN   2902# 2970
?C0126. . . . . . . . . . . . . . .  C ADDR   0047H   R   SEG=?PR?_LCDOUTPUTLINE?MAIN   2971#
?C0127. . . . . . . . . . . . . . .  C ADDR   0043H   R   SEG=?PR?_LCDOUTPUTLINE?MAIN   2914 2968#
?C0128. . . . . . . . . . . . . . .  C ADDR   0010H   R   SEG=?PR?_LCDOUTPUTLINE?MAIN   2910# 2965
?C0130. . . . . . . . . . . . . . .  C ADDR   0040H   R   SEG=?PR?_LCDOUTPUTLINE?MAIN   2929 2936 2941 2946 2951 2956
                                                            2963#
?C0132. . . . . . . . . . . . . . .  C ADDR   002AH   R   SEG=?PR?_LCDOUTPUTLINE?MAIN   2934#
?C0133. . . . . . . . . . . . . . .  C ADDR   002EH   R   SEG=?PR?_LCDOUTPUTLINE?MAIN   2919 2939#
?C0134. . . . . . . . . . . . . . .  C ADDR   0032H   R   SEG=?PR?_LCDOUTPUTLINE?MAIN   2921 2944#
?C0135. . . . . . . . . . . . . . .  C ADDR   0036H   R   SEG=?PR?_LCDOUTPUTLINE?MAIN   2923 2949#
?C0136. . . . . . . . . . . . . . .  C ADDR   003AH   R   SEG=?PR?_LCDOUTPUTLINE?MAIN   2925 2954#
?C0137. . . . . . . . . . . . . . .  C ADDR   003EH   R   SEG=?PR?_LCDOUTPUTLINE?MAIN   2927 2959#
?C0140. . . . . . . . . . . . . . .  C ADDR   001CH   R   SEG=?PR?WRITEDISCRETTOEEPROM?MAIN   3051 3056#
?C0144. . . . . . . . . . . . . . .  C ADDR   00B4H   R   SEG=?PR?_OUTSYMBOL?MAIN   3187 3197 3198 3221 3247 3282
                                                            3305 3346 3372 3390 3447#
?C0145. . . . . . . . . . . . . . .  C ADDR   0048H   R   SEG=?PR?_OUTSYMBOL?MAIN   3196 3213#
?C0146. . . . . . . . . . . . . . .  C ADDR   004CH   R   SEG=?PR?_OUTSYMBOL?MAIN   3199 3224#
?C0147. . . . . . . . . . . . . . .  C ADDR   005AH   R   SEG=?PR?_OUTSYMBOL?MAIN   3200 3250#
?C0148. . . . . . . . . . . . . . .  C ADDR   005CH   R   SEG=?PR?_OUTSYMBOL?MAIN   3201 3262#
?C0149. . . . . . . . . . . . . . .  C ADDR   0068H   R   SEG=?PR?_OUTSYMBOL?MAIN   3202 3285#
?C0150. . . . . . . . . . . . . . .  C ADDR   0074H   R   SEG=?PR?_OUTSYMBOL?MAIN   3203 3308#
?C0151. . . . . . . . . . . . . . .  C ADDR   007AH   R   SEG=?PR?_OUTSYMBOL?MAIN   3204 3326#
?C0152. . . . . . . . . . . . . . .  C ADDR   0086H   R   SEG=?PR?_OUTSYMBOL?MAIN   3205 3349#
?C0153. . . . . . . . . . . . . . .  C ADDR   0094H   R   SEG=?PR?_OUTSYMBOL?MAIN   3206 3375#
?C0154. . . . . . . . . . . . . . .  C ADDR   009CH   R   SEG=?PR?_OUTSYMBOL?MAIN   3207 3393#
?C0155. . . . . . . . . . . . . . .  C ADDR   00A8H   R   SEG=?PR?_OUTSYMBOL?MAIN   3208 3421#
?C0156. . . . . . . . . . . . . . .  C ADDR   00B9H   R   SEG=?PR?_OUTSYMBOL?MAIN   3451 3453#
?C0158. . . . . . . . . . . . . . .  C ADDR   00CFH   R   SEG=?PR?_OUTSYMBOL?MAIN   3473#
?C0159. . . . . . . . . . . . . . .  C ADDR   00D2H   R   SEG=?PR?_OUTSYMBOL?MAIN   3458 3478#
?C0160. . . . . . . . . . . . . . .  C ADDR   00D5H   R   SEG=?PR?_OUTSYMBOL?MAIN   3460 3483#
?C0161. . . . . . . . . . . . . . .  C ADDR   00D8H   R   SEG=?PR?_OUTSYMBOL?MAIN   3462 3488#
?C0162. . . . . . . . . . . . . . .  C ADDR   00DBH   R   SEG=?PR?_OUTSYMBOL?MAIN   3464 3493#
?C0163. . . . . . . . . . . . . . .  C ADDR   00DEH   R   SEG=?PR?_OUTSYMBOL?MAIN   3466 3498#
?C0164. . . . . . . . . . . . . . .  C ADDR   00E0H   R   SEG=?PR?_OUTSYMBOL?MAIN   3468 3504#
?C0174. . . . . . . . . . . . . . .  C ADDR   000AH   R   SEG=?PR?_EEPROM_BYTEWRITE?MAIN   3943# 3946
?C0175. . . . . . . . . . . . . . .  C ADDR   000DH   R   SEG=?PR?_EEPROM_BYTEWRITE?MAIN   3947#
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    82

?C0177. . . . . . . . . . . . . . .  C ADDR   0004H   R   SEG=?PR?_EEPROM_BYTEREAD?MAIN   4041# 4047
?C0178. . . . . . . . . . . . . . .  C ADDR   0007H   R   SEG=?PR?_EEPROM_BYTEREAD?MAIN   4048#
?C0179. . . . . . . . . . . . . . .  C ADDR   0023H   R   SEG=?PR?_EEPROM_BYTEREAD?MAIN   4105# 4108
?C0180. . . . . . . . . . . . . . .  C ADDR   0026H   R   SEG=?PR?_EEPROM_BYTEREAD?MAIN   4109#
?C0181. . . . . . . . . . . . . . .  C ADDR   0028H   R   SEG=?PR?_EEPROM_BYTEREAD?MAIN   4117#
?C0185. . . . . . . . . . . . . . .  C ADDR   00CEH   R   SEG=?PR?SMBUS_ISR?MAIN   4317 4341 4359 4378 4392 4399 4437
                                                            4452 4475 4489 4534 4552 4565#
?C0186. . . . . . . . . . . . . . .  C ADDR   0029H   R   SEG=?PR?SMBUS_ISR?MAIN   4290#
?C0187. . . . . . . . . . . . . . .  C ADDR   003DH   R   SEG=?PR?SMBUS_ISR?MAIN   4281 4322#
?C0188. . . . . . . . . . . . . . .  C ADDR   0091H   R   SEG=?PR?SMBUS_ISR?MAIN   4325 4461#
?C0189. . . . . . . . . . . . . . .  C ADDR   004AH   R   SEG=?PR?SMBUS_ISR?MAIN   4330 4344#
?C0190. . . . . . . . . . . . . . .  C ADDR   0054H   R   SEG=?PR?SMBUS_ISR?MAIN   4348 4362#
?C0191. . . . . . . . . . . . . . .  C ADDR   0065H   R   SEG=?PR?SMBUS_ISR?MAIN   4366 4395#
?C0194. . . . . . . . . . . . . . .  C ADDR   008BH   R   SEG=?PR?SMBUS_ISR?MAIN   4409 4438#
?C0198. . . . . . . . . . . . . . .  C ADDR   0098H   R   SEG=?PR?SMBUS_ISR?MAIN   4467 4476#
?C0200. . . . . . . . . . . . . . .  C ADDR   009CH   R   SEG=?PR?SMBUS_ISR?MAIN   4279 4494#
?C0201. . . . . . . . . . . . . . .  C ADDR   00BFH   R   SEG=?PR?SMBUS_ISR?MAIN   4501 4529#
?C0203. . . . . . . . . . . . . . .  C ADDR   00CCH   R   SEG=?PR?SMBUS_ISR?MAIN   4284 4556#
?C0204. . . . . . . . . . . . . . .  C ADDR   00E1H   R   SEG=?PR?SMBUS_ISR?MAIN   4569 4597#
?C0207. . . . . . . . . . . . . . .  C ADDR   0032H   R   SEG=?PR?TIMER0_ISR?MAIN   4677# 4730
?C0208. . . . . . . . . . . . . . .  C ADDR   0073H   R   SEG=?PR?TIMER0_ISR?MAIN   4692 4731#
?C0210. . . . . . . . . . . . . . .  C ADDR   0050H   R   SEG=?PR?TIMER0_ISR?MAIN   4698 4701#
?C0211. . . . . . . . . . . . . . .  C ADDR   0052H   R   SEG=?PR?TIMER0_ISR?MAIN   4700 4703#
?C0212. . . . . . . . . . . . . . .  C ADDR   0058H   R   SEG=?PR?TIMER0_ISR?MAIN   4707 4709#
?C0213. . . . . . . . . . . . . . .  C ADDR   0079H   R   SEG=?PR?TIMER0_ISR?MAIN   4670 4740#
?C0216. . . . . . . . . . . . . . .  C ADDR   0032H   R   SEG=?PR?USB_API_TEST_ISR?MAIN   4853 4874#
?C0219. . . . . . . . . . . . . . .  C ADDR   003AH   R   SEG=?PR?USB_API_TEST_ISR?MAIN   4879 4887#
?C0221. . . . . . . . . . . . . . .  C ADDR   003AH   R   SEG=?PR?USB_API_TEST_ISR?MAIN   4898#
?C0222. . . . . . . . . . . . . . .  C ADDR   0003H   R   SEG=?PR?_DEL?MAIN   5067# 5086
?C0225. . . . . . . . . . . . . . .  C ADDR   0017H   R   SEG=?PR?_DEL?MAIN   5077 5089#
?C0226. . . . . . . . . . . . . . .  C ADDR   0484H   R   SEG=?PR?MAIN?MAIN   1917 1919#
?C0227. . . . . . . . . . . . . . .  C ADDR   000EH   R   SEG=?PR?ENCODERSCAN4?MAIN   2570 2572#
?C0228. . . . . . . . . . . . . . .  C ADDR   0016H   R   SEG=?PR?ENCODERSCAN4?MAIN   2575 2577#
?C0229. . . . . . . . . . . . . . .  C ADDR   0024H   R   SEG=?PR?ENCODERSCAN4?MAIN   2596 2598#
?C0230. . . . . . . . . . . . . . .  C ADDR   002CH   R   SEG=?PR?ENCODERSCAN4?MAIN   2605 2607#
?C0231. . . . . . . . . . . . . . .  C ADDR   0052H   R   SEG=?PR?ENCODERSCAN4?MAIN   2649 2651#
?C0232. . . . . . . . . . . . . . .  C ADDR   005AH   R   SEG=?PR?ENCODERSCAN4?MAIN   2658 2660#
?C0233. . . . . . . . . . . . . . .  C ADDR   000EH   R   SEG=?PR?_OUTSYMBOL?MAIN   3184 3185#
?C0234. . . . . . . . . . . . . . .  C ADDR   0021H   R   SEG=?PR?_OUTSYMBOL?MAIN   3188 3195#
?C0235. . . . . . . . . . . . . . .  C ADDR   002AH   R   SEG=?PR?TIMER0_ISR?MAIN   4664 4666#
?C0236. . . . . . . . . . . . . . .  C ADDR   0015H   R   SEG=?PR?_DEL?MAIN   5083 5085#
?C0238. . . . . . . . . . . . . . .  C ADDR   0036H   R   SEG=?PR?ENCODERSCAN2?MAIN   2144#
?C0240. . . . . . . . . . . . . . .  C ADDR   0038H   R   SEG=?PR?ENCODERSCAN2?MAIN   2149#
?C0241. . . . . . . . . . . . . . .  C ADDR   003AH   R   SEG=?PR?ENCODERSCAN2?MAIN   2138 2145 2150 2156#
?C0242. . . . . . . . . . . . . . .  C ADDR   0051H   R   SEG=?PR?ENCODERSCAN2?MAIN   2134 2173#
?C0243. . . . . . . . . . . . . . .  C ADDR   0054H   R   SEG=?PR?ENCODERSCAN1?MAIN   2292#
?C0244. . . . . . . . . . . . . . .  C ADDR   0073H   R   SEG=?PR?ENCODERSCAN1?MAIN   2325#
?C0245. . . . . . . . . . . . . . .  C ADDR   0090H   R   SEG=?PR?ENCODERSCAN1?MAIN   2262 2295 2328 2355#
?C0246. . . . . . . . . . . . . . .  C ADDR   0096H   R   SEG=?PR?_OUTSYMBOL?MAIN   3259 3383#
?C0247. . . . . . . . . . . . . . .  C ADDR   00A6H   R   SEG=?PR?_OUTSYMBOL?MAIN   3413#
?C0248. . . . . . . . . . . . . . .  C ADDR   00B0H   R   SEG=?PR?_OUTSYMBOL?MAIN   3323 3418 3438#
?C?CLDPTR . . . . . . . . . . . . .  C ADDR   -----       EXT   299# 4418
?C?CSTPTR . . . . . . . . . . . . .  C ADDR   -----       EXT   300# 4510
?C?LMUL . . . . . . . . . . . . . .  C ADDR   -----       EXT   297# 1334 1406 1476 1546 1591 1650 1722 1792 1861
?C?LSHL . . . . . . . . . . . . . .  C ADDR   -----       EXT   294# 1173 1216
?C?ULCMP. . . . . . . . . . . . . .  C ADDR   -----       EXT   295# 1300 1372 1442 1512 1616 1688 1758 1827 3050
?C?ULDIV. . . . . . . . . . . . . .  C ADDR   -----       EXT   296# 1315 1387 1457 1527 1596 1631 1703 1773 1842
?C?ULSHR. . . . . . . . . . . . . .  C ADDR   -----       EXT   298# 3009 3073
?CO?MAIN. . . . . . . . . . . . . .  C SEG    004CH       REL=UNIT   289# 473
?C_INITSEG. . . . . . . . . . . . .  C SEG    002FH       REL=UNIT   288# 570
?C_STARTUP. . . . . . . . . . . . .  C ADDR   -----       EXT   293#
?DT?MAIN. . . . . . . . . . . . . .  D SEG    003CH       REL=UNIT   278# 420 423
?DT?MAIN?MAIN . . . . . . . . . . .  D SEG    0004H       REL=UNIT   247# 398
?DT?TIMER0_ISR?MAIN . . . . . . . .  D SEG    0001H       REL=UNIT   282# 386
?DT?USB_API_TEST_ISR?MAIN . . . . .  D SEG    0001H       REL=UNIT   286# 390
?DT?_EEPROM_BYTEREAD?MAIN . . . . .  D SEG    0001H       REL=UNIT   273# 416
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    83

?DT?_LCDOUTPUTLINE?MAIN . . . . . .  D SEG    0001H       REL=UNIT   255# 412
?DT?_OUTSYMBOL?MAIN . . . . . . . .  D SEG    0002H       REL=UNIT   261# 406
?MAIN?BIT . . . . . . . . . . . . .  B ADDR   0000H.0 R   SEG=?BI?MAIN?MAIN   403#
?MAIN?BYTE. . . . . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?MAIN?MAIN   399#
?PR?ENCODERSCAN1?MAIN . . . . . . .  C SEG    00ABH       REL=UNIT   250# 2200
?PR?ENCODERSCAN2?MAIN . . . . . . .  C SEG    006DH       REL=UNIT   249# 2090
?PR?ENCODERSCAN3?MAIN . . . . . . .  C SEG    009AH       REL=UNIT   251# 2388
?PR?ENCODERSCAN4?MAIN . . . . . . .  C SEG    007AH       REL=UNIT   252# 2552
?PR?ENCODERSCAN5?MAIN . . . . . . .  C SEG    009DH       REL=UNIT   253# 2705
?PR?EXT_INTERRUPT_INIT?MAIN . . . .  C SEG    001AH       REL=UNIT   270# 3856
?PR?INITIALIZE?MAIN . . . . . . . .  C SEG    0015H       REL=UNIT   263# 3573
?PR?INT0_ISR?MAIN . . . . . . . . .  C SEG    001EH       REL=UNIT   275# 4177
?PR?INT1_ISR?MAIN . . . . . . . . .  C SEG    0021H       REL=UNIT   276# 4210
?PR?LEDSSWITCHOFF?MAIN. . . . . . .  C SEG    001DH       REL=UNIT   262# 3511
?PR?MAIN?MAIN . . . . . . . . . . .  C SEG    0520H       REL=UNIT   246# 968
?PR?OSCILLATOR_INIT?MAIN. . . . . .  C SEG    0007H       REL=UNIT   264# 3607
?PR?OUTPUTBUFFERTORESETCOUNTER?MAIN  C SEG    0024H       REL=UNIT   259# 3132
?PR?PORT_INIT?MAIN. . . . . . . . .  C SEG    0022H       REL=UNIT   268# 3766
?PR?RESETCOUNTERTOOUTPUTBUFFER?MAIN  C SEG    0025H       REL=UNIT   258# 3094
?PR?SMBUS_INIT?MAIN . . . . . . . .  C SEG    0007H       REL=UNIT   269# 3831
?PR?SMBUS_ISR?MAIN. . . . . . . . .  C SEG    00F2H       REL=UNIT   277# 4248
?PR?SUSPEND_DEVICE?MAIN . . . . . .  C SEG    0003H       REL=UNIT   274# 4124
?PR?TIMER0_INIT?MAIN. . . . . . . .  C SEG    000FH       REL=UNIT   265# 3652
?PR?TIMER0_ISR?MAIN . . . . . . . .  C SEG    0094H       REL=UNIT   281# 4627
?PR?TIMER1_INIT?MAIN. . . . . . . .  C SEG    000FH       REL=UNIT   266# 3688
?PR?TIMER2_ISR?MAIN . . . . . . . .  C SEG    0005H       REL=UNIT   283# 4768
?PR?TIMER3_INIT?MAIN. . . . . . . .  C SEG    0019H       REL=UNIT   267# 3729
?PR?TIMER3_ISR?MAIN . . . . . . . .  C SEG    000CH       REL=UNIT   284# 4797
?PR?USB_API_TEST_ISR?MAIN . . . . .  C SEG    0055H       REL=UNIT   285# 4825
?PR?WRITECOUNTERTOEEPROM?MAIN . . .  C SEG    0027H       REL=UNIT   256# 2986
?PR?WRITEDISCRETTOEEPROM?MAIN . . .  C SEG    0043H       REL=UNIT   257# 3030
?PR?_DEL?MAIN . . . . . . . . . . .  C SEG    0018H       REL=UNIT   287# 5053
?PR?_EEPROM_BYTEREAD?MAIN . . . . .  C SEG    0029H       REL=UNIT   272# 4032
?PR?_EEPROM_BYTEWRITE?MAIN. . . . .  C SEG    002CH       REL=UNIT   271# 3928
?PR?_LCDOUTPUTLINE?MAIN . . . . . .  C SEG    004DH       REL=UNIT   254# 2875
?PR?_OUTSYMBOL?MAIN . . . . . . . .  C SEG    00E1H       REL=UNIT   260# 3168
?SMBUS_ISR?BIT. . . . . . . . . . .  B ADDR   0000H.0 R   SEG=?BI?SMBUS_ISR?MAIN   395#
?TIMER0_ISR?BYTE. . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?TIMER0_ISR?MAIN   387#
?USB_API_TEST_ISR?BYTE. . . . . . .  D ADDR   0000H   R   SEG=?DT?USB_API_TEST_ISR?MAIN   391#
?_EEPROM_BYTEREAD?BYTE. . . . . . .  D ADDR   0000H   R   SEG=?DT?_EEPROM_BYTEREAD?MAIN   417#
?_LCDOUTPUTLINE?BYTE. . . . . . . .  D ADDR   0000H   R   SEG=?DT?_LCDOUTPUTLINE?MAIN   413#
?_OUTSYMBOL?BYTE. . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?_OUTSYMBOL?MAIN   407#
AC. . . . . . . . . . . . . . . . .  B ADDR   00D0H.6 A      22#
ACC . . . . . . . . . . . . . . . .  D ADDR   00E0H   A      155# 2105 2106 4180 4201 4213 4234 4251 4611 4630 4753
                                                            4828 4853 4879 4911
ACK . . . . . . . . . . . . . . . .  B ADDR   00C0H.1 A      180# 4325 4524 4542 4586
ACKRQ . . . . . . . . . . . . . . .  B ADDR   00C0H.3 A      226#
AD0BUSY . . . . . . . . . . . . . .  B ADDR   00E8H.4 A      240#
AD0CM0. . . . . . . . . . . . . . .  B ADDR   00E8H.0 A      232#
AD0CM1. . . . . . . . . . . . . . .  B ADDR   00E8H.1 A      235#
AD0CM2. . . . . . . . . . . . . . .  B ADDR   00E8H.2 A      237#
AD0EN . . . . . . . . . . . . . . .  B ADDR   00E8H.7 A      157#
AD0INT. . . . . . . . . . . . . . .  B ADDR   00E8H.5 A      97#
AD0TM . . . . . . . . . . . . . . .  B ADDR   00E8H.6 A      193#
AD0WINT . . . . . . . . . . . . . .  B ADDR   00E8H.3 A      239#
ADC0. . . . . . . . . . . . . . . .  D ADDR   00BDH   A      238#
ADC0CF. . . . . . . . . . . . . . .  D ADDR   00BCH   A      19#
ADC0CN. . . . . . . . . . . . . . .  D ADDR   00E8H   A      38#
ADC0GT. . . . . . . . . . . . . . .  D ADDR   00C3H   A      62#
ADC0GTH . . . . . . . . . . . . . .  D ADDR   00C4H   A      199#
ADC0GTL . . . . . . . . . . . . . .  D ADDR   00C3H   A      201#
ADC0H . . . . . . . . . . . . . . .  D ADDR   00BEH   A      149#
ADC0L . . . . . . . . . . . . . . .  D ADDR   00BDH   A      153#
ADC0LT. . . . . . . . . . . . . . .  D ADDR   00C5H   A      79#
ADC0LTH . . . . . . . . . . . . . .  D ADDR   00C6H   A      205#
ADC0LTL . . . . . . . . . . . . . .  D ADDR   00C5H   A      212#
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    84

AMX0N . . . . . . . . . . . . . . .  D ADDR   00BAH   A      211#
AMX0P . . . . . . . . . . . . . . .  D ADDR   00BBH   A      213#
AR0 . . . . . . . . . . . . . . . .  D ADDR   0000H   A      4636 4748 4834 4906
AR1 . . . . . . . . . . . . . . . .  D ADDR   0001H   A      4256 4607 4637 4747 4835 4905
AR2 . . . . . . . . . . . . . . . .  D ADDR   0002H   A      4257 4606 4638 4746 4836 4904
AR3 . . . . . . . . . . . . . . . .  D ADDR   0003H   A      4258 4605 4639 4745 4837 4903
AR4 . . . . . . . . . . . . . . . .  D ADDR   0004H   A      1337 1409 1479 1549 1653 1725 1795 1864 4640 4744 4838
                                                            4902
AR5 . . . . . . . . . . . . . . . .  D ADDR   0005H   A      1336 1408 1478 1548 1652 1724 1794 1863 4641 4743 4839
                                                            4901
AR6 . . . . . . . . . . . . . . . .  D ADDR   0006H   A      1335 1407 1477 1547 1651 1723 1793 1862 3939 4038 4642
                                                            4742 4840 4900
AR7 . . . . . . . . . . . . . . . .  D ADDR   0007H   A      3010 3074 3938 4037 4643 4741 4841 4899
ARBLOST . . . . . . . . . . . . . .  B ADDR   00C0H.2 A      78#
B . . . . . . . . . . . . . . . . .  D ADDR   00F0H   A      148# 3189 3192 4631 4752 4829 4910
CCF0. . . . . . . . . . . . . . . .  B ADDR   00D8H.0 A      242#
CCF1. . . . . . . . . . . . . . . .  B ADDR   00D8H.1 A      245#
CCF2. . . . . . . . . . . . . . . .  B ADDR   00D8H.2 A      9#
CCF3. . . . . . . . . . . . . . . .  B ADDR   00D8H.3 A      12#
CCF4. . . . . . . . . . . . . . . .  B ADDR   00D8H.4 A      15#
CF. . . . . . . . . . . . . . . . .  B ADDR   00D8H.7 A      34#
CKCON . . . . . . . . . . . . . . .  D ADDR   008EH   A      222# 3675 3697 3742
CLKMUL. . . . . . . . . . . . . . .  D ADDR   00B9H   A      163#
CLKSEL. . . . . . . . . . . . . . .  D ADDR   00A9H   A      147#
COUNTER . . . . . . . . . . . . . .  D ADDR   0022H   R   SEG=?DT?MAIN   308 445# 576 1153 1154 1155 1156 1163 1164
                                                            1165 1166 1169 1170 1171 1174 1175 1176 1177 1183 1185
                                                            1186 1187 1188 1189 1190 1191 1282 1284 1587 1588 1589
                                                            1590 1969 1971 1973 1974 1976 1977 1979 1980 1998 1999
                                                            2000 2001 2056 2057 2058 2059 2157 2159 2161 2162 2164
                                                            2165 2167 2168 2174 2176 2177 2179 2180 2182 2183 2185
                                                            2243 2245 2247 2248 2250 2251 2253 2254 2274 2276 2278
                                                            2279 2281 2282 2284 2285 2307 2309 2311 2312 2314 2315
                                                            2317 2318 2339 2341 2343 2344 2346 2347 2349 2350 2356
                                                            2358 2359 2361 2362 2364 2365 2367 2479 2481 2483 2484
                                                            2486 2487 2489 2490 2510 2512 2513 2515 2516 2518 2519
                                                            2521 2613 2615 2616 2618 2619 2621 2622 2624 2666 2668
                                                            2670 2671 2673 2674 2676 2677 2814 2816 2818 2819 2821
                                                            2822 2824 2825 2842 2844 2845 2847 2848 2850 2851 2853
                                                            2996 3004 3005 3006 3007 4186 4188 4190 4191 4193 4194
                                                            4196 4197 4219 4221 4222 4224 4225 4227 4228 4230
CPT0CN. . . . . . . . . . . . . . .  D ADDR   009BH   A      110#
CPT0MD. . . . . . . . . . . . . . .  D ADDR   009DH   A      109#
CPT0MX. . . . . . . . . . . . . . .  D ADDR   009FH   A      143#
CPT1CN. . . . . . . . . . . . . . .  D ADDR   009AH   A      113#
CPT1MD. . . . . . . . . . . . . . .  D ADDR   009CH   A      112#
CPT1MX. . . . . . . . . . . . . . .  D ADDR   009EH   A      146#
CR. . . . . . . . . . . . . . . . .  B ADDR   00D8H.6 A      59#
CY. . . . . . . . . . . . . . . . .  B ADDR   00D0H.7 A      85#
DELAY?644 . . . . . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?_LCDOUTPUTLINE?MAIN   414# 2879 2913
DEVICE_NAME_STR . . . . . . . . . .  C ADDR   003CH   R   SEG=?CO?MAIN   344 547#
DEVICE_SN_STR . . . . . . . . . . .  C ADDR   0042H   R   SEG=?CO?MAIN   343 555#
DISCRET . . . . . . . . . . . . . .  D ADDR   001EH   R   SEG=?DT?MAIN   313 444# 1196 1197 1198 1199 1206 1207 1208
                                                            1209 1212 1213 1214 1217 1218 1219 1220 1226 1228 1229
                                                            1230 1231 1232 1233 1234 1592 1593 1594 1595 2056 2057
                                                            2058 2059 3045 3046 3047 3048 3052 3053 3054 3055 3060
                                                            3068 3069 3070 3071
DP. . . . . . . . . . . . . . . . .  D ADDR   0082H   A      57#
DPH . . . . . . . . . . . . . . . .  D ADDR   0083H   A      198# 3191 3193 4252 4610 4632 4751 4830 4909
DPL . . . . . . . . . . . . . . . .  D ADDR   0082H   A      200# 4253 4609 4633 4750 4831 4908
EA. . . . . . . . . . . . . . . . .  B ADDR   00A8H.7 A      26# 1068
EEPROM_SCL. . . . . . . . . . . . .  B ADDR   0080H.1 A      42# 1020 1032 1036
EEPROM_SDA. . . . . . . . . . . . .  B ADDR   0080H.0 A      21# 1009
EIE1. . . . . . . . . . . . . . . .  D ADDR   00E6H   A      25# 1065 3754
EIE2. . . . . . . . . . . . . . . .  D ADDR   00E7H   A      28#
EIP1. . . . . . . . . . . . . . . .  D ADDR   00F6H   A      49#
EIP2. . . . . . . . . . . . . . . .  D ADDR   00F7H   A      52#
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    85

EMI0CF. . . . . . . . . . . . . . .  D ADDR   0085H   A      67#
EMI0CN. . . . . . . . . . . . . . .  D ADDR   00AAH   A      93#
EMI0TC. . . . . . . . . . . . . . .  D ADDR   0084H   A      99#
ENCDATA . . . . . . . . . . . . . .  D ADDR   0005H   R   SEG=?DT?MAIN   335 427#
ENCMINUS. . . . . . . . . . . . . .  D ADDR   000EH   R   SEG=?DT?MAIN   435# 2751 2767 2782 2797 2836 2857
ENCN. . . . . . . . . . . . . . . .  D ADDR   0026H   R   SEG=?DT?MAIN   307 446# 602 2422 2433 2450 2455 2528
ENCODERSCAN1. . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?ENCODERSCAN1?MAIN   382 2201#
ENCODERSCAN2. . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?ENCODERSCAN2?MAIN   383 2091#
ENCODERSCAN3. . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?ENCODERSCAN3?MAIN   381 2389#
ENCODERSCAN4. . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?ENCODERSCAN4?MAIN   380 2553#
ENCODERSCAN5. . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?ENCODERSCAN5?MAIN   379 2706#
ENCOLD. . . . . . . . . . . . . . .  D ADDR   0015H   R   SEG=?DT?MAIN   319 440# 606 2430 2432 2438 2449 2467 2469
                                                            2471 2498 2500 2502 2531 2534 2537 2540
ENCPLUS . . . . . . . . . . . . . .  D ADDR   001AH   R   SEG=?DT?MAIN   442# 2745 2760 2776 2791 2808 2829
ENCSTATE. . . . . . . . . . . . . .  D ADDR   0007H   R   SEG=?DT?MAIN   331 429# 2101 2107 2109 2191 2224 2378 2723
                                                            2730 2863
ENCTEMP . . . . . . . . . . . . . .  D ADDR   0013H   R   SEG=?DT?MAIN   321 438# 2396 2405 2409 2413 2419 2436 2440
                                                            2452
ES0 . . . . . . . . . . . . . . . .  B ADDR   00A8H.4 A      156#
ESPI0 . . . . . . . . . . . . . . .  B ADDR   00A8H.6 A      203#
ET0 . . . . . . . . . . . . . . . .  B ADDR   00A8H.1 A      158# 1071 2888 2974
ET1 . . . . . . . . . . . . . . . .  B ADDR   00A8H.3 A      160#
ET2 . . . . . . . . . . . . . . . .  B ADDR   00A8H.5 A      164# 4778
EX0 . . . . . . . . . . . . . . . .  B ADDR   00A8H.0 A      170# 3900
EX1 . . . . . . . . . . . . . . . .  B ADDR   00A8H.2 A      177# 3903
EXT_INT0. . . . . . . . . . . . . .  B ADDR   0080H.2 A      217# 2560
EXT_INT1. . . . . . . . . . . . . .  B ADDR   0080H.3 A      220# 2564
EXT_INTERRUPT_INIT. . . . . . . . .  C ADDR   0000H   R   SEG=?PR?EXT_INTERRUPT_INIT?MAIN   364 3600 3857#
F0. . . . . . . . . . . . . . . . .  B ADDR   00D0H.5 A      229#
F1. . . . . . . . . . . . . . . . .  B ADDR   00D0H.1 A      233#
FAIL?2655 . . . . . . . . . . . . .  B ADDR   0000H.0 R   SEG=?BI?SMBUS_ISR?MAIN   396# 4264 4482 4559 4569 4594
FLAG. . . . . . . . . . . . . . . .  D ADDR   0037H   R   SEG=?DT?MAIN   302 449# 572
FLAG1 . . . . . . . . . . . . . . .  B ADDR   0001H.1 R   SEG=?BI?MAIN   322 462# 579
FLAGPOINT . . . . . . . . . . . . .  B ADDR   0000H.3 R   SEG=?BI?MAIN   338 456# 581 1262 3451 4699 4702 4708
FLKEY . . . . . . . . . . . . . . .  D ADDR   00B7H   A      244#
FLSCL . . . . . . . . . . . . . . .  D ADDR   00B6H   A      230#
GET_INTERRUPT_SOURCE. . . . . . . .  C ADDR   -----       EXT   290# 4847
HIGH? . . . . . . . . . . . . . . .  D ADDR   0003H   R   SEG=?DT?MAIN   341 425#
I?2656. . . . . . . . . . . . . . .  D ADDR   0002H   R   SEG=?DT?MAIN   424# 4314 4406 4434 4498 4521 4533
I?2758. . . . . . . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?TIMER0_ISR?MAIN   388# 4676 4685 4697 4712 4716
                                                            4729
IE. . . . . . . . . . . . . . . . .  D ADDR   00A8H   A      44#
IE0 . . . . . . . . . . . . . . . .  B ADDR   0088H.1 A      142#
IE1 . . . . . . . . . . . . . . . .  B ADDR   0088H.3 A      144#
INITIALIZE. . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INITIALIZE?MAIN   371 984 3574#
INT0_ISR. . . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INT0_ISR?MAIN   360 4144 4179#
INT1_ISR. . . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?INT1_ISR?MAIN   359 4206 4212#
INTVAL?3060 . . . . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?USB_API_TEST_ISR?MAIN   392# 4848 4852 4878
IN_PACKET . . . . . . . . . . . . .  D ADDR   0027H   R   SEG=?DT?MAIN   304 447# 4859 4860
IP. . . . . . . . . . . . . . . . .  D ADDR   00B8H   A      77# 3863
IT0 . . . . . . . . . . . . . . . .  B ADDR   0088H.0 A      172#
IT01CF. . . . . . . . . . . . . . .  D ADDR   00E4H   A      35# 3872 3886 3889 3893 3896
IT1 . . . . . . . . . . . . . . . .  B ADDR   0088H.2 A      178#
KEY1. . . . . . . . . . . . . . . .  B ADDR   0080H.4 A      82# 1902 1996
KEY2. . . . . . . . . . . . . . . .  B ADDR   00A0H.5 A      84# 1945
KEY3. . . . . . . . . . . . . . . .  B ADDR   0080H.6 A      87# 2006
KEY4. . . . . . . . . . . . . . . .  B ADDR   0080H.5 A      90# 2045
KEYFLAG1. . . . . . . . . . . . . .  B ADDR   0001H.5 R   SEG=?BI?MAIN   312 466# 583 1956 1983 1990
KEYFLAG2. . . . . . . . . . . . . .  B ADDR   0001H.6 R   SEG=?BI?MAIN   311 467# 585
KEYFLAG3. . . . . . . . . . . . . .  B ADDR   0001H.7 R   SEG=?BI?MAIN   310 468# 587 2011 2033 2040
KEYFLAG4. . . . . . . . . . . . . .  B ADDR   0002H.0 R   SEG=?BI?MAIN   309 469# 589 2051 2072 2077
L?0249. . . . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?_EEPROM_BYTEWRITE?MAIN   1252 2030 3929#
LCDMODE . . . . . . . . . . . . . .  D ADDR   0008H   R   SEG=?DT?MAIN   330 430# 598 1241 1245 1249 1266 2016 2018
                                                            2022 3931 4678 4706
LCD_STRING. . . . . . . . . . . . .  C ADDR   0046H   R   SEG=?CO?MAIN   342 561#
LED1. . . . . . . . . . . . . . . .  B ADDR   0090H.7 A      30# 1004 1061 2935 3474 3518
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    86

LED2. . . . . . . . . . . . . . . .  B ADDR   00A0H.0 A      31# 2940 3479 3521
LED3. . . . . . . . . . . . . . . .  B ADDR   00A0H.1 A      33# 2945 3484 3524
LED4. . . . . . . . . . . . . . . .  B ADDR   00A0H.2 A      36# 2950 3489 3527
LED5. . . . . . . . . . . . . . . .  B ADDR   00A0H.3 A      37# 2955 3494 3530
LED6. . . . . . . . . . . . . . . .  B ADDR   00A0H.4 A      39# 2960 3499 3533
LEDNUMBER?1149. . . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?_OUTSYMBOL?MAIN   408# 3172 3456
LEDSSWITCHOFF . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?LEDSSWITCHOFF?MAIN   372 997 2892 3019 3083 3178
                                                            3512#
LONGKEYFLAG . . . . . . . . . . . .  B ADDR   0001H.2 R   SEG=?BI?MAIN   318 463# 591 1896 1931 1950 1991
LONGKEYFLAGCOUNTER. . . . . . . . .  D ADDR   000BH   R   SEG=?DT?MAIN   326 433# 594 1915 1916 1918 1924 1935 1936
LOW?. . . . . . . . . . . . . . . .  D ADDR   0014H   R   SEG=?DT?MAIN   320 439#
LOW_COUNTER?2759. . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?MAIN   421# 617 4661 4662 4663 4665 4734 4735
MAIN. . . . . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?MAIN?MAIN   7 384 969#
MASTER. . . . . . . . . . . . . . .  B ADDR   00C0H.7 A      176#
MCE0. . . . . . . . . . . . . . . .  B ADDR   0098H.5 A      27#
MODF. . . . . . . . . . . . . . . .  B ADDR   00F8H.5 A      103#
NEW . . . . . . . . . . . . . . . .  D ADDR   0012H   R   SEG=?DT?MAIN   437# 2719 2743 2749 2758 2764 2774 2780 2789
                                                            2795 2863
NOW_A . . . . . . . . . . . . . . .  B ADDR   0000H.5 R   SEG=?BI?MAIN   334 458# 2561 2575 2590 2595 2643 2648 2691
NOW_B . . . . . . . . . . . . . . .  B ADDR   0000H.6 R   SEG=?BI?MAIN   332 459# 2565 2570 2585 2604 2638 2657 2695
NSSMD0. . . . . . . . . . . . . . .  B ADDR   00F8H.2 A      127#
NSSMD1. . . . . . . . . . . . . . .  B ADDR   00F8H.3 A      129#
OLDSTATE. . . . . . . . . . . . . .  D ADDR   000DH   R   SEG=?DT?MAIN   324 434# 2104 2191
OSCICL. . . . . . . . . . . . . . .  D ADDR   00B3H   A      145#
OSCICN. . . . . . . . . . . . . . .  D ADDR   00B2H   A      150# 3632
OSCILLATOR_INIT . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?OSCILLATOR_INIT?MAIN   370 3584 3608#
OSCLCN. . . . . . . . . . . . . . .  D ADDR   0086H   A      151#
OSCXCN. . . . . . . . . . . . . . .  D ADDR   00B1H   A      181#
OUTPUTBUFFER. . . . . . . . . . . .  D ADDR   0031H   R   SEG=?DT?MAIN   303 448# 1084 1088 1097 1100 1104 1113 1116
                                                            1120 1129 1132 1136 1322 1357 1394 1427 1464 1497 1534
                                                            1567 1571 1604 1638 1673 1710 1743 1780 1813 1849 1882
                                                            1886 3105 3111 3117 3123 3140 3146 3152 3158 4715
OUTPUTBUFFERTORESETCOUNTER. . . . .  C ADDR   0000H   R   SEG=?PR?OUTPUTBUFFERTORESETCOUNTER?MAIN   374 1146 3133#
OV. . . . . . . . . . . . . . . . .  B ADDR   00D0H.2 A      100#
P . . . . . . . . . . . . . . . . .  B ADDR   00D0H.0 A      179#
P0. . . . . . . . . . . . . . . . .  D ADDR   0080H   A      13# 2097 2210 2396 2404 2714 3801 3804 3807
P0MDIN. . . . . . . . . . . . . . .  D ADDR   00F1H   A      108#
P0MDOUT . . . . . . . . . . . . . .  D ADDR   00A4H   A      40# 3781 3784
P0SKIP. . . . . . . . . . . . . . .  D ADDR   00D4H   A      132#
P1. . . . . . . . . . . . . . . . .  D ADDR   0090H   A      16#
P1MDIN. . . . . . . . . . . . . . .  D ADDR   00F2H   A      111#
P1MDOUT . . . . . . . . . . . . . .  D ADDR   00A5H   A      41# 3788
P1SKIP. . . . . . . . . . . . . . .  D ADDR   00D5H   A      136#
P2. . . . . . . . . . . . . . . . .  D ADDR   00A0H   A      17# 3811
P2MDIN. . . . . . . . . . . . . . .  D ADDR   00F3H   A      114#
P2MDOUT . . . . . . . . . . . . . .  D ADDR   00A6H   A      45# 3792 3795
P2SKIP. . . . . . . . . . . . . . .  D ADDR   00D6H   A      138#
P3. . . . . . . . . . . . . . . . .  D ADDR   00B0H   A      20#
P3MDIN. . . . . . . . . . . . . . .  D ADDR   00F4H   A      116#
P3MDOUT . . . . . . . . . . . . . .  D ADDR   00A7H   A      47#
P3SKIP. . . . . . . . . . . . . . .  D ADDR   00DFH   A      140#
P4. . . . . . . . . . . . . . . . .  D ADDR   00C7H   A      23#
P4MDIN. . . . . . . . . . . . . . .  D ADDR   00F5H   A      117#
P4MDOUT . . . . . . . . . . . . . .  D ADDR   00AEH   A      50#
PCA0. . . . . . . . . . . . . . . .  D ADDR   00F9H   A      24#
PCA0CN. . . . . . . . . . . . . . .  D ADDR   00D8H   A      71#
PCA0CP0 . . . . . . . . . . . . . .  D ADDR   00FBH   A      159#
PCA0CP1 . . . . . . . . . . . . . .  D ADDR   00E9H   A      162#
PCA0CP2 . . . . . . . . . . . . . .  D ADDR   00EBH   A      167#
PCA0CP3 . . . . . . . . . . . . . .  D ADDR   00EDH   A      168#
PCA0CP4 . . . . . . . . . . . . . .  D ADDR   00FDH   A      173#
PCA0CPH0. . . . . . . . . . . . . .  D ADDR   00FCH   A      53#
PCA0CPH1. . . . . . . . . . . . . .  D ADDR   00EAH   A      55#
PCA0CPH2. . . . . . . . . . . . . .  D ADDR   00ECH   A      58#
PCA0CPH3. . . . . . . . . . . . . .  D ADDR   00EEH   A      63#
PCA0CPH4. . . . . . . . . . . . . .  D ADDR   00FEH   A      65#
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    87

PCA0CPL0. . . . . . . . . . . . . .  D ADDR   00FBH   A      66#
PCA0CPL1. . . . . . . . . . . . . .  D ADDR   00E9H   A      68#
PCA0CPL2. . . . . . . . . . . . . .  D ADDR   00EBH   A      72#
PCA0CPL3. . . . . . . . . . . . . .  D ADDR   00EDH   A      75#
PCA0CPL4. . . . . . . . . . . . . .  D ADDR   00FDH   A      80#
PCA0CPM0. . . . . . . . . . . . . .  D ADDR   00DAH   A      69#
PCA0CPM1. . . . . . . . . . . . . .  D ADDR   00DBH   A      73#
PCA0CPM2. . . . . . . . . . . . . .  D ADDR   00DCH   A      76#
PCA0CPM3. . . . . . . . . . . . . .  D ADDR   00DDH   A      81#
PCA0CPM4. . . . . . . . . . . . . .  D ADDR   00DEH   A      83#
PCA0H . . . . . . . . . . . . . . .  D ADDR   00FAH   A      174#
PCA0L . . . . . . . . . . . . . . .  D ADDR   00F9H   A      183#
PCA0MD. . . . . . . . . . . . . . .  D ADDR   00D9H   A      70# 981
PCON. . . . . . . . . . . . . . . .  D ADDR   0087H   A      120#
PFE0CN. . . . . . . . . . . . . . .  D ADDR   00AFH   A      92#
PORT_INIT . . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?PORT_INIT?MAIN   366 3581 3767#
PRE_A . . . . . . . . . . . . . . .  B ADDR   0000H.2 R   SEG=?BI?MAIN   339 455# 2574 2596 2649 2692
PRE_B . . . . . . . . . . . . . . .  B ADDR   0000H.4 R   SEG=?BI?MAIN   337 457# 2569 2605 2658 2696
PS0 . . . . . . . . . . . . . . . .  B ADDR   00B8H.4 A      186#
PSCTL . . . . . . . . . . . . . . .  D ADDR   008FH   A      32#
PSMB_DATA_IN. . . . . . . . . . . .  D ADDR   001BH   R   SEG=?DT?MAIN   316 443# 4093 4094 4095 4506 4507 4508 4514
                                                            4515 4517 4518
PSMB_DATA_OUT . . . . . . . . . . .  D ADDR   000FH   R   SEG=?DT?MAIN   323 436# 3997 3998 3999 4415 4416 4417 4425
                                                            4426 4428 4429
PSPI0 . . . . . . . . . . . . . . .  B ADDR   00B8H.6 A      215#
PSW . . . . . . . . . . . . . . . .  D ADDR   00D0H   A      241# 4181 4200 4214 4233 4254 4255 4608 4634 4635 4749
                                                            4832 4833 4907
PT0 . . . . . . . . . . . . . . . .  B ADDR   00B8H.1 A      187#
PT1 . . . . . . . . . . . . . . . .  B ADDR   00B8H.3 A      189#
PT2 . . . . . . . . . . . . . . . .  B ADDR   00B8H.5 A      191#
PX0 . . . . . . . . . . . . . . . .  B ADDR   00B8H.0 A      196#
PX1 . . . . . . . . . . . . . . . .  B ADDR   00B8H.2 A      197#
RB80. . . . . . . . . . . . . . . .  B ADDR   0098H.2 A      243#
REF0CN. . . . . . . . . . . . . . .  D ADDR   00D1H   A      95#
REG0CN. . . . . . . . . . . . . . .  D ADDR   00C9H   A      96#
REN0. . . . . . . . . . . . . . . .  B ADDR   0098H.4 A      64#
RESETCOUNTERTOOUTPUTBUFFER. . . . .  C ADDR   0000H   R   SEG=?PR?RESETCOUNTERTOOUTPUTBUFFER?MAIN   375 1079 3095#
RETVAL?2254 . . . . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?_EEPROM_BYTEREAD?MAIN   418# 4094 4095 4113
RI0 . . . . . . . . . . . . . . . .  B ADDR   0098H.0 A      165#
ROTATE. . . . . . . . . . . . . . .  B ADDR   0002H.2 R   SEG=?BI?MAIN   305 471#
RS0 . . . . . . . . . . . . . . . .  B ADDR   00D0H.3 A      188#
RS1 . . . . . . . . . . . . . . . .  B ADDR   00D0H.4 A      190#
RSTSRC. . . . . . . . . . . . . . .  D ADDR   00EFH   A      206# 3635
RXOVRN. . . . . . . . . . . . . . .  B ADDR   00F8H.4 A      224#
S0MODE. . . . . . . . . . . . . . .  B ADDR   0098H.7 A      106#
SBCON1. . . . . . . . . . . . . . .  D ADDR   00ACH   A      105#
SBRL1 . . . . . . . . . . . . . . .  D ADDR   00B4H   A      208#
SBRLH1. . . . . . . . . . . . . . .  D ADDR   00B5H   A      118#
SBRLL1. . . . . . . . . . . . . . .  D ADDR   00B4H   A      121#
SBUF0 . . . . . . . . . . . . . . .  D ADDR   0099H   A      202#
SBUF1 . . . . . . . . . . . . . . .  D ADDR   00D3H   A      204#
SCON0 . . . . . . . . . . . . . . .  D ADDR   0098H   A      207#
SCON1 . . . . . . . . . . . . . . .  D ADDR   00D2H   A      210#
SEGMENT_A . . . . . . . . . . . . .  B ADDR   0090H.0 A      126# 1001 1058 3229 3267 3290 3331 3354 3380 3398 3426
                                                            3537
SEGMENT_B . . . . . . . . . . . . .  B ADDR   0090H.1 A      128# 3232 3270 3293 3313 3384 3401 3429 3540
SEGMENT_C . . . . . . . . . . . . .  B ADDR   0090H.2 A      131# 3235 3296 3316 3340 3369 3387 3404 3432 3543
SEGMENT_D . . . . . . . . . . . . .  B ADDR   0090H.3 A      134# 3238 3279 3299 3343 3366 3407 3435 3546
SEGMENT_E . . . . . . . . . . . . .  B ADDR   0090H.4 A      137# 3241 3276 3363 3410 3549
SEGMENT_F . . . . . . . . . . . . .  B ADDR   0090H.6 A      139# 3244 3334 3357 3439 3552
SEGMENT_G . . . . . . . . . . . . .  B ADDR   0090H.5 A      141# 2895 3218 3273 3302 3337 3360 3442 3555
SEGMENT_POINT . . . . . . . . . . .  B ADDR   0080H.7 A      18# 3452 3558
SEND_START?2657 . . . . . . . . . .  B ADDR   0000H.0 R   SEG=?BI?MAIN   453# 614 4330 4338 4383
SI. . . . . . . . . . . . . . . . .  B ADDR   00C0H.0 A      86# 4601
SMB0CF. . . . . . . . . . . . . . .  D ADDR   00C1H   A      89# 3838 3847 4574 4577 4804 4807
SMB0CN. . . . . . . . . . . . . . .  D ADDR   00C0H   A      101# 4275
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    88

SMB0DAT . . . . . . . . . . . . . .  D ADDR   00C2H   A      216# 4293 4296 4303 4356 4374 4419 4509
SMBUS_INIT. . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?SMBUS_INIT?MAIN   365 3597 3832#
SMBUS_ISR . . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?SMBUS_ISR?MAIN   358 4239 4250#
SMB_ACKPOLL . . . . . . . . . . . .  B ADDR   0001H.3 R   SEG=?BI?MAIN   315 464# 3982 4087 4467
SMB_BUSY. . . . . . . . . . . . . .  B ADDR   0000H.1 R   SEG=?BI?MAIN   340 454# 612 3946 3950 4047 4051 4108 4447
                                                            4539 4590 4813
SMB_DATA_LEN. . . . . . . . . . . .  D ADDR   000AH   R   SEG=?DT?MAIN   327 432#
SMB_RANDOMREAD. . . . . . . . . . .  B ADDR   0001H.0 R   SEG=?BI?MAIN   325 461# 3978 4084 4378
SMB_RW. . . . . . . . . . . . . . .  B ADDR   0002H.1 R   SEG=?BI?MAIN   306 470# 3971 4077 4300 4386 4399
SMB_SENDWORDADDR_HIGH . . . . . . .  B ADDR   0001H.4 R   SEG=?BI?MAIN   314 465# 3964 4066 4348 4353
SMB_SENDWORDADDR_LOW. . . . . . . .  B ADDR   0000H.7 R   SEG=?BI?MAIN   329 460# 3974 4074 4366 4371
SMB_SINGLEBYTE_OUT. . . . . . . . .  D ADDR   0006H   R   SEG=?DT?MAIN   333 428# 3990 3998 3999
SMOD1 . . . . . . . . . . . . . . .  D ADDR   00E5H   A      209#
SP. . . . . . . . . . . . . . . . .  D ADDR   0081H   A      98#
SPI0CFG . . . . . . . . . . . . . .  D ADDR   00A1H   A      219#
SPI0CKR . . . . . . . . . . . . . .  D ADDR   00A2H   A      11#
SPI0CN. . . . . . . . . . . . . . .  D ADDR   00F8H   A      119#
SPI0DAT . . . . . . . . . . . . . .  D ADDR   00A3H   A      236#
SPIEN . . . . . . . . . . . . . . .  B ADDR   00F8H.0 A      14#
SPIF. . . . . . . . . . . . . . . .  B ADDR   00F8H.7 A      122#
STA . . . . . . . . . . . . . . . .  B ADDR   00C0H.5 A      214# 4007 4104 4311 4335 4472 4580
STEP. . . . . . . . . . . . . . . .  D ADDR   0009H   R   SEG=?DT?MAIN   328 431#
STO . . . . . . . . . . . . . . . .  B ADDR   00C0H.4 A      234# 4444 4546 4583
SUSPEND_DEVICE. . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?SUSPEND_DEVICE?MAIN   361 4125# 4884
SYMBOLCODE?1150 . . . . . . . . . .  D ADDR   0001H   R   SEG=?DT?_OUTSYMBOL?MAIN   410# 3173 3182
T2CE. . . . . . . . . . . . . . . .  B ADDR   00C8H.4 A      46#
T2CSS . . . . . . . . . . . . . . .  B ADDR   00C8H.1 A      223#
T2SPLIT . . . . . . . . . . . . . .  B ADDR   00C8H.3 A      60#
T2XCLK. . . . . . . . . . . . . . .  B ADDR   00C8H.0 A      135#
TB80. . . . . . . . . . . . . . . .  B ADDR   0098H.3 A      10#
TCON. . . . . . . . . . . . . . . .  D ADDR   0088H   A      124# 2885 2977 3679 3869
TEMP?042. . . . . . . . . . . . . .  D ADDR   0000H   R   SEG=?DT?MAIN?MAIN   400# 1316 1317 1318 1319 1330 1331 1332
                                                            1333 1388 1389 1390 1391 1402 1403 1404 1405 1458 1459
                                                            1460 1461 1472 1473 1474 1475 1528 1529 1530 1531 1542
                                                            1543 1544 1545 1632 1633 1634 1635 1646 1647 1648 1649
                                                            1704 1705 1706 1707 1718 1719 1720 1721 1774 1775 1776
                                                            1777 1788 1789 1790 1791 1843 1844 1845 1846 1857 1858
                                                            1859 1860
TEMPCOUNTER . . . . . . . . . . . .  D ADDR   0038H   R   SEG=?DT?MAIN   301 450# 1283 1285 1287 1288 1295 1296 1297
                                                            1298 1311 1312 1313 1314 1339 1341 1342 1344 1345 1347
                                                            1348 1350 1367 1368 1369 1370 1383 1384 1385 1386 1411
                                                            1413 1414 1416 1417 1419 1420 1422 1437 1438 1439 1440
                                                            1453 1454 1455 1456 1481 1483 1484 1486 1487 1489 1490
                                                            1492 1507 1508 1509 1510 1523 1524 1525 1526 1551 1553
                                                            1554 1556 1557 1559 1560 1562 1571 1597 1598 1599 1600
                                                            1611 1612 1613 1614 1627 1628 1629 1630 1655 1657 1658
                                                            1660 1661 1663 1664 1666 1683 1684 1685 1686 1699 1700
                                                            1701 1702 1727 1729 1730 1732 1733 1735 1736 1738 1753
                                                            1754 1755 1756 1769 1770 1771 1772 1797 1799 1800 1802
                                                            1803 1805 1806 1808 1822 1823 1824 1825 1838 1839 1840
                                                            1841 1866 1868 1869 1871 1872 1874 1875 1877 1886
TF0 . . . . . . . . . . . . . . . .  B ADDR   0088H.5 A      161#
TF1 . . . . . . . . . . . . . . . .  B ADDR   0088H.7 A      166#
TF2H. . . . . . . . . . . . . . . .  B ADDR   00C8H.7 A      61# 4775
TF2L. . . . . . . . . . . . . . . .  B ADDR   00C8H.6 A      74#
TF2LEN. . . . . . . . . . . . . . .  B ADDR   00C8H.5 A      115#
TH0 . . . . . . . . . . . . . . . .  D ADDR   008CH   A      169# 3663
TH1 . . . . . . . . . . . . . . . .  D ADDR   008DH   A      175# 3710 3715
TI0 . . . . . . . . . . . . . . . .  B ADDR   0098H.1 A      171#
TIMER0_INIT . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?TIMER0_INIT?MAIN   369 3588 3653#
TIMER0_ISR. . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?TIMER0_ISR?MAIN   357 4616 4629#
TIMER1_INIT . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?TIMER1_INIT?MAIN   368 3591 3689#
TIMER2_ISR. . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?TIMER2_ISR?MAIN   356 4758 4770#
TIMER3_INIT . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?TIMER3_INIT?MAIN   367 3594 3730#
TIMER3_ISR. . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?TIMER3_ISR?MAIN   355 4785 4799#
TL0 . . . . . . . . . . . . . . . .  D ADDR   008AH   A      182# 3660 4652
A51 MACRO ASSEMBLER  MAIN                                                                 04/15/2013 13:16:08 PAGE    89

TL1 . . . . . . . . . . . . . . . .  D ADDR   008BH   A      184# 3715
TMOD. . . . . . . . . . . . . . . .  D ADDR   0089H   A      123# 3667 3706
TMR2. . . . . . . . . . . . . . . .  D ADDR   00CCH   A      102#
TMR2CN. . . . . . . . . . . . . . .  D ADDR   00C8H   A      130#
TMR2H . . . . . . . . . . . . . . .  D ADDR   00CDH   A      218#
TMR2L . . . . . . . . . . . . . . .  D ADDR   00CCH   A      225#
TMR2RL. . . . . . . . . . . . . . .  D ADDR   00CAH   A      152#
TMR2RLH . . . . . . . . . . . . . .  D ADDR   00CBH   A      43#
TMR2RLL . . . . . . . . . . . . . .  D ADDR   00CAH   A      54#
TMR3. . . . . . . . . . . . . . . .  D ADDR   0094H   A      104# 3749 3750
TMR3CN. . . . . . . . . . . . . . .  D ADDR   0091H   A      133# 3737 3757 4810
TMR3H . . . . . . . . . . . . . . .  D ADDR   0095H   A      221#
TMR3L . . . . . . . . . . . . . . .  D ADDR   0094H   A      228#
TMR3RL. . . . . . . . . . . . . . .  D ADDR   0092H   A      154# 3745 3746 3749 3750
TMR3RLH . . . . . . . . . . . . . .  D ADDR   0093H   A      48#
TMR3RLL . . . . . . . . . . . . . .  D ADDR   0092H   A      56#
TR0 . . . . . . . . . . . . . . . .  B ADDR   0088H.4 A      192#
TR1 . . . . . . . . . . . . . . . .  B ADDR   0088H.6 A      194# 3719
TR2 . . . . . . . . . . . . . . . .  B ADDR   00C8H.2 A      195#
TXBMT . . . . . . . . . . . . . . .  B ADDR   00F8H.1 A      51#
TXMODE. . . . . . . . . . . . . . .  B ADDR   00C0H.6 A      185#
UPDOWN?041. . . . . . . . . . . . .  B ADDR   0000H.0 R   SEG=?BI?MAIN?MAIN   404# 977
USB0ADR . . . . . . . . . . . . . .  D ADDR   0096H   A      227#
USB0DAT . . . . . . . . . . . . . .  D ADDR   0097H   A      231#
USB0XCN . . . . . . . . . . . . . .  D ADDR   00D7H   A      29#
USB_API_TEST_ISR. . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?USB_API_TEST_ISR?MAIN   354 4820 4827#
USB_BCDDEVICE . . . . . . . . . . .  C ADDR   003AH   R   SEG=?CO?MAIN   345 544#
USB_MAXPOWER. . . . . . . . . . . .  C ADDR   0038H   R   SEG=?CO?MAIN   347 538#
USB_MFRSTR. . . . . . . . . . . . .  C ADDR   0004H   R   SEG=?CO?MAIN   350 480#
USB_PID . . . . . . . . . . . . . .  C ADDR   0002H   R   SEG=?CO?MAIN   351 477#
USB_PRODUCTSTR. . . . . . . . . . .  C ADDR   0018H   R   SEG=?CO?MAIN   349 502#
USB_PWATTRIBUTES. . . . . . . . . .  C ADDR   0039H   R   SEG=?CO?MAIN   346 541#
USB_SERIALSTR . . . . . . . . . . .  C ADDR   002EH   R   SEG=?CO?MAIN   348 526#
USB_SUSPEND . . . . . . . . . . . .  C ADDR   -----       EXT   291# 4140
USB_VID . . . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?CO?MAIN   352 474#
VDM0CN. . . . . . . . . . . . . . .  D ADDR   00FFH   A      107#
WCOL. . . . . . . . . . . . . . . .  B ADDR   00F8H.6 A      125#
WORD_ADDR_HIGH. . . . . . . . . . .  D ADDR   0019H   R   SEG=?DT?MAIN   317 441# 3954 4056 4356
WORD_ADDR_LOW . . . . . . . . . . .  D ADDR   0004H   R   SEG=?DT?MAIN   336 426# 3958 4060 4374
WRITECOUNTERTOEEPROM. . . . . . . .  C ADDR   0000H   R   SEG=?PR?WRITECOUNTERTOEEPROM?MAIN   377 2069 2987#
WRITEDISCRETTOEEPROM. . . . . . . .  C ADDR   0000H   R   SEG=?PR?WRITEDISCRETTOEEPROM?MAIN   376 2066 3031#
XBR0. . . . . . . . . . . . . . . .  D ADDR   00E1H   A      88# 3815
XBR1. . . . . . . . . . . . . . . .  D ADDR   00E2H   A      91# 1017 1051 3818
XBR2. . . . . . . . . . . . . . . .  D ADDR   00E3H   A      94#
_BLOCK_READ . . . . . . . . . . . .  C ADDR   -----       EXT   292# 4862
_DEL. . . . . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?_DEL?MAIN   353 2401 4726 5054#
_EEPROM_BYTEREAD. . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?_EEPROM_BYTEREAD?MAIN   362 1161 1182 1204 1225
                                                            1240 3104 3110 3116 3122 4033#
_EEPROM_BYTEWRITE . . . . . . . . .  C ADDR   0006H   R   SEG=?PR?_EEPROM_BYTEWRITE?MAIN   363 3001 3015 3065 3079
                                                            3143 3149 3155 3161 3934#
_LCDOUTPUTLINE. . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?_LCDOUTPUTLINE?MAIN   378 1076 1251 2027 2063 2876#
                                                            3023 3087
_OUTSYMBOL. . . . . . . . . . . . .  C ADDR   0000H   R   SEG=?PR?_OUTSYMBOL?MAIN   373 3169# 4721


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
